define(['exports', 'preact/jsx-runtime', './PRIVATE_Chart/themes/ChartStyles.css', './TrackResizeContainer-c6b5de04', './useTextDimensions-030c6dbd', './useCssVars-4d0eeaa3', 'preact/hooks', './Gridlines-9ec65953', './useId-c9578d26', './Axis-56371b34', './useChartViewport-b6aa68eb', './layoutUtils-4304ffe4', './useChartNav-a9d203a5', './mergeProps-bcfa6a92', './useSelectDrill-03c65602', './useUser-abae2493', './useTestId-d0c49456', './cssUtils-19c17965', './useChartContextMenu-79ff2c41', './useChartDnd-44674b7d', './eventsUtils-edf8f4e5', './accUtils-93ee6f16', './layoutUtils-ba7693df', './useTooltip-f7c1ad5c', './logger-0f873e29', './LayerHost-1b4d03f0', 'preact/compat', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-304eef18', './useChartMarquee-031f5f58', './useVisTouchResponse-88a7bb09', './stringUtils-0ae982c2', './useOverviewContext-dd00c487', './scale-3ae48ed5', './OverviewSlidingWindow-979cf493', './PRIVATE_VisOverview/themes/VisOverview.css', './ScrollBar-4046f84f'], (function(e,t,o,i,r,s,n,a,d,l,c,u,x,p,g,h,v,f,w,m,I,y,S,C,D,b,A,M,P,T,j,R,E,k,O,V,G,N,F){"use strict";function z(e,t,o){const i=e.groupIndex+1;if(!(i>=t))return o(i)?{groupIndex:i}:z({groupIndex:i},t,o)}function B(e,t){const o=e.groupIndex-1;if(!(o<0))return t(o)?{groupIndex:o}:B({groupIndex:o},t)}function L({x:e,width:o,height:i,y:r,windowX:s,windowHeight:n,windowWidth:a,windowY:d}){return t.jsxs(t.Fragment,{children:[t.jsx("rect",{x:e,y:r,width:Math.max(0,s-e),height:i,class:N.styles.overviewBackground}),t.jsx("rect",{x:s+a,width:Math.max(0,e+o-s-a),y:r,height:i,class:N.styles.overviewBackground}),t.jsx("rect",{x:s,y:r,height:Math.max(0,d-r),width:a,class:N.styles.overviewBackground}),t.jsx("rect",{x:s,y:d+n,width:a,class:N.styles.overviewBackground,height:Math.max(r+i-d-n,0)})]})}const U=10,W=f.getChartVars();function H({width:e,height:i,selectedIds:f,hiddenIds:y,hideAndShowBehavior:D="none",orientation:b="vertical",xAxis:A,yAxis:M,plotArea:P,dragMode:T="user",series:j,groups:N,isStacked:H=!1,getDataItem:X,selectionMode:q="none",drilling:Y="off",dataCursorPosition:$,onSelectionChange:_,isDataCursorEnabled:Z,dataCursorStyle:J,onViewportChange:K,onDataCursorPositionChange:Q,onItemDrill:ee,onGroupDrill:te,onItemHover:oe,onItemFocus:ie,datatip:re,zoomAndScroll:se="off",offset:ne,getNavUtil:ae,getDataItemPos:de,getGapRatio:le,valueFormats:ce,findNearest:ue,getMarkerInfo:xe,isRtl:pe,children:ge,testId:he,renderGridLinesInFront:ve,isDataXAxis:fe,contextMenuConfig:we,overview:me="off",defaultOverviewContentRenderer:Ie,isOverview:ye,yAxisSize:Se,overviewRenderer:Ce,...De}){const be=v.useTestId(he),Ae=n.useRef(null),Me=void 0!==be["data-testid"],Pe="horizontal"===b,{xAxisPosition:Te,yAxisPosition:je}=u.getAxesPosition(M,Pe,pe),{resolvedVars:Re,cssContent:Ee}=s.useCssVars(W),ke=Array.from(Array(12)).map(((e,t)=>Re[`color${t+1}`])),{textMeasureContent:Oe,getTextDimensions:Ve}=r.useTextDimensions();let Ge=u.getAvailSpace(e,i);if(ye&&Se){const e=Ge.width-Se,t=u.getOuterGaps(e,i);Ge.width-=Se-2*t.width,Ge.x+=Se-t.width}const Ne=null!=A?.timeAxisType,Fe=u.getScrollBarSpace(Ne,Ge,se,Te,me);let ze=Fe.scrollDims;Ge=Fe.availSpace;const{locale:Be}=h.useUser(),{x:Le,y:Ue,width:We,height:He}=Ge,Xe=Re.labelFontSize,qe=n.useMemo((()=>{const e=new Set(y);return u.getLayoutInfo(j,N,X,A,M,{x:Le,y:Ue,width:We,height:He},e,D,Pe,pe,H,Xe,ne,Be,Ve,Me,fe)}),[Le,Ue,We,He,X,Ve,N,y,D,fe,Pe,pe,H,Me,Be,ne,Xe,j,A,M]),{xProps:Ye,xScale:$e,xViewportExtent:_e,xAxisExtent:Ze,xIndexExtent:Je,xAxisMinExtent:Ke,yViewportExtent:Qe,yAxisExtent:et,groupWidth:tt,yProps:ot,yScale:it,yMaxDim:rt,yMajorTicks:st,xMajorTicks:nt,yMinorTicks:at,xMinorTicks:dt,plotAreaSpace:lt,xSpace:ct,ySpace:ut,idToDataMap:xt,formatAxisLabel:pt,formatYValue:gt}=qe;ze=u.updateScrollBarSpace(ze,"bottom"===Te,pe,rt);const ht=le(Je.startIndex,Je.endIndex),vt=ae(Je.startIndex,Je.endIndex),ft=Ye.tickLabels.map((({index:e})=>e+Je.startIndex)),{getNextNavGroup:wt,getDefaultNavGroup:mt}=function(e,t,o,i,r){const s=o=>{const r=e[t[o]].drilling;return("on"===i||"groupsOnly"===i)&&"off"!=r},n=e=>o.startIndex>t[e.groupIndex]?(e.groupIndex=0,e):o.endIndex<t[e.groupIndex]?(e.groupIndex=t.length-1,e):void 0;return{getDefaultNavGroup:n,getNextNavGroup:(e,o)=>{let i=n(e);return i||(i="ArrowRight"===o?r?B(e,s):z(e,t.length,s):r?z(e,t.length,s):B(e,s),i||e)}}}(N,ft,Je,Y,pe),{ignoreSelectPointerUp:It,cursor:yt,yAxisCursor:St,marqueeProps:Ct,marqueeContent:Dt,toggleButtonContent:bt,isPointInsideMarquee:At,dragMode:Mt}=R.useChartMarquee({plotAreaSpace:lt,xSpace:ct,ySpace:ut,dragMode:T,chartWidth:e,isMultiSelection:"multiple"===q,onViewportChange:K,isZoomScroll:"live"===se,xAxisExtent:Ze,xScale:$e,selectedIds:f,getDataById:e=>xt.get(e),onSelectionChange:_,viewportMax:_e.viewportMax,viewportMin:_e.viewportMin,isRtl:pe,xAxisMinExtent:Ke}),{touchResponse:Pt,touchResponseStyle:Tt}=E.useVisTouchResponse({type:"auto",supportsTouchDragGestures:"off"!==Mt,rootRef:Ae}),{activeId:jt,focusedItemInfo:Rt,hoveredItemInfo:Et,focusedGroupInfo:kt,navProps:Ot,onFocusUpdate:Vt}=x.useChartNav({rootRef:Ae,getNextChartItem:vt,getNextNavGroup:wt,getDefaultNavGroup:mt,touchResponse:Pt,onItemHover:oe,onItemFocus:ie,drilling:Y,xIndexExtent:Je}),{tooltipContent:Gt,tooltipProps:Nt}=function({getTextAndBounds:e,width:t,isRtl:o}){const[i,r]=n.useState(),s=n.useRef(),{tooltipContent:a,tooltipProps:d}=C.useTooltip({text:i,position:"top-start",offset:S.calculateOffset(o,t,s.current)});return{tooltipContent:a,tooltipProps:p.mergeProps({onPointerMove:t=>{const o=e(t.target);o?(s.current=o.bounds,r(o.text)):r(void 0)}},d)}}({getTextAndBounds:e=>{if(e!=Ae.current){const t=I.getElementData(Ae,e),o=t?.ojText;if(!o)return;if(o===A?.title)return{text:o,bounds:Ye.titleProps?.dims};if(o===M?.title)return{text:o,bounds:ot.titleProps?.dims};if(t?.ojGroupIndex){const e=parseInt(t.ojGroupIndex);return{bounds:Ye.tickLabels[e].dims,text:o}}}if(e===Ae.current&&kt.isFocusVisible){const e=N[kt.groupIndex];return{bounds:Ye.tickLabels[kt.groupIndex].dims,text:e.name||e.id}}},width:e,isRtl:pe}),Ft=c.useChartViewport({rootRef:Ae,width:e,height:i,xViewportExtent:_e,yViewportExtent:Qe,xAxisExtent:Ze,yAxisExtent:et,xScale:$e,yScale:it,plotAreaSpace:lt,isRtl:pe,isHoriz:Pe,zoomAndScroll:se,onViewportChange:K}),{selectDrillProps:zt,selectionContent:Bt}=g.useSelectDrill({selectionMode:q,selection:[...f],onChange:_,rootRef:Ae,drilling:Y,onItemDrill:ee,onGroupDrill:te,focusedGroupInfo:kt,focusedItemInfo:Rt,groups:N,getDataItem:X,getDataById:e=>xt.get(e),ignoreAsTrigger:e=>{if(!e)return!1;const t=I.getElementData(Ae,e);return!((!t||"marquee"!==t.ojPrivateObject&&"dragModeControls"!==t.ojPrivateObject&&"scrollBar"!==t.ojPrivateObject)&&!It)}}),Lt=ue($e,it,tt,ht),Ut=de($e,it,tt,ht),[Wt,Ht]=n.useState(!1),{datatipContent:Xt,dataCursorContent:qt,datatipProps:{"aria-describedby":Yt,...$t}}=g.useChartDatatipAndCursor({series:j,groups:N,width:e,height:i,findNearest:Lt,plotAreaSpace:lt,onDataCursorPositionChange:Q,isDataCursorEnabled:Z,dataCursorPosition:$,dataCursorStyle:J,hoveredItemInfo:Et,focusedItemInfo:Rt,getDataItem:X,getMarkerInfo:xe,getDataItemPos:Ut,datatip:re,valueFormats:ce,isHoriz:Pe,touchResponse:Pt,isDisabled:Wt,xScale:$e,yScale:it,timeAxisType:A?.timeAxisType,formatAxisLabel:pt,formatYValue:gt,hasXYValues:fe}),_t=d.useId(),{startIndex:Zt,endIndex:Jt}=Je,Kt=t.jsx(a.Gridlines,{plotArea:P,yMinorTicks:at,xMinorTicks:dt,xScale:$e,yScale:it,isLog:"log"===M?.scale,yTicks:st,xTicks:nt,yAxisPosition:je,isDataXAxis:fe}),Qt=j.length>0&&N.length>0,{contextMenuContent:eo,contextMenuProps:to}=w.useChartContextMenu({isRtl:pe,width:e,height:i,getDataItemPosition:Ut,series:j,groups:N,getDataItem:X,focusedItemInfo:Rt,rootRef:Ae,xAxisTitle:A?.title,yAxisTitle:M?.title,contextMenuConfig:Qt?we:void 0,onContextMenuDismissed:e=>{"keyboard"===e&&Vt()}}),[oo,io]=n.useState({accepted:void 0,type:""}),{draggable:ro,dndProps:so,dndContent:no}=m.useChartDnd({onDrag:De.onDrag,onDragStart:De.onDragStart,onDragEnd:De.onDragEnd,onDragEnter:De.onDragEnter,onDragLeave:De.onDragLeave,onDragOver:De.onDragOver,onDrop:De.onDrop,itemsDraggable:De.itemsDraggable,groupDraggable:De.groupDraggable,rootRef:Ae,groups:N,series:j,selectedIds:f,getDataItem:X,xSpace:ct,ySpace:ut,plotAreaSpace:lt,setDragOver:io,setDatatipDisabled:Ht,onSelectionChange:_}),ao=p.mergeProps(Ot,zt,Ft,$t,Ct,Nt,to,so),lo="off"==me||"on"!==me&&me.renderer?void 0:Ie,{background:co,slidingWindow:uo}=Ce(lt);return t.jsxs(t.Fragment,{children:[Ve&&null!=Re.labelFontSize&&t.jsxs("div",{tabIndex:ye?void 0:0,draggable:ro,ref:Ae,"aria-activedescendant":jt,"aria-label":De["aria-label"],"aria-labelledby":De["aria-labelledby"],"aria-describedby":k.merge([De["aria-describedby"],Yt]),style:{...Tt},role:ye?void 0:"application",className:o.styles.baseChartStyle,"data-oj-private-selection-mode":Me?q:void 0,...be,...ye?{}:ao,children:[t.jsxs("svg",{width:"100%",height:0!=ze.height&&"off"!=me?Math.ceil(100*(Fe.availSpace.height+U))/i+"%":"100%",children:[t.jsx("clipPath",{id:`${_t}`,children:t.jsx("rect",{...lt})}),co,t.jsx(a.PlotArea,{color:P?.color,dragOverStyle:"plotArea"!==oo.type?"none":oo.accepted?"accept":"reject",yScale:it,hasAxisLine:!ye,cursor:yt,isLog:"log"===M?.scale,availSpace:lt,xAxisPosition:Te,isDataXAxis:fe,isRtl:pe}),!ve&&Kt,t.jsx(l.Axis,{...ot,axisPosition:je,isRtl:pe,cursor:St,availSpace:ut,dragOverStyle:"yAxis"!==oo.type?"none":oo.accepted?"accept":"reject"}),t.jsx(l.Axis,{...Ye,isRtl:pe,axisPosition:Te,isTextInteractive:e=>{if(null!=A?.timeAxisType)return!1;const t=N[e]?.drilling;return"on"===t||"off"!=t&&("on"===Y||"groupsOnly"===Y)},activeId:jt,cursor:yt,focusedGroupIndex:kt.isFocusVisible?kt.groupIndex:void 0,availSpace:ct,dragOverStyle:"xAxis"!==oo.type?"none":oo.accepted?"accept":"reject"}),t.jsxs("g",{"clip-path":`url(#${_t})`,children:[ge({xStartIndex:Zt,xEndIndex:Jt,colors:ke,xScale:$e,yScale:it,isPointInsideMarquee:At,defaultFontSize:Re.labelFontSize,gapRatio:ht,activeId:jt,focusedItemInfo:Rt,hoveredItemInfo:Et,getTextDimensions:Ve,groupWidth:tt}),ve&&Kt,qt]}),uo,"live"===se&&!ye&&t.jsx(F.ScrollBar,{availSpace:ze,isRtl:pe,viewport:_e,axisExtent:Ze,isHoriz:"bottom"===Te}),Dt]}),t.jsx(O.OverviewContext.Provider,{value:{yAxisSize:ut.width,isOverview:!0,width:e,height:ze.height,overviewRenderer:e=>{const{xScale:o,...i}=function(e,t,o,i,r,s){const n=[o.min,o.max],a=e?[s.x+s.width,s.x]:[s.x,s.x+s.width],d=new V.ScaleLinear(n,a),l=[r.min,r.max],c=[s.y+s.height,s.y],u=new V.ScaleLinear(l,c),x=d.transform(t.viewportMin),p=Math.abs(d.transform(t.viewportMax)-d.transform(t.viewportMin));return{windowX:e?x-p:x+.5,windowWidth:p-.5,windowY:u.transform(i.viewportMax),windowHeight:Math.abs(u.transform(i.viewportMax)-u.transform(i.viewportMin)),xScale:d,yScale:u}}(pe,_e,Ze,Qe,et,e);return function(e,o,i,r,s,n,a){return{slidingWindow:t.jsx(G.OverviewSlidingWindow,{...r,...s,hasHandles:n,onWindowDimsChange:t=>{u.updateViewportFromOverview(e,o,s.windowX,s.windowWidth,t.deltaX,t.deltaWidth,i,a)}}),background:t.jsx(L,{...r,...s})}}(Ze,pe,o,e,i,!0,K)}},children:!ye&&"off"!==me&&lo&&t.jsx("div",{style:{width:e,height:ze.height},children:lo()})}),bt,Xt,Gt,eo,Bt,no]}),Oe,Ee]})}e.Chart=function({width:e,height:r,...s}){const{isOverview:n,overviewRenderer:a,yAxisSize:d,width:l,height:c}=O.useOverviewContext();let u=e,x=r;return void 0===u&&n&&void 0!==l&&(u=`${l}px`),void 0===x&&n&&void 0!==c&&(x=`${c}px`),t.jsx(i.TrackResizeContainer,{width:u,height:x,class:o.dimensionStyle,children:(e,o)=>e||o?t.jsx(H,{width:e,height:o,...s,yAxisSize:d,isOverview:n,overviewRenderer:a}):void 0})}}));
//# sourceMappingURL=Chart-c3a5a93d.js.map
