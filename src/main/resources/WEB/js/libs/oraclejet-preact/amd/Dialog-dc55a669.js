define(['exports', 'preact/jsx-runtime', 'preact/compat', './WindowOverlay-00523782', './useTestId-d0c49456', './useAnimation-5a74955f', 'preact/hooks', './refUtils-d354a169', './UNSAFE_Dialog/themes/redwood/DialogTheme', './FocusTrap-d351e5c9', './Layer-9fb9ca67', './LayerHost-1b4d03f0', './Modal-991f1310', './classNames-08d99695', './ImageVars.css-17386400', './useComponentTheme-5aa41a8f', './useId-c9578d26', './dimensions-fda85d6b', './mergeInterpolations-9ede4cf7', './useResizeObserver-275c3e83', './useDraggable-7f591a3d', './Floating-28ad0903', './IconButton-c2e5c1c5', './Close-8af8a18c', './Resizable-d12fcde1', './useBreakpoints-52d11a72', './useTranslationBundle-652e08a6', './animationUtils-716a9aa6', './tabbableUtils-428c264e'], (function(e,n,o,s,a,t,r,i,l,c,d,u,f,m,g,h,b,p,y,R,v,D,E,x,S,z,j,I,A){"use strict";const O=({children:e,id:o,cancelBehavior:s,onClose:a,draggableProps:t,headerDecoration:r="on"})=>{const{styles:i}=h.useComponentTheme(l.DialogRedwoodTheme),c=m.classNames([i.dialogHeaderStyle,..."on"===r?[i.dialogHeaderDecorationStyle]:[]]),d="string"==typeof e?n.jsx("h1",{id:o,className:i.dialogTitleStyle,children:e}):n.jsx(n.Fragment,{children:e}),u=j.useTranslationBundle("@oracle/oraclejet-preact"),f="icon"===s?n.jsx("div",{children:n.jsx("div",{className:i.dialogHeaderCloseIconStyle,children:n.jsx(E.IconButton,{"aria-label":u.message_close(),size:"sm",variant:"ghost",onAction:()=>{a?.({reason:"icon"})},children:n.jsx(x.SvgClose,{})})})}):null;return n.jsxs("div",{className:c,...t,children:[d,f]})},B=o.forwardRef((({children:e,style:o},s)=>n.jsx("div",{ref:s,className:o,children:e}))),C=o.forwardRef((({children:e,header:o,footer:s,visibility:t,labelId:d,role:u,ariaLabelledBy:f,ariaDescribedBy:b,cancelBehavior:p,draggableProps:y,isResizable:v,headerDecoration:D,containerRef:E,onClose:x,onResizeStart:j,onResize:I,onResizeEnd:A,onKeyDown:C,testId:T,style:w,footerRef:N},k)=>{const L=r.useRef(null),F=i.mergeRefs(k,L),[U,P]=r.useState(!1),_=!z.useBreakpoints().md,{classes:W,styles:H}=h.useComponentTheme(l.DialogRedwoodTheme),M=r.useCallback((()=>{L.current&&(L.current.clientHeight<400?P(!0):P(!1))}),[]);r.useEffect((()=>{M()}),[M]),R.useResizeObserver(L,M);const X=_?H.baseStyleSmallWidth:H.baseStyleDesktop,G=U?H.dialogContentStyleNoShrink:H.dialogContentStyle,K="visible"===t?H.visibilityVisible:H.visibilityHidden,Y=a.useTestId(T);return n.jsx(c.FocusTrap,{restoreFocusRef:!1,children:n.jsxs("div",{ref:F,tabIndex:-1,className:m.classNames([W,X,K,g.globalImages]),style:w,onKeyDown:C,role:u,"aria-labelledby":f,"aria-describedby":b,...Y,children:[n.jsxs("div",{className:H.dialogContainerStyle,children:[n.jsx(O,{id:d,onClose:x,headerDecoration:D,cancelBehavior:p,draggableProps:y,children:o}),n.jsx("div",{className:G,children:n.jsx("div",{className:H.dialogBodyStyle,children:e})}),n.jsx(B,{ref:N,style:H.dialogFooterStyle,children:s})]}),v&&n.jsx(S.Resizable,{onResizeStart:j,onResize:I,onResizeEnd:A,containerRef:E})]})})})),T=o.forwardRef((({children:e,isOpen:o,header:a="",footer:l,modality:c="modal",launcherRef:u,anchorRef:m,placement:g,offset:h=0,cancelBehavior:R="none",dragAffordance:E="none",resizeBehavior:x="none",headerDecoration:S="on",onDragStart:j,onDragMove:I,onDragEnd:O,onResizeStart:B,onResize:T,onResizeEnd:N,onFocusSet:k,onClose:L,onTransitionEnd:F,role:U="dialog","aria-labelledby":P,"aria-describedby":_,testId:W,...H},M)=>{const[X,G]=r.useState(o?"initial":"unmounted"),[K,Y]=r.useState("hidden"),V=r.useRef("unmounted"),q=r.useRef(null),J=r.useRef(null),Q=r.useRef(null),Z=r.useRef(null),$=!z.useBreakpoints().md,ee=$?"bottom":g||"center",ne=$?"opening"===X?"slideUp":"slideDown":"opening"===X?"zoomIn":"zoomOut",oe=b.useId(),se=P||oe,ae=[...Object.values(p.dimensionInterpolations)],te=y.mergeInterpolations(ae),{...re}=te(H),ie=r.useRef(!1),le=r.useCallback((()=>{Z.current&&A.allTabbableElements(Z.current).length>0?A.focusWithin(Z.current):A.focusWithin(J.current),k?.()}),[k]),ce=r.useCallback((()=>{const e=Q.current;ie.current&&e&&(A.focusOn(e),ie.current=!1)}),[]),{nodeRef:de}=t.useAnimation(ne,{animationStates:w,isAnimatedOnMount:!0,onAnimationEnd:()=>{o?F?.(!0):o||(ie.current=J.current?.contains(A.getActiveElement())||!1,de(null),Y("hidden"),G("unmounted"),F?.(!1))}}),ue=r.useMemo((()=>i.mergeRefs(J,M)),[J,M]),fe=r.useCallback((e=>{Q.current===A.getActiveElement()&&"F6"===e.code&&(e.preventDefault(),e.stopPropagation(),A.focusWithin(J.current),k?.())}),[c]),{draggableProps:me}=v.useDraggable({isDisabled:"none"===E,containerRef:q,onDragStart:j,onDragMove:I,onDragEnd:O});r.useEffect((()=>("unmounted"!==X||o?"unmounted"===X&&o?G("initial"):"initial"===X&&o?(de(J.current),G("opening")):"opening"===X&&o?Y("visible"):o||G("closing"):X!==V.current&&ce(),()=>{V.current=X})),[o,X,de,ce]),r.useEffect((()=>()=>{const e=Q.current;J.current?.contains(A.getActiveElement())&&e&&setTimeout((()=>{A.focusOn(e)}),0)}),[]),r.useEffect((()=>(o&&(u?.current&&u.current instanceof Element?Q.current=document.body.contains(u.current)?u.current:A.getActiveElement():Q.current=A.getActiveElement(),"modeless"===c&&Q.current?.addEventListener("keydown",fe)),()=>{"modeless"===c&&Q.current?.removeEventListener("keydown",fe)})),[o,u,fe,c]),r.useEffect((()=>{"visible"===K&&le()}),[K,le]);const ge=e=>{switch(e.code){case"Escape":L?.({reason:"escapeKey"});break;case"F6":Q.current&&"modeless"===c&&A.focusOn(Q.current),e.preventDefault(),e.stopPropagation()}},he=()=>{J.current?.focus()},be=()=>n.jsx(C,{ref:ue,labelId:se,header:a,footer:l,role:U,ariaLabelledBy:se,ariaDescribedBy:_,onKeyDown:ge,testId:W,style:re,visibility:K,cancelBehavior:R,draggableProps:me,isResizable:"resizable"===x,headerDecoration:S,containerRef:q,onClose:L,onResizeStart:B,onResize:T,onResizeEnd:N,footerRef:Z,children:e}),pe=()=>m&&m.current?n.jsx(D.Floating,{ref:q,anchorRef:m,placement:"bottom-start",flipOptions:{mainAxis:!1,crossAxis:!1},shiftOptions:{mainAxis:!1,crossAxis:!1},children:be()}):n.jsx(s.WindowOverlay,{placement:ee,offset:h,children:be()});return"modal"===c?n.jsx(f.Modal,{isOpen:"unmounted"!==X,onBackdropClick:he,children:pe()}):"unmounted"!==X?n.jsx(d.Layer,{children:pe()}):null})),w={zoomIn:{from:{scaleX:.9,scaleY:.9,transformOrigin:"center",opacity:0},to:{scaleX:1,scaleY:1,opacity:1},options:{duration:200}},zoomOut:{from:{scaleX:1,scaleY:1,transformOrigin:"center",opacity:1},to:{scaleX:.9,scaleY:.9,opacity:0},options:{duration:200}},slideUp:{...I.SLIDE_UP_XLARGE,options:{duration:I.DURATION_LARGE}},slideDown:{...I.SLIDE_DOWN_XLARGE,options:{duration:I.DURATION_LARGE}}};e.Dialog=T}));
//# sourceMappingURL=Dialog-dc55a669.js.map
