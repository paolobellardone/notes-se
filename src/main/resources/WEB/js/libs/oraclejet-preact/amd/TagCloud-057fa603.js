define(['exports', 'preact/jsx-runtime', './TrackResizeContainer-c6b5de04', './classNames-08d99695', './colorUtils-7c069766', './layoutUtils-ba7693df', './eventsUtils-edf8f4e5', './accUtils-93ee6f16', './UNSAFE_TagCloud/themes/TagCloudStyles.css', './useVisEvents-a2e7394b', 'preact/hooks', './useUser-abae2493', './useDatatip-db874c22', './mergeProps-bcfa6a92', './useTranslationBundle-652e08a6', './useTextDimensions-030c6dbd', './useSelection-4c8e905b', './useTestId-d0c49456', './useContextMenu-599ada89', './Menu-bdd771bf', './MenuItem-dc85fcad', 'preact', './logger-0f873e29', './LayerHost-1b4d03f0', 'preact/compat', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-304eef18', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-67f24a8f', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', './useVisTouchResponse-88a7bb09', './stringUtils-0ae982c2'], (function(e,t,n,o,s,i,r,l,c,a,u,d,f,h,p,x,m,g,y,S,b,I,C,M,v,w,T,R,U,z,D,E,k,A,F,N,P){"use strict";function L(e,t){const{idx:n}=e;return t[n]}function V(e){return null!=e?.15*e:0}function _(e){return{getItem:t=>L(t,e),getDetailFromInfo:t=>{if(!t)return{id:void 0,data:void 0};const n=L(t,e);return{id:n.id,data:n}},getPrevItemInfo:t=>function(e,t){let n=e.idx;return n=Math.max(0,n-1),{idx:n,id:t[n].id}}(t,e),getNextItemInfo:t=>function(e,t){let n=e.idx;return n=Math.min(t.length-1,n+1),{idx:n,id:t[n].id}}(t,e)}}const j=20,B=(e,t,n,o)=>t===n?12:12+Math.ceil((o-1)*(e-t)/(n-t)*12);function H(e){const t=[];let n=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(let t=0;t<e.length;t++)n=Math.min(n,e[t].value),o=Math.max(o,e[t].value);for(let s=0;s<e.length;s++){const i=B(e[s].value,n,o,3);t.push({...e[s],fontSize:i})}return t}function $(e,t){const n=[0];let o=e[0].w+2;if(e.length>1)for(let s=1;s<e.length;s++)o+e[s].w>t&&(n.push(s),o=0),o+=e[s].w+2;return n}function O(e,t,n,o,s,r){let l;return l="cloud"!==e&&e?function(e,t,n,o,s){const i=[],r=[];let l=0,c=0,a=0;const u=H(e);for(let e=0;e<u.length;e++){const t=u[e],n=s(t.label,{fontSize:t.fontSize+"px"});l=Math.max(l,n.width),c=Math.max(c,n.height),a=Math.max(a,t.fontSize),r.push({w:n.width,h:n.height,x:n.x,y:n.y})}let d,f,h=0,p=(t-0)/l;for(;p-h>.001;)d=(h+p)/2,f=$(r,(t-0)/d),f.length*(d*c+2)-2>n-0?p=d:h=d;d=h,f=$(r,(t-0)/d),f.push(u.length);for(let e=0;e<f.length-1;e++){const n=f[e],s=f[e+1];let l=5,a=0,h=!0;if(s-n>1){let o=0;for(let e=n;e<s;e++)o+=r[e].w*d,a=Math.max(a,r[e].h*d);if(l=(t-0-o)/(s-n-1),e==f.length-2){const e=.5*a;e<l&&o+(s-n)*e<.9*(t-0)&&(l=e,h=!1)}}const p=0+(e+1)*(c*d+2)-2;let x=0;for(let e=n;e<s;e++){const c=u[e],a=c.fontSize*d;c.fontSize=a;const f=r[e].w*d;c.y=0+p+r[e].y*d-j,h&&e===s-1&&e!==n?c.x=o?0+f+0-t:0+t-f-0:(c.x=0+x,o?x-=r[e].w*d+l:x+=r[e].w*d+l),i.push({...c,w:f,h:r[e].h*d})}}return i}(t,n,o,s,r):function(e,t,n,o,s){const r=[],l=180;let c=10/l,a=10/l;t>n?c*=t/n:a*=n/t;const u=2*Math.PI/l;let d=null,f=0;const h=[],p=[],x=[],m=H(e);for(let e=0;e<m.length;e++){let t=!1,n=0,o=4;const x=m[e],g=s(x.label,{fontSize:x.fontSize+"px"});f=Math.max(f,x.fontSize);let y=-1;for(;!t;){const s=n%l;void 0===h[s]&&(h[s]=Math.cos(n*u)),void 0===p[s]&&(p[s]=Math.sin(n*u));const f=c*n*h[s],m=a*n*p[s],S=V(g.height),b={x:f,y:m,w:g.width+2*S,h:g.height+2*S};if(t=!0,-1!==y&&i.intersects(r[y],b)&&(t=!1),t)for(let n=0;n<e;n++)if(i.intersects(r[n],b)){y=n,t=!1;break}t&&(d=d?i.getUnion(d,b):b,y=-1,r[e]=b,x.x=f,x.y=m,x.w=g.width,x.h=g.height),3600==n?o=3:5400==n?o=2:10800==n&&(o=1),n+=o}}if(d){const e=Math.max(d.w/t,d.h/n),s=d.x+d.w/2,i=d.y+d.h/2;for(let r=0;r<m.length;r++){let l;const c=m[r];l=o?null!=c.x?0-c.x/e-(t/2-s/e):0:null!=c.x?0+c.x/e+(t/2-s/e):0;const a=null!=c.y?0+c.y/e+(n/2-i/e):0,u=null!=c.w?c.w/e:0,d=null!=c.h?c.h/e:0,f=c.fontSize/e;x.push({...c,x:l,y:a,fontSize:f,w:u,h:d})}}return x}(t,n,o,s,r),l}function G(e,t,n,o,i,r,l,c,a){let u,d=!1;if(!o){const e=t===l?.idx,n=t===i?.idx;d=!!(e&&l?.isCurrent||n&&i?.isCurrent)}const f=function(e,t){if(t)return 0===t.length||new Set(t).has(e)}(e.id,c),h=function(e,t){return!(!t||0===t.length)&&new Set(t).has(e)}(e.id,r);if(e.color){let t,n,o;h?(n=e.color,t=s.getContrastingTextColor(n)):t=e.color,u={color:t,backgroundColor:n,backgroundImage:o}}else n||(u={backgroundColor:"none"});return{isCurrent:d,isHighlighted:f,isSelected:h,isFocused:!!l&&J(l,t),key:e.id,itemIdx:t,style:u,activeId:d?a:void 0,isReadOnly:o,...e}}function X(e){const t=e.dataset.idx;if(null!=t)return{idx:Number(t)}}function q(e,t){return e?.idx===t?.idx}function J(e,t){if(!e.isFocusVisible)return!1;const{idx:n}=e;return n===t}function K(e,t,n){return o=>{switch(o.code){case"Space":case"Enter":e(),r.cancelEvent(o);break;case"Tab":t({...n,isCurrent:!0,isFocusVisible:!0}),r.cancelEvent(o)}}}const Q=e=>{const{itemBase:n,itemStyle:s,hoverUnselectedItemStyle:i,selectedItemStyle:r,hoveredSelectedItemStyle:a,dimmedItemStyle:u,interactiveCursorStyle:d}=c.styles,f=e.isHighlighted||null==e.isHighlighted,h=o.classNames([n,e.isSelected?r:s,e.isCurrent?e.isSelected?a:e.isFocused||e.supportsSelection?i:"":"",f?"":u,e.supportsAction||e.supportsSelection?d:""]),p=(x=!!e.supportsSelection,m=e.translations,g=e.isSelected,y=e.accessibleLabel,S=e.role,{"aria-label":l.generateAriaLabel(m,y,{isSelected:x?g:void 0})||void 0,role:S||"img"});var x,m,g,y,S;const b=V(e.h);return t.jsx("div",{class:h,"data-id":`${e.id}`,"data-idx":e.itemIdx,style:{...e.style,transform:`translate(${(e.x||0)-b}px,${(e.y||0)-b}px)`,fontSize:e.fontSize,padding:`${b}px`,lineHeight:e.fontSize+"px"},id:e.activeId,...p,children:e.label})},W=(e,t,n,o)=>{if(o?.current&&t.isCurrent&&e.current&&null!=o?.current.x&&null!=o?.current.w&&null!=o?.current.y&&null!=o?.current.h){const t={x:o.current.x,y:o.current.y,width:o.current.w,height:o.current.h},s=e.current.getBoundingClientRect();return i.calculateOffset(n,s.width,t)}return i.calculateOffset(n,0,void 0)},Y=({touchResponse:e,datatip:t,rootRef:n,focusedItemRef:o,focusedItemInfo:s})=>{const{direction:i}=d.useUser(),r="rtl"===i,[l,c]=u.useState(W(n,s,r,o));u.useLayoutEffect((()=>{c(W(n,s,r,o))}),[s,o,r,n]);const a=s?.isCurrent?"element":"pointer",{datatipContent:h,datatipProps:p}=f.useDatatip({content:t?.content,borderColor:t?.borderColor,anchor:a,placement:"top-start",offset:l,touchResponse:e});return{datatipContent:h,datatipProps:p}},Z=({getItemInfo:e,focusedItemInfo:t,rootRef:n,contextMenuConfig:o,items:s,onContextMenuDismissed:i})=>{const{contextMenuProps:r,contextMenuContent:l}=y.useContextMenu({onContextMenuHandler:({gesture:o,target:i})=>{if("keyboard"===o){const e=t.idx,o=n.current?.querySelector(`[data-idx="${e}"]`)||null;return{type:"element",context:{type:"item",data:s[e]},elem:o}}const r=e(i)?.idx,l=void 0!==r?s[r]:null;let c;return c=l?{type:"item",data:l}:{type:"background"},{type:"pointer",context:c}},contextMenuOptions:{isDisabled:!o},rootRef:n,contextMenuConfig:o,onContextMenuDismissed:i});return{contextMenuContent:l,contextMenuProps:r}};function ee({selectionMode:e="none",layout:n="cloud",width:o,height:s,items:i,onItemAction:r,onItemHover:l,onItemFocus:f,testId:y,contextMenuConfig:S,...b}){const I=g.useTestId(y),C=u.useRef(null),M=u.useRef(null),v=p.useTranslationBundle("@oracle/oraclejet-preact"),w=i.length>0,T=!(!e||"none"===e),R=null!=r,U=R&&null===l&&null===f,z=new Map(i.map((e=>[e.id,e]))),{getItem:D,getDetailFromInfo:E,getPrevItemInfo:k,getNextItemInfo:A}=_(i),{touchResponse:F,touchResponseStyle:L}=N.useVisTouchResponse({type:"auto",supportsTouchDragGestures:!1,rootRef:C}),{focusedItemInfo:V,hoveredItemInfo:j,onContextMenuDismissed:B,activeId:H,eventsProps:$}=a.useVisEvent(F,!U&&w,(()=>!U),K,E,k,A,r,l,f,q,X,{idx:0}),J=function(e,t,n,o,s){const i=n.isCurrent?n:o?.isCurrent&&null!=o.idx?o:void 0;if(!i)return{content:void 0,borderColor:void 0};const r=t(i,e);return s&&r?s({data:r}):{content:r?.accessibleLabel,borderColor:void 0}}(i,D,V,j,b.datatip),{datatipContent:W,datatipProps:{"aria-describedby":ee,...te}}=Y({touchResponse:F,datatip:J,rootRef:C,focusedItemInfo:V,focusedItemRef:M}),ne=function(e,t,n,o,s){return{"aria-label":`${n||""} ${t?"":e.vis_noData()}`,role:"application","aria-describedby":o,"aria-labelledby":s}}(v,w,b.accessibleLabel,P.merge([b["aria-describedby"],ee]),b["aria-labelledby"]),{selectionContent:oe,selectionProps:se}=m.useSelection({idExtracter:e=>{const t="keyup"===e.type?V:X(e.target);return E(t).id},selection:b.selectedIds,selectionMode:e,onChange:b.onSelectionChange,getDataById:e=>z.get(e)}),{direction:ie}=d.useUser(),{textMeasureContent:re,getTextDimensions:le}=x.useTextDimensions(),ce=u.useMemo((()=>le&&w?O(n,i,o,s,"rtl"===ie,le):[]),[n,i,w,o,s,ie,le]),{contextMenuContent:ae,contextMenuProps:ue}=Z({getItemInfo:X,focusedItemInfo:V,rootRef:C,contextMenuConfig:w?S:void 0,items:i,onContextMenuDismissed:B}),de=h.mergeProps($,te,se,ue);return t.jsxs("div",{ref:C,tabIndex:U?void 0:0,style:{width:o,height:s,...L},class:c.baseStyles,...I,...ne,...de,"aria-activedescendant":H,children:[ce.map(((e,n)=>{const o=G(e,n,T,U,j,b.selectedIds,V,b.highlightedIds,H);return V.idx===n&&(M.current=e),t.jsx(Q,{fontSize:e.fontSize,x:e.x,y:e.y,accessibleLabel:e.accessibleLabel,supportsSelection:T,supportsAction:R,translations:v,...o})})),re,W,ae,oe]})}e.TagCloud=function({height:e,width:o,...s}){return t.jsx(n.TrackResizeContainer,{width:o,height:e,class:c.dimensionStyle,children:(e,n)=>t.jsx(ee,{width:e,height:n,...s})})}}));
//# sourceMappingURL=TagCloud-057fa603.js.map
