{"version":3,"file":"useConveyorBeltItem-a4eab566.js","sources":["../../src/UNSAFE_ConveyorBelt/ConveyorBeltContext.ts","../../src/UNSAFE_ConveyorBelt/useConveyorBeltItem.ts"],"sourcesContent":["import { createContext } from 'preact';\n\nexport type ConveyorBeltContextProps = {\n  setCurrentItem?: (node: HTMLElement | null) => void;\n};\n\nexport const ConveyorBeltContext = createContext<ConveyorBeltContextProps>({\n});","import { RefObject } from 'preact';\nimport { useEffect, useRef, useContext, useCallback } from 'preact/hooks';\nimport { ConveyorBeltContext } from './ConveyorBeltContext';\nimport { useId } from '../hooks/UNSAFE_useId';\n\ntype ConveyorBeltItemOptions = {\n  /**\n   * Specifies the current item which should be scrolled into view\n   */\n  isCurrent?: boolean;\n  /**\n   * Conevyor belt item reference, if not provided is created in the hook\n   */\n  itemRef?: RefObject<HTMLDivElement>;\n};\n\n/**\n * It is a convenience hook for interacting with ConveyorBeltContext.\n * Marks ConveyorBelt item and specifies current item to be scrolled into view.\n * The hook returns the necessary props: ref for ConveyorBelt child component\n * and 'data-oj-conveyorbelt-item' data attribute to mark conveyorbelt item.\n * If the item is set as current, then it is scrolled into the view.\n * If the hook detects ConveyorBeltContext then it should apply the methods of the ConveyorBeltContext.\n * @param options ConveyorBeltItemOptions: isCurrent boolean,\n * specifies whether the item is current and should be scrolled into the view and\n * itemRef Conevyor belt item reference which if not provided is created in the hook\n * @returns ref for ConveyorBelt child component\n * and 'data-oj-conveyorbelt-item' data attribute to mark conveyorbelt item.\n */\nexport function useConveyorBeltItem(options: ConveyorBeltItemOptions) {\n  const { isCurrent, itemRef } = options;\n  const context = useContext(ConveyorBeltContext);\n  const ref = useRef<HTMLDivElement>(null);\n  const id = useId();\n  const getResolvedRef =  useCallback(\n    () => {\n     return itemRef ?? ref;\n    },\n    [itemRef]\n  );\n\n  useEffect(() => {\n    if (getResolvedRef().current && context && context.setCurrentItem) {\n      if (isCurrent) {\n        context.setCurrentItem(getResolvedRef().current!);\n      }\n    }\n  }, [context, isCurrent, getResolvedRef]);\n\n  const conveyorBeltItemProps = {\n    ref: ref,\n    ...(context && { 'data-oj-conveyorbelt-item': id })\n  };\n\n  return conveyorBeltItemProps;\n}"],"names":["ConveyorBeltContext","createContext","options","isCurrent","itemRef","context","useContext","ref","useRef","id","useId","getResolvedRef","useCallback","useEffect","current","setCurrentItem"],"mappings":"oGAMaA,EAAsBC,EAAaA,cAA2B,CAC1E,iDCsBK,SAA8BC,GAClC,MAAMC,UAAEA,EAASC,QAAEA,GAAYF,EACzBG,EAAUC,aAAWN,GACrBO,EAAMC,SAAuB,MAC7BC,EAAKC,EAAAA,QACLC,EAAkBC,EAAAA,aACtB,IACQR,GAAWG,GAEnB,CAACH,IAgBH,OAbAS,EAAAA,WAAU,KACJF,IAAiBG,SAAWT,GAAWA,EAAQU,gBAC7CZ,GACFE,EAAQU,eAAeJ,IAAiBG,QAE3C,GACA,CAACT,EAASF,EAAWQ,IAEM,CAC5BJ,IAAKA,KACDF,GAAW,CAAE,4BAA6BI,GAIlD"}