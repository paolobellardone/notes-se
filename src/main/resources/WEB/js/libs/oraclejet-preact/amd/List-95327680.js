define(['exports', 'preact/jsx-runtime', 'preact/hooks', './classNames-49c3ba27', './mergeProps-bae345c4', './keys-3892d3c6', './VirtualizedCollection-d6862c52', 'preact/compat', './TabbableModeContext-c9143afd', './useId-e0c3517c', './FocusTrap-fdb3a0ed', './useInteractionStyle-38f4bebf', './mergeInterpolations-497657fd', './flexitem-8052fa2b', './PRIVATE_List/themes/ListStyles.css', './collectionUtils-c96c7220', './useSelection-4d5145f2', './useCurrentKey-6eea6a7c', './useCollectionFocusRing-a724c671', './useTabbableModeSet-b9d388a2', './useItemAction-6d1f5f44', './Skeleton-064b51d7', './Flex-0052275f', './Selector-dc32dc7f', './ImageVars.css-bf39ec9c', './useTheme-fae6a27c', './useCollectionGestureContext-66a14681', './useTestId-dfceb92d', './Menu-75b3116b', './MenuItem-13f190e0', 'preact', './Floating-aaafdcf7', './TopLayerHost-d9bd8ecf', './logger-36c6eea0', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-9ed12044', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', './useContextMenuGesture-9677fd79', './LoadMoreCollection-03879e52'], (function(e,t,s,i,n,o,l,r,a,c,u,d,f,m,b,g,y,p,h,S,x,v,k,C,T,A,I,V,F,M,w,E,j,R,K,P,L,N,z,D,H,G,_,O,U){"use strict";const B=e=>{switch(e){case"listbox":return{list:"listbox",item:"presentation",cell:"option"};case"treegrid":return{list:"treegrid",item:"row",cell:"gridcell"};default:return{list:"grid",item:"row",cell:"gridcell"}}},q="[data-oj-key]";function Y({children:e,context:n,itemDepth:o,isFocused:l,isFocusRingVisible:r,isActive:g,isGridlineVisible:y,isSelected:p,isTopGridlineVisible:h=!1,isTabbable:S=!1,role:x,selectionMode:v,suggestion:k,currentItemVariant:C}){const T=s.useRef(null),A=s.useMemo((()=>B(x)),[x]),I=n.metadata.key,V=n.index,F="option"===A.cell?{role:A.cell,"aria-posinset":V+1,"aria-setsize":-1}:{role:A.cell},{interactionProps:M,applyActiveStyle:w,applyHoverStyle:E,applyPseudoHoverStyle:j}=d.useInteractionStyle(),R=b.listItemMultiVariantStyles({selectable:$(v,p)?"isSelectable":"notSelectable",selected:p?"isSelected":"notSelected",selectedSingle:p&&"single"===v?"isSelectedSingle":"notSelectedSingle",needsEventsHover:E?"isNeedsEventsHover":"notNeedsEventsHover",pseudoHover:j?"isPseudoHover":"notPseudoHover",active:w||g?"isActive":"notActive",focusHighlight:"highlight"===C&&l?"isFocusHighlight":"notFocusHighlight",focusRingVisible:r&&l?"isFocusRingVisible":"notFocusRingVisible",gridlineTop:h?"visible":"hidden",gridlineBottom:!y&&("end"!==k||y||p&&"single"===v)?"hidden":"visible"}),K=i.classNames([R]),P=f.mergeInterpolations([...Object.values(m.flexitemInterpolations)]),{class:L,...N}=P({flex:"1 1 auto",alignSelf:"center"}),z=i.classNames([L,"multiple"===v&&b.listItemStyles.checkboxContainer]);return t.jsx("div",{"aria-rowindex":V+1,"aria-level":o,"data-oj-key":I,class:K,ref:T,role:A.item,...k&&{"data-oj-suggestion":!0},..."number"==typeof I&&{"data-oj-key-type":"number"},...M,children:t.jsx("div",{id:c.useId(),style:N,class:z,"aria-posinset":V+1,"aria-setsize":-1,onKeyDown:e=>{!S||"ArrowDown"!==e.key&&"ArrowUp"!==e.key||e.stopPropagation()},"aria-colindex":1,"aria-selected":"none"!==v?p:void 0,...F,children:t.jsx(a.TabbableModeContext.Provider,{value:{isTabbable:S},children:t.jsx(u.FocusTrap,{isDisabled:!S,restoreFocusRef:!1,children:e(n)})})})})}const $=(e,t)=>"none"!==e&&("multiple"===e||!t),J=r.memo(Y,((e,t)=>!(!e||!t)&&(e.children===t.children&&e.isFocused===t.isFocused&&e.isFocusRingVisible===t.isFocusRingVisible&&e.isSelected===t.isSelected&&e.isTabbable===t.isTabbable&&e.isActive===t.isActive&&e.suggestion===t.suggestion&&e.isGridlineVisible===t.isGridlineVisible&&e.isTopGridlineVisible===t.isTopGridlineVisible&&g.compareListItemContext(e.context,t.context))));function Q({children:e,minimumCount:n=1}){const[o,l]=s.useState(!1);s.useEffect((()=>{setTimeout((()=>{l(!0)}),50)}),[]);const r=i.classNames([b.skeletonStyles.container]);return o&&e?t.jsx("div",{class:r,role:"presentation",children:[...Array(n)].map(((t,s)=>e(s)))}):null}const W="oj-collection-sparkle";function X({sparkleHeight:e}){const{name:s}=A.useTheme();if(e<=0)return null;const n=e+"px",o=i.classNames([b.sparkleStyles.base]),l=i.classNames([b.sparkleStyles.container,W,"redwood"===s&&T.globalImages]);return t.jsx("div",{class:l,children:t.jsx("div",{class:o,style:{height:n}})},"sparkle")}const Z={mouse:{initialFocus:"menu",placement:"bottom-start",offsetValue:0},keyboard:{initialFocus:"firstItem",placement:"bottom-start",offsetValue:0},touch:{initialFocus:"menu",placement:"end",offsetValue:40}},ee={isOpen:!1,initialFocus:"menu",placement:"bottom-start",offsetValue:0,anchorRef:{current:null}};const te=e=>!(!e.parentElement||!e.parentElement.classList.contains("oj-listview-expander")),se=(e,t,s)=>{if(e&&t&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView({block:"nearest"}),s>0)){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect(),o=i.top+s-n.top;o>0&&(t.scrollTop=t.scrollTop-o)}},ie=(e,t)=>t??{scroller:()=>e.current},ne={all:!1,keys:new Set},oe=(e,t)=>{const s=t.data.map((e=>e.metadata.key)),i=s.indexOf(e.value.start),n=s.indexOf(e.value.end),o=Math.min(i,n),l=Math.max(i,n);return-1===o?{offset:0,count:t.totalSize}:s.slice(o,l+1)},le=t.jsx(Q,{minimumCount:25,children:()=>t.jsx(k.Flex,{height:"12x",align:"center",children:t.jsx(v.Skeleton,{height:"4x"})})}),re=t.jsx("div",{class:U.LOADMORE_STYLE_CLASS,children:t.jsx(Q,{minimumCount:3,children:()=>t.jsx(k.Flex,{height:"12x",align:"center",children:t.jsx(v.Skeleton,{height:"4x"})})})}),ae=(e,t)=>{if(t){const s=Math.min(t.offset,e.offset+e.totalSize),i=s-e.offset;i>0&&(e={offset:s,data:e.data.slice(i,i+t.count),totalSize:e.totalSize,sizePrecision:e.sizePrecision})}return e};e.List=function({"aria-label":e,"aria-labelledby":r,allowTabbableMode:a=!0,children:c,currentKey:u,data:d,gridlines:f,loadingIndicator:m=le,onCurrentKeyChange:v,onLoadRange:k,onSelectionChange:T,onItemAction:A,rangeExtractor:M,role:w="grid",selectedKeys:E=ne,selectionMode:j="none",viewportConfig:R,currentItemVariant:K="none",promotedSection:P,isVirtualized:L=!0,customItemRenderer:N,scrollToVisibleOffset:z,testId:D,contextMenuRenderer:H,...G}){const _=s.useRef(null),$=s.useMemo((()=>B(w)),[w]),Q=s.useRef(),W=s.useRef(),ce=s.useRef(),[ue,de]=s.useState(!1),[fe,me]=s.useState(0),be="none"===j?void 0:"multiple"===j,ge=null===d?void 0:"exact"===d.sizePrecision?d.totalSize:-1,ye=i.classNames([b.listStyles.base]),{currentKeyProps:pe}=p.useCurrentKey((e=>g.keyExtractor(e,q)),"multiple"!==j,g.getPrevNextKey(_.current,u,!0,q),g.getPrevNextKey(_.current,u,!1,q),void 0,void 0,u,v),[he,Se]=h.useCollectionFocusRing(_,["ArrowUp","ArrowDown"]),[xe,ve]=S.useTabbableModeSet(_,(e=>te(e)?null:g.keyExtractor(e,q)),u,v);s.useEffect((()=>{if(null!=u&&_.current){const e=g.findElementByKey(_.current,u,q);if(e){const t=_.current.getAttribute("aria-activedescendant"),s=e.querySelector(`[role=${$.cell}]`);if(s&&t!==s.id){_.current.setAttribute("aria-activedescendant",s.id);const t=R?.scroller(),i=z?z(_.current):0;se(e,null!=t?t:_.current,i)}}}}),[u,d,$.cell,R,z]);const ke=s.useCallback((e=>{T&&(!1===e.value.all&&e.value.keys.size>0&&(Q.current=Array.from(e.value.keys.values()).pop()),T(e))}),[Q,T]),Ce=s.useCallback((e=>{if(d&&T){const t=oe(e,d);Array.isArray(t)?(Q.current=Array.from(t).pop(),T({value:{all:!1,keys:new Set(t)},target:null})):(W.current={detail:e,range:{offset:d.offset,count:d.data.length}},k(t))}}),[d,T,k]),Te=s.useCallback((()=>{if(_.current&&v&&(!a||xe(void 0))){const e=ce.current||g.getFirstVisibleKey(_.current,q);o.isKeyDefined(e)&&v({value:e})}}),[a,v,xe]),Ae=s.useCallback((e=>{const t=g.keyExtractor(e.target,q);o.isKeyDefined(t)&&"checkbox"===e.relatedTarget?.getAttribute("type")&&(_.current?.focus(),v&&o.isKeyDefined(t)&&v({value:t}))}),[v]),Ie=s.useCallback((e=>{if(te(e.target)){_.current?.focus();const t=g.keyExtractor(e.target,q);v&&o.isKeyDefined(t)&&v({value:t})}else!o.isKeyDefined(u)&&v&&Te(),!a&&Ae(e)}),[a,u,Te,Ae,v]),Ve=I.useCollectionGestureContext(),{selectionProps:Fe}=y.useSelection((e=>e===_.current?void 0===u?null:u:g.keyExtractor(e,q)),E,j,!1,"replace","embedded"===Ve,ke,Q.current,u,((e,t)=>g.getPrevNextKey(_.current,e,t,q)),void 0,(e=>{if(_.current){const t=g.findElementByKey(_.current,e,q);if(t){const e=R?.scroller(),s=z?z(_.current):0;se(t,null!=e?e:_.current,s)}}}),Ce);if(d&&void 0!==W.current&&T){const e=oe(W.current.detail,d);Array.isArray(e)&&T({value:{all:!1,keys:new Set(e)},target:null});const t=W.current?W.current.range:{offset:d.offset,count:d.data.length};d=ae(d,t),W.current=void 0,k(t)}const Me=s.useMemo((()=>d&&P&&((e,t)=>0===t?null:e.slice(0,t).reduce(((e,s,i)=>{const n=s.metadata.key;return i===t-1?e.set(n,"end"):e.set(n,!0),e}),new Map))(d.data,P.count)),[d,P]),we=t.jsx(X,{sparkleHeight:fe}),Ee=x.useItemAction(u,d,A,q,"embedded"===Ve);s.useEffect((()=>{if(Me){const e=_.current?.querySelector("."+l.PLACEHOLDER_STYLE_CLASS);let t=e?.offsetHeight||0;const s=_.current?.querySelectorAll("[data-oj-suggestion]");s?.forEach((e=>t+=e.offsetHeight)),me(t)}}),[Me]);const je=s.useCallback((e=>{const s="multiple"===j?()=>t.jsx(C.Selector,{onChange:ke,rowKey:e.data.metadata.key,selectedKeys:E}):void 0;return{index:e.index,data:e.data.data,metadata:e.data.metadata,selector:s}}),[j,E,ke]),Re=L?Y:J,Ke=e=>{const s=je(e),i=Me?.get(s.metadata.key),n=a&&xe(s.metadata.key),l=u===s.metadata.key&&!n,r=l&&ue,m=o.containsKey(E,s.metadata.key),b=l&&he,g=(e,n)=>{return t.jsx(Re,{context:e,isFocused:l,isFocusRingVisible:b,isActive:r,isGridlineVisible:(o=s.index,"visible"===f?.item&&(o+1!==d?.totalSize||"visible"===f?.bottom)),isSelected:m,isTabbable:a&&xe(s.metadata.key),role:w,selectionMode:j,currentItemVariant:K,...i&&{suggestion:i},...0===s.index&&{isTopGridlineVisible:"visible"===f?.item&&"visible"===f?.top},...n,children:c},s.metadata.key);var o};if(N){return N({listItemContext:s,isFocused:l,isFocusRingVisible:b,isSelected:m,isTabbable:n,isActive:r,defaultListItem:g})}return g(s)};R=ie(_,R);const Pe=s.useCallback((e=>{const t=g.keyExtractor(e.target,q);o.isKeyDefined(t)&&(ce.current=t)}),[]),Le=s.useCallback((e=>{" "===e.key&&o.isKeyDefined(u)&&"none"!==j&&de(!0)}),[u,j,de]),Ne=s.useCallback((()=>{de(!1)}),[de]),[ze,De]=s.useState({key:""}),[He,Ge]=s.useState(ee),{triggerProps:_e}=O.useContextMenuGesture((({gesture:e,anchor:t,target:s})=>{let i=t;if("keyboard"===e){const e=g.findElementByKey(_.current,u,q);i=e||t,De({key:u})}else{const e=g.keyExtractor(s,q);De({key:e}),v?.({value:e})}Ge({...Z[e],anchorRef:{current:i},isOpen:!0})}),{isDisabled:!H}),Oe=s.useCallback((e=>{"dismissed"!==e.reason&&"itemAction"!==e.reason||_.current?.focus(),Ge({...ee})}),[]),Ue=V.useTestId(D);return t.jsxs(t.Fragment,{children:[t.jsx("div",{...n.mergeProps(a?ve:{},pe,Se,Fe,Ee,_e,{onFocus:Ie,onPointerDown:Pe,onKeyDown:Le,onKeyUp:Ne},G),...Ue,role:w,"aria-rowcount":ge,"aria-colcount":1,ref:_,class:ye,tabIndex:0,"aria-label":e,"aria-labelledby":r,"aria-multiselectable":be,children:null==d?m:L?t.jsx(l.VirtualizedCollection,{data:d,itemSelector:q,loadMoreIndicator:re,onLoadRange:k,rangeExtractor:M,suggestions:we,viewportConfig:R,children:Ke}):t.jsx(U.LoadMoreCollection,{data:d.data,loadMoreIndicator:re,hasMore:"atLeast"===d.sizePrecision&&d.data.length<=d.totalSize,onLoadMore:()=>{d&&k({offset:0,count:d.data.length+25})},suggestions:we,viewportConfig:R,children:Ke})}),H&&t.jsx(F.Menu,{...He,onClose:Oe,children:H(ze)})]})},e.SkeletonContainer=Q}));
//# sourceMappingURL=List-95327680.js.map
