define(['exports', 'preact/jsx-runtime', 'preact/hooks', './useViewportIntersect-9bfb2df9', './Collection-d617a715'], (function(e,t,o,n,r){"use strict";const i="oj-collection-placeholder",c=({context:e,placeholderHeight:o})=>{const{fromIndex:n,toIndex:r,which:c,estimateItemSize:l}=e;let s=0;if(o)s=o(e);else{const e=0===l?48:l;s=Math.max(0,r-n)*e}const a="topPlaceholder"===c?"_topPlaceholder":"_bottomPlaceholder",d={height:s+"px"};return 0===s&&(d.display="none"),t.jsx("div",{className:i,style:d},a)};function l(e){return function({itemSize:t,viewportHeight:o,scrollOffset:n,overscan:r=0}){if(void 0===t||0===t||void 0===o||void 0===n)return{offset:0,count:e};const i=Math.ceil(n/t),c=Math.ceil(o/t);return{offset:Math.max(0,i-r),count:c+r*(i>0?2:1)}}}const s=(e,t,o,n,r)=>{let i,c;if(e&&t){const o=t.getBoundingClientRect(),n=(e=>{let t,o;if(e===document.documentElement)t=0,o=document.documentElement.clientHeight;else{const n=e.getBoundingClientRect();t=n.top,o=n.bottom}return{top:t,bottom:o}})(e);o&&n&&(i=n.top-o.top-1,c=n.bottom-n.top+1)}if(void 0!==i&&void 0!==c){return n({scrollOffset:i,viewportHeight:c,overscan:o,itemSize:r})}return null},a=`.oj-collection-loadmore, .${i}`,d=l(25);e.PLACEHOLDER_STYLE_CLASS=i,e.VirtualizedCollection=function({data:e,children:i,viewportConfig:l,itemSelector:u,placeholderHeight:f,rangeExtractor:h=d,overscan:m=1,onLoadRange:g,loadMoreIndicator:x,suggestions:p}){const v=o.useRef(null),I=o.useRef(0);if(n.useViewportIntersect(l,1,0,a,(()=>{const e=s(l.scroller(),v.current,m,h,I.current??0);e&&g(e)})),o.useEffect((()=>{if(0===I.current){let e=0;const t=v.current.querySelectorAll(u);t.length>0&&(t.forEach((t=>{e+=t.offsetHeight})),I.current=e/t.length)}})),!(e&&(S=e,S&&S.data&&S.offset>=0&&S.totalSize>=0)))return t.jsx("div",{ref:v});var S;const z=e.data,j=e.offset,w=j+z.length,E=e.totalSize,H=j>=0?{fromIndex:0,toIndex:j,which:"topPlaceholder",estimateItemSize:I.current??0}:void 0,C=w&&w<=E?{fromIndex:w,toIndex:E,which:"bottomPlaceholder",estimateItemSize:I.current??0}:void 0,b=x&&"atLeast"===e.sizePrecision&&w<=E;return t.jsxs("div",{ref:v,style:"will-change: contents",children:[p,H&&t.jsx(c,{context:H,placeholderHeight:f}),t.jsx(r.Collection,{items:z,children:(P=j,e=>{const t={index:P+e.index,data:e.data};return i(t)})}),C&&t.jsx(c,{context:C,placeholderHeight:f}),b&&x]});var P},e.getVirtualizedRangeExtractor=l}));
//# sourceMappingURL=VirtualizedCollection-d6862c52.js.map
