define("oj-c/hooks/UNSAFE_useVisBusyState/useVisBusyState",["require","exports","preact/hooks","ojs/ojcontext"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVisBusyState=void 0,e.useVisBusyState=function(e,o){return(0,t.useCallback)((()=>{if(e.current){return a.getContext(e.current).getBusyContext().addBusyState({description:o})}return()=>{}}),[o,e])}})),define("oj-c/tag-cloud-item/tag-cloud-item",["require","exports","@oracle/oraclejet-preact/translationBundle","ojs/ojvcomponent"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloudItem=e.TagCloudItemDefaults=void 0,e.TagCloudItemDefaults={categories:[]},e.TagCloudItem=(0,a.registerCustomElement)("oj-c-tag-cloud-item",(({categories:t=e.TagCloudItemDefaults.categories,...a})=>null),"TagCloudItem",{properties:{categories:{type:"Array<string>"},color:{type:"string"},label:{type:"string"},value:{type:"number|null"},url:{type:"string"},shortDesc:{type:"string"}}},{categories:[]},{"@oracle/oraclejet-preact":t.default})})),define("oj-c/tag-cloud/utils",["require","exports","../tag-cloud-item/tag-cloud-item"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.executeLink=e.transformItem=void 0,e.transformItem=function(e){const a={...t.TagCloudItemDefaults,...e};return{color:a.color,accessibleLabel:a.shortDesc,value:a.value,label:a.label,id:null!=a.key?a?.key:a.id,role:a.url?"link":void 0}},e.executeLink=function(e){const t=window.open(e,"_blank");t&&t.focus()}})),define("oj-c/hooks/UNSAFE_useVizCategories/useVizCategories",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useCategories"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVizCategories=void 0,e.useVizCategories=function(e,a,o,r,i="any",s="all",n,d){const{ids:l,updateCategories:u}=(0,t.useCategories)(e,a,o,i,!1,n),{ids:c,updateCategories:h}=(0,t.useCategories)(e,a,r,s,!0,d);return{hiddenIds:l,updateHidden:u,highlightedIds:c,updateHighlighted:h}}})),define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function t(e,t,a,o){const r=[...o];return e.forEach(((e,o)=>{const i={data:t[o],key:a[o]?.key,metadata:a[o]};e>=0?r.splice(e,0,i):r.push(i)})),r}async function a(e,t){const a=[],o=(await e.fetchByKeys({keys:t})).results;for(const e of t)if(o.has(e)){const t=o.get(e);a.push({...t,key:e})}return a}function o(e,t){return e.has(t)?e.get(t):-1}function r(e,t){const a=[...t];return e.sort(((e,t)=>t-e)),e.forEach((e=>{e<a.length&&a.splice(e,1)})),a}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=void 0,e.getUpdatedItemsFromMutationDetail=async function(e,i,s){const{add:n,remove:d,update:l}=e??{},u=new Map;for(const[e,t]of i.entries())u.set(t.key,e);let c=[...i];return d&&(c=function(e,t,a){const{indexes:i,keys:s}=e;let n=[...t];i?.length?n=r(i,n):s?.size&&(n=function(e,t,a){const i=[];return e.forEach((e=>{const t=o(a,e);-1!==t&&i.push(t)})),r(i,t)}(s,n,a));return n}(d,c,u)),n&&(c=await async function(e,r,i,s){const{addBeforeKeys:n,data:d,indexes:l,keys:u,metadata:c}=e;let h=[...r],p=d||[],g=c||[];if(0===p.length&&u?.size){const e=await a(s,u)??[];p=e.map((e=>e.data)),g=e.map((e=>e.metadata))}0===g.length&&u?.size&&(g=[...u].map((e=>({key:e}))));p.length&&(h=l?.length?t(l,p,g,h):n?.length?function(e,a,r,i){const s=[],n=[];return e.forEach((e=>{s.push(o(i,e)),n.push({key:e})})),t(s,a,n,r)}(n,p,h,i):function(e,a,o){return t(new Array(e.length).fill(-1),e,a,o)}(p,g,h));return h}(n,c,u,s)),l&&(c=await async function(e,t,r,i){const{data:s,indexes:n,keys:d,metadata:l}=e;let u=[...t],c=s||[],h=l||[];if(0===c.length&&d?.size){const e=await a(i,d)??[];c=e.map((e=>e.data)),h=e.map((e=>e.metadata))}0===h.length&&d?.size&&(h=[...d].map((e=>({key:e}))));c.length&&(n?.length?u=function(e,t,a,o){const r=[...o];return e.forEach(((e,o)=>{if(r[e]){const i={data:t[o],key:a[o]?.key,metadata:a[o]};r.splice(e,1,i)}})),r}(n,c,h,u):d?.size&&(u=function(e,t,a,r,i){const s=[...r];return e.forEach((e=>{const r=o(i,e),n={data:t[r],key:a[r]?.key,metadata:a[r]};r>=0&&s.splice(r,1,n)})),s}(d,c,h,u,r)));return u}(l,c,u,s)),c}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,a,o){this.handleMutateEvent=async e=>{const{detail:a}=e,o=this.addBusyState("updating data from mutation event"),r=await(0,t.getUpdatedItemsFromMutationDetail)(a,this.currentData,this.dataProvider);o?.(),this.currentData=r,this.callback?.onDataUpdated?.(r)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=a,this.callback=o,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],t=this.dataProvider.fetchFirst({size:-1});for await(const a of t){const t=a.data.map(((e,t)=>({data:e,key:a.metadata[t].key,metadata:a.metadata[t]})));e.push(...t)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),t=await this._fetchData();this.callback?.onDataUpdated?.(t),e()}}})),define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=void 0,e.useDataProvider=function({addBusyState:e,data:o}){const[r,i]=(0,t.useState)([]),s=(0,t.useRef)();return(0,t.useEffect)((()=>(void 0!==o&&(s.current=new a.DataProviderHandler(o,e,{onDataUpdated:i})),()=>{s.current?.destroy(),s.current=void 0})),[o,e]),{data:r}}})),define("oj-c/utils/UNSAFE_vizUtils/TemplateHandler",["require","exports","preact/compat"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processTemplate=e.processNodeTemplate=void 0;const a=e=>Object.keys(e).reduce(((t,a)=>{if("children"===a)return t;const{prop:o,value:r}=((e,t)=>"__oj_private_do_not_use_value"===e?{prop:"value",value:"symbol"!=typeof t?t:void 0}:"__oj_private_do_not_use_checked"===e?{prop:"checked",value:"symbol"!=typeof t?t:void 0}:{prop:e,value:t})(a,e[a]);return t[(e=>e[0].toLowerCase()!==e[0]?e.toLowerCase().replace(/-./g,(e=>e[1].toUpperCase())):e)(o)]=r,t}),{});e.processNodeTemplate=(e,o,r,i)=>{const s=o(r),n=t.Children.toArray(s).find((e=>{if(e&&e.props)return(e.props?.children?.type||e.type)===i})),d=n?.type===i?n.props:(n?.props?.children).props,l=e.key||e.metadata?.key;return d?{...a(d),key:l,id:l,_itemData:e.data}:{key:l,id:l,_itemData:e.data}};e.processTemplate=(t,a,o,r)=>t.map(((t,i)=>(0,e.processNodeTemplate)(t,a,o(t,i),r)))})),define("oj-c/tag-cloud/tag-cloud",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","preact/hooks","preact/compat","@oracle/oraclejet-preact/UNSAFE_TagCloud","../hooks/UNSAFE_useVisBusyState/useVisBusyState","./utils","@oracle/oraclejet-preact/UNSAFE_VisStatusMessage","../hooks/UNSAFE_useVizCategories/useVizCategories","ojs/ojvcomponent","./utils","../hooks/UNSAFE_useDataProvider/useDataProvider","../utils/UNSAFE_vizUtils/TemplateHandler","css!oj-c/tag-cloud/tag-cloud-styles.css"],(function(require,e,t,a,o,r,i,s,n,d,l,u,c,h,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloud=void 0,e.TagCloud=(0,u.registerCustomElement)("oj-c-tag-cloud",(function({hiddenCategories:e=[],data:a=null,highlightedCategories:g=[],hoverBehavior:y="none",layout:f="rectangular",selection:m=[],selectionMode:v="none",highlightMatch:_="all",...b}){const k=(0,o.useRef)(null),C=(0,s.useVisBusyState)(k,"oj-c-tag-cloud"),{data:j}=(0,h.useDataProvider)({data:a||void 0,addBusyState:C}),D="dim"===y,P=(0,o.useCallback)(((e,t)=>({data:e.data,key:e.key,index:t})),[]),E=(0,r.useMemo)((()=>b.itemTemplate?(0,p.processTemplate)(j,b.itemTemplate,P,"oj-c-tag-cloud-item"):j.map((e=>e.data))),[b.itemTemplate,j,P]),[S,M]=(0,r.useMemo)((()=>{const e=new Map,t=E.map((t=>(null==t.id&&null==t.key||e.set(t.id||t.key,t),(0,c.transformItem)(t))));return[e,t]}),[E]),[T,A]=(0,r.useMemo)((()=>{let e=!1;const t=E.map(((t,a)=>(e=e||null!=t.url,{id:M[a].id,categories:t.categories||[]})));return[e,t]}),[M,E]),{hiddenIds:B,highlightedIds:x,updateHighlighted:I}=(0,l.useVizCategories)(A,(e=>e.categories),e,g,"any",_,b.onHiddenCategoriesChanged,b.onHighlightedCategoriesChanged),U=e=>{D&&I(e.id)},V=null!=b.datatip?e=>({content:b.datatip?.({id:e.data.id}),borderColor:void 0}):void 0;return(0,t.jsx)(u.Root,{ref:k,children:a&&0!==E.length?(0,t.jsx)(i.TagCloud,{layout:f,datatip:V,highlightedIds:D?x:void 0,accessibleLabel:b["aria-label"],"aria-describedBy":b["aria-describedby"],"aria-labelledBy":b["aria-labelledby"],items:M.filter((e=>!B?.includes(e.id))),selectionMode:v,onSelectionChange:e=>{b.onSelectionChanged?.(e.ids)},onItemAction:T?e=>{const t=S.get(e.id);t?.url&&(0,n.executeLink)(t.url)}:void 0,onItemFocus:U,onItemHover:U,selectedIds:"none"===v?void 0:m,width:"100%",height:"100%"}):(0,t.jsx)(d.VisNoData,{"aria-label":b["aria-label"],"aria-describedby":b["aria-describedby"],"aria-labelledby":b["aria-labelledby"]})})}),"TagCloud",{properties:{data:{type:"DataProvider|null"},datatip:{type:"function"},hiddenCategories:{type:"Array<string>",writeback:!0},touchResponse:{type:"string",enumValues:["auto","touchStart"]},highlightMatch:{type:"string",enumValues:["all","any"]},highlightedCategories:{type:"Array<string>",writeback:!0},hoverBehavior:{type:"string",enumValues:["none","dim"]},layout:{type:"string",enumValues:["cloud","rectangular"]},selectionMode:{type:"string",enumValues:["none","multiple","single"]},selection:{type:"Array<any>",writeback:!0}},slots:{itemTemplate:{data:{}}},extension:{_WRITEBACK_PROPS:["hiddenCategories","highlightedCategories","selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","aria-describedby","aria-labelledby"]}},{hiddenCategories:[],data:null,highlightedCategories:[],hoverBehavior:"none",layout:"rectangular",selection:[],selectionMode:"none",highlightMatch:"all"},{"@oracle/oraclejet-preact":a.default})})),define("oj-c/tag-cloud",["require","exports","oj-c/tag-cloud/tag-cloud"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloud=void 0,Object.defineProperty(e,"TagCloud",{enumerable:!0,get:function(){return t.TagCloud}})}));
//# sourceMappingURL=tag-cloud.js.map