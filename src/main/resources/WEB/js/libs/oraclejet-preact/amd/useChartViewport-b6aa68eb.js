define(['exports', './eventsUtils-edf8f4e5', './accUtils-93ee6f16', 'preact/hooks', './usePinch-fc8ed928', './mergeProps-bcfa6a92'], (function(t,e,n,i,o,x){"use strict";function r(t,e,n,i,o,x,r,M,s,c,p,f){const{viewportMin:w,viewportMax:v}=t,{min:y,max:l}=e,{viewportMin:u,viewportMax:h}=n,{min:d,max:g}=i,m=function(t,e,n,i,o,x){const r={};x?(r.xMin=n,r.xMax=i,r.yMin=o?e:t,r.yMax=o?t:e):(r.xMin=o?e:t,r.xMax=o?t:e,r.yMin=i,r.yMax=n);return r}(r,M,s,c,p,f);return{xExtents:a(w,v,y,l,o,m.xMin,m.xMax),yExtents:a(u,h,d,g,x,m.yMin,m.yMax)}}function a(t,e,n,i,o,x,r){const a=o.invert(x)-o.invert(0),M=o.invert(r)-o.invert(0);let s=1;return x!=r&&e+M-(t+a)<1&&(s=(e-t-1)/(a-M)),(e+=M*s)-(t+=a*s)>=i-n?(t=n,e=i):t<n?(e+=n-t,t=n):e>i&&(t-=e-i,e=i),{viewportMin:t,viewportMax:e}}function M(t,e,n,i,o,x,r){const a=r?n.width-t:t-n.x,M=e-n.y,s=i.viewportMax-i.viewportMin,c=(x?M:a)*((o.max-o.min)/(x?n.height:n.width));let p=c-s/2,f=c+s/2;return p<o.min&&(p=o.min,f=p+s),f>o.max&&(p=o.max-s,f=o.max),{xMin:p,xMax:f}}t.useChartViewport=function({plotAreaSpace:t,xViewportExtent:n,xAxisExtent:a,yAxisExtent:s,yViewportExtent:c,yScale:p,xScale:f,onViewportChange:w,isHoriz:v,zoomAndScroll:y,isRtl:l,rootRef:u}){const h=i.useRef(!1),d=(e,i)=>{const o=e*(i.x-t.x),x=-e*(t.x+t.width-i.x),M=e*(i.y-t.y),y=-e*(t.y+t.height-i.y),u=r(n,a,c,s,f,p,o,x,M,y,l,v);w?.({xMin:u.xExtents.viewportMin,yMin:u.yExtents.viewportMin,xMax:u.xExtents.viewportMax,yMax:u.yExtents.viewportMax})},g=o.usePinch({captureTargetRef:u,onPinchZoomChange:({delta:t,origin:e})=>{d(-1*(v?1:-1)*t*.05,e)}});return g.onPointerOut=void 0,w&&"live"===y?x.mergeProps({onWheel:t=>{const e=(v?1:-1)*t.deltaY*.05;d(e,{x:t.offsetX,y:t.offsetY}),t.preventDefault()},onKeyDown:e=>{const i=e.key,o="+"===i||"="===i,x="-"===i||"_"===i,M="PageUp"===i;if(!(o||x||M||"PageDown"===i))return;const y=(1/(o?1.5:1/1.5)-1)/2;let u,h=0,d=0,g=0,m=0;o||x?(h=-1*y*t.width,d=y*t.width,g=-1*y*t.height,m=y*t.height):(u=function(t,e,n,i,o){const x=i?(e?-1:1)*n:0;return{deltaX:(i?0:(e?-1:1)*n)*t.width*(o?-1:1),deltaY:x*t.height}}(t,M,.25,v,l),u&&(h=u.deltaX,d=u.deltaX,g=u.deltaY,m=u.deltaY));const E=r(n,a,c,s,f,p,h,d,g,m,l,v);w?.({xMin:E.xExtents.viewportMin,yMin:E.yExtents.viewportMin,xMax:E.xExtents.viewportMax,yMax:E.yExtents.viewportMax})},onPointerMove:i=>{if(!h.current)return;const o=e.getElementData(u,i.target);if(o&&"scrollBar"===o.ojObject){const{xMin:e,xMax:o}=M(i.offsetX,i.offsetY,t,n,a,v,l);w?.({xMin:e,yMin:c.viewportMin,xMax:o,yMax:c.viewportMax})}},onPointerDown:i=>{h.current=!0;const o=e.getElementData(u,i.target);if(o&&"scrollBar"===o.ojPrivateObject){i.target.setPointerCapture(i.pointerId);const{xMin:e,xMax:o}=M(i.offsetX,i.offsetY,t,n,a,v,l);w?.({xMin:e,yMin:c.viewportMin,xMax:o,yMax:c.viewportMax})}},onPointerUp:()=>{h.current=!1}},g):{}}}));
//# sourceMappingURL=useChartViewport-b6aa68eb.js.map
