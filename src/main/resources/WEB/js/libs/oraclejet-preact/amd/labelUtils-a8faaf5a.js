define(['exports', './textUtils-ae0a246c', './accUtils-93ee6f16', 'preact/jsx-runtime', './utils-84eb8f5e'], (function(t,i,e,s,n){"use strict";const h={titleGap:6,labelGap:6};function d(t,e,s,n,h,d,l){let o,a,x=l||0;const m=[e(t[0],0,n,h,d)],r=s?i.isWidthOverlap:i.isHeightOverlap;let c=0,f=x+1;for(;f<t.length;){const i=m[c]||e(t[c],c,n,h,d);o=i.dims,m[c]||(m[c]=i);const s=m[f]||e(t[f],f,n,h,d);a=s.dims,m[f]||(m[f]=s),r(o,a)?(x+=1,c=0,f=x+1):(c=f,f=c+x+1)}return{numOfSkips:x,labelsInfo:m}}t.AXIS_DEFAULTS=h,t.getDataAxisLabelsInfo=function(t,i,e){const{numOfSkips:s,labelsInfo:n}=d(t,i,e,!1,!1,!1,0),h=[];let l=0,o=0,a=!1;for(let i=0;i<t.length;i+=s+1)l=Math.max(l,n[i].dims.width),o=Math.max(o,n[i].dims.height),a=a||n[i].isTruncated,h.push({text:n[i].text,lines:n[i].lines,index:i,dims:n[i].dims,lineProps:n[i].lineProps});return{maxWidth:l,maxHeight:o,numOfSkips:s,isLabelTruncated:a,tickLabels:h}},t.getEnclosingRectDims=function(t,i){let e,s;return"left"===i?(e=t.x-t.width,s=t.y-t.height/2):"right"===i?(e=t.x,s=t.y-t.height/2):(e=t.x-t.width/2,s=t.y-t.height/2),{x:e,y:s,width:t.width,height:t.height}},t.getGroupAxisLabelsInfo=function(t,i,e,s,n,h){let l=!1,{numOfSkips:o,labelsInfo:a}=d(t,i,e,!1,!1,!1,h);if(o>0&&n&&e){const s=d(t,i,e,!1,!1,!0,h);!s.labelsInfo.some((t=>t.isTruncated||t.didNotFit))&&s.numOfSkips<o&&(o=s.numOfSkips,a=s.labelsInfo)}if(o>0&&s){const s=d(t,i,e,!0,!0,!1,h);s.numOfSkips<o&&(o=s.numOfSkips,a=s.labelsInfo,l=!0)}const x=[];let m=0,r=0;for(let i=0;i<t.length;i+=o+1)m=Math.max(m,a[i].dims.width),r=Math.max(r,a[i].dims.height),x[i]={text:a[i].text,lines:a[i].lines,index:i,dims:a[i].dims,lineProps:a[i].lineProps,isRotated:l,isTruncated:a[i].isTruncated};return{maxWidth:m,maxHeight:r,isRotated:l,numOfSkips:o,tickLabels:x}},t.getTickLabelInfo=function(t,i,e,s,d,l,o,a,x,m,r){if(!r||!i)return{text:"",dims:{width:0,height:0,x:0,y:0},isTruncated:!1,lines:[],didNotFit:!1,lineProps:[]};const c=h.labelGap,f=d?x:l?a-c:a;let g,u,p,b=!1,w=[],y=[],k=!1;const O=l?x:1/0;if(o||l){const t=n.getTextInfo(i,e,f,O,l,r);g=t.width,u=t.height,w=t.lines,y=t.dims,b=t.isTruncated,p=t.lineHeight,k=t.didNotFit}else y=[r(i,e)],g=y[0].width,u=y[0].height,w=[i],b=!1,p=u;const I=d?u:g,S=d?g:u,T=s?I+c:I,L=s?S:S+c;return{text:i,lines:w,lineProps:y.map(((i,e)=>({x:s?t-i.width/2:m.x,width:d?i.height:i.width,height:d?i.width:i.height,y:s?m.y+p*e:t+i.height/2}))),isTruncated:b,didNotFit:k,dims:{x:s?t-T/2:m.x,width:T,height:L,y:s?m.y:t+L/2}}},t.skipLabelsGreedy=function(t,e,s,n){const h=s?i.isWidthOverlap:i.isHeightOverlap;let d=e(t[0],0,!1,!1,!!n);const l=[{text:d.text,lines:[d.text],index:0,lineProps:[d.dims],dims:d.dims}];let o=d.dims.width,a=d.dims.height;for(let i=1;i<t.length;i++){if(!t[i])continue;const s=e(t[i],i,!1,!1,!!n);h(d.dims,s.dims)||(d=s,l.push({text:s.text,lines:[s.text],index:i,dims:s.dims,lineProps:[s.dims]}),o=Math.max(o,s.dims.width),a=Math.max(a,s.dims.height))}return{tickLabels:l,maxWidth:o,maxHeight:a}},t.updateLabelsDims=function(t,i,e,s,n,h){e.forEach((e=>{e.lines.forEach(((d,l)=>{const o=e.lineProps[l];let a,x;"left"===h?(a=n.x+t,x=s(e.index)):"right"===h?(a=n.x+n.width-t,x=s(e.index)):"top"===h?(a=s(e.index),x=n.y+i-o.height/2):(a=s(e.index),x=n.y+n.height-i+o.height/2+o.height*l),o.x=a,o.y=x}));const d=e.dims;let l,o;"left"===h?(l=n.x+t,o=s(e.index)):"right"===h?(l=n.x+n.width-t,o=s(e.index)):"top"===h?(l=s(e.index),o=n.y+i-d.height/2):(l=s(e.index),o=n.y+n.height-i+d.height/2),d.x=l,d.y=o}))}}));
//# sourceMappingURL=labelUtils-a8faaf5a.js.map
