define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function a(e,a,t,r){const o=[...r];return e.forEach(((e,r)=>{const n={data:a[r],key:t[r]?.key,metadata:t[r]};e>=0?o.splice(e,0,n):o.push(n)})),o}async function t(e,a){const t=[],r=(await e.fetchByKeys({keys:a})).results;for(const e of a)if(r.has(e)){const a=r.get(e);t.push({...a,key:e})}return t}function r(e,a){return e.has(a)?e.get(a):-1}function o(e,a){const t=[...a];return e.sort(((e,a)=>a-e)),e.forEach((e=>{e<t.length&&t.splice(e,1)})),t}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=void 0,e.getUpdatedItemsFromMutationDetail=async function(e,n,s){const{add:i,remove:d,update:c}=e??{},l=new Map;for(const[e,a]of n.entries())l.set(a.key,e);let u=[...n];return d&&(u=function(e,a,t){const{indexes:n,keys:s}=e;let i=[...a];n?.length?i=o(n,i):s?.size&&(i=function(e,a,t){const n=[];return e.forEach((e=>{const a=r(t,e);-1!==a&&n.push(a)})),o(n,a)}(s,i,t));return i}(d,u,l)),i&&(u=await async function(e,o,n,s){const{addBeforeKeys:i,data:d,indexes:c,keys:l,metadata:u}=e;let b=[...o],y=d||[],f=u||[];if(0===y.length&&l?.size){const e=await t(s,l)??[];y=e.map((e=>e.data)),f=e.map((e=>e.metadata))}0===f.length&&l?.size&&(f=[...l].map((e=>({key:e}))));y.length&&(b=c?.length?a(c,y,f,b):i?.length?function(e,t,o,n){const s=[],i=[];return e.forEach((e=>{s.push(r(n,e)),i.push({key:e})})),a(s,t,i,o)}(i,y,b,n):function(e,t,r){return a(new Array(e.length).fill(-1),e,t,r)}(y,f,b));return b}(i,u,l,s)),c&&(u=await async function(e,a,o,n){const{data:s,indexes:i,keys:d,metadata:c}=e;let l=[...a],u=s||[],b=c||[];if(0===u.length&&d?.size){const e=await t(n,d)??[];u=e.map((e=>e.data)),b=e.map((e=>e.metadata))}0===b.length&&d?.size&&(b=[...d].map((e=>({key:e}))));u.length&&(i?.length?l=function(e,a,t,r){const o=[...r];return e.forEach(((e,r)=>{if(o[e]){const n={data:a[r],key:t[r]?.key,metadata:t[r]};o.splice(e,1,n)}})),o}(i,u,b,l):d?.size&&(l=function(e,a,t,o,n){const s=[...o];return e.forEach((e=>{const o=r(n,e),i={data:a[o],key:t[o]?.key,metadata:t[o]};o>=0&&s.splice(o,1,i)})),s}(d,u,b,l,o)));return l}(c,u,l,s)),u}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,t,r){this.handleMutateEvent=async e=>{const{detail:t}=e,r=this.addBusyState("updating data from mutation event"),o=await(0,a.getUpdatedItemsFromMutationDetail)(t,this.currentData,this.dataProvider);r?.(),this.currentData=o,this.callback?.onDataUpdated?.(o)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=t,this.callback=r,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],a=this.dataProvider.fetchFirst({size:-1});for await(const t of a){const a=t.data.map(((e,a)=>({data:e,key:t.metadata[a].key,metadata:t.metadata[a]})));e.push(...a)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),a=await this._fetchData();this.callback?.onDataUpdated?.(a),e()}}})),define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,a,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=void 0,e.useDataProvider=function({addBusyState:e,data:r}){const[o,n]=(0,a.useState)([]),s=(0,a.useRef)();return(0,a.useEffect)((()=>(void 0!==r&&(s.current=new t.DataProviderHandler(r,e,{onDataUpdated:n})),()=>{s.current?.destroy(),s.current=void 0})),[r,e]),{data:o}}})),define("oj-c/tab-bar/DataTabBarIcon",["require","exports","preact/jsx-runtime"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTabBarIcon=void 0,e.DataTabBarIcon=function(e){const{icon:t}=e;return t&&"class"===t.type?(0,a.jsx)("span",{class:t.class}):null}})),define("oj-c/tab-bar/ContentRenderer",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/UNSAFE_TabBar","@oracle/oraclejet-preact/UNSAFE_OverflowTabBar","./DataTabBarIcon","@oracle/oraclejet-preact/UNSAFE_ReorderableTabBar"],(function(require,e,a,t,r,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverflowTabBarRenderer=e.TabBarRenderer=void 0;const s=(e,a)=>{if(null!=e){let t="";return t="stacked"===a||"icons"===a?e>99?"99+":e.toString():e>999?"999+":e.toString(),t}},i=(e,r)=>(0,a.jsx)(t.TabBarItem,{icon:e.icon?(0,a.jsx)(o.DataTabBarIcon,{icon:e.icon}):void 0,badge:s(e.badge,r),itemKey:e.itemKey,label:e.label,metadata:e.metadata,severity:e.severity,"aria-controls":e.tabPanelId}),d=(e,r)=>(0,a.jsx)(t.RemovableTabBarItem,{icon:e.icon?(0,a.jsx)(o.DataTabBarIcon,{icon:e.icon}):void 0,"aria-controls":e.tabPanelId,badge:s(e.badge,r),itemKey:e.itemKey,label:e.label,metadata:e.metadata,severity:e.severity});e.TabBarRenderer=function(e,r,o){const{data:s,...c}=e,l=c.display;return"enabled"===c.reorderable?(0,a.jsx)(n.ReorderableTabBar,{...c,onSelect:r,children:s.map((e=>null!=e&&(e.isRemovable?d(e,l):i(e,l))))}):(0,a.jsx)(t.TabBar,{onSelect:r,ref:o,...c,children:s.map((e=>e.isRemovable?d(e,l):i(e,l)))})},e.OverflowTabBarRenderer=function(e,t){const{data:o,...n}=e;return(0,a.jsx)(r.OverflowTabBar,{items:o,onSelect:t,...n})}})),define("oj-c/tab-bar/DataTabBar",["require","exports","preact/jsx-runtime","preact","@oracle/oraclejet-preact/UNSAFE_ConveyorBelt","./ContentRenderer"],(function(require,e,a,t,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTabBar=void 0,e.DataTabBar=function(e){const{onRemove:n,onReorder:s,onSelect:i,selection:d,data:c=[],display:l,layout:u,edge:b,overflow:y,reorderable:f,"aria-label":v,"aria-labelledby":p}=e,h=(0,t.createRef)(),m=e=>{e.value&&i&&i(e)};return"popup"===y?(0,o.OverflowTabBarRenderer)({selection:d,onRemove:n,data:c,layout:u,display:l,edge:b,"aria-label":v,"aria-labelledby":p},m):"conveyor"===y?(0,a.jsx)(r.ConveyorBelt,{children:(0,o.TabBarRenderer)({onRemove:n,selection:d,layout:u,display:l,edge:b,"aria-label":v,"aria-labelledby":p,data:c,reorderable:f,onReorder:s},m,h)}):(0,o.TabBarRenderer)({onRemove:n,selection:d,layout:u,display:l,edge:b,"aria-label":v,"aria-labelledby":p,data:c,reorderable:f,onReorder:s},m,h)}})),define("oj-c/tab-bar/tab-bar",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","ojs/ojvcomponent","oj-c/hooks/UNSAFE_useDataProvider/useDataProvider","ojs/ojcontext","./DataTabBar","preact/hooks"],(function(require,e,a,t,r,o,n,s,i){"use strict";function d(e){return e&&"fetchFirst"in e}Object.defineProperty(e,"__esModule",{value:!0}),e.TabBar=void 0,e.TabBar=(0,r.registerCustomElement)("oj-c-tab-bar",(({data:e=[],onOjBeforeSelect:t,onOjRemove:c,onOjReorder:l,onOjSelectionAction:u,onSelectionChanged:b,reorderable:y="disabled",overflow:f="hidden",selection:v,display:p="standard",layout:h="stretch",edge:m="top","aria-label":j,"aria-labelledby":B})=>{const g=(0,i.useRef)(),D=(0,i.useCallback)(((e="MessageBanner: busyState")=>g.current?n.getContext(g.current).getBusyContext().addBusyState({description:e}):()=>{}),[]),{data:R}=(0,o.useDataProvider)({data:!Array.isArray(e)&&d(e)?e:void 0,addBusyState:D}),P=(0,i.useMemo)((()=>{let a=[];return Array.isArray(e)?a=e:d(e)&&(a=R.map((e=>({...e.data})))),a}),[e,R]);return(0,a.jsx)(r.Root,{ref:g,children:(0,a.jsx)(s.DataTabBar,{"aria-label":j,"aria-labelledby":B,data:P,onRemove:e=>{c&&c({key:e.value})},onReorder:e=>{l&&l({reorderedKeys:e.reorderedKeys})},onSelect:e=>{u&&u({previousValue:v||"",value:e.value}),v!==e.value&&(async()=>{e:{if(t)try{await t({key:e.value})}catch{break e}b&&b(e.value)}})()},reorderable:y,selection:v,display:p,edge:m,layout:h,overflow:f})})}),"TabBar",{properties:{data:{type:"Array<object>|DataProvider"},selection:{type:"any",writeback:!0},reorderable:{type:"string",enumValues:["disabled","enabled"]},overflow:{type:"string",enumValues:["hidden","popup","conveyor"]},display:{type:"string",enumValues:["standard","icons","stacked"]},layout:{type:"string",enumValues:["stretch","condense"]},edge:{type:"string",enumValues:["top","bottom"]}},events:{ojBeforeSelect:{cancelable:!0},ojRemove:{},ojReorder:{},ojSelectionAction:{}},extension:{_WRITEBACK_PROPS:["selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","id","aria-labelledby"]}},{data:[],reorderable:"disabled",overflow:"hidden",display:"standard",layout:"stretch",edge:"top"},{"@oracle/oraclejet-preact":t.default})})),define("oj-c/tab-bar",["require","exports","oj-c/tab-bar/tab-bar"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabBar=void 0,Object.defineProperty(e,"TabBar",{enumerable:!0,get:function(){return a.TabBar}})}));
//# sourceMappingURL=tab-bar.js.map