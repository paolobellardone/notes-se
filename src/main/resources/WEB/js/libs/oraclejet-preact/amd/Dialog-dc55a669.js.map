{"version":3,"file":"Dialog-dc55a669.js","sources":["../../src/UNSAFE_Dialog/Dialog.tsx"],"sourcesContent":["import type { ComponentChild, RefObject } from 'preact';\nimport { ForwardedRef, forwardRef } from 'preact/compat';\nimport { Offset, WindowOverlay, WindowOverlayPlacement } from '../UNSAFE_WindowOverlay';\nimport { TestIdProps, useTestId } from '../hooks/UNSAFE_useTestId';\nimport { useAnimation } from '../hooks/UNSAFE_useAnimation';\nimport { useEffect, useRef, useCallback, useMemo, useState } from 'preact/hooks';\nimport { mergeRefs } from '../utils/PRIVATE_refUtils';\n\nimport { DialogRedwoodTheme } from './themes/redwood/DialogTheme';\nimport { DialogStyles } from './themes/DialogStyles.css';\nimport { FocusTrap } from '../UNSAFE_FocusTrap';\nimport { HTMLAttributesSignalExcluded } from '../utils/UNSAFE_attributeUtils';\nimport { Layer } from '../UNSAFE_Layer';\nimport { Modal } from '../UNSAFE_Modal';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { globalImages } from '#/ImageVars.css';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { useId } from '../hooks/UNSAFE_useId';\nimport { dimensionInterpolations, DimensionProps } from '../utils/UNSAFE_interpolations/dimensions';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { useResizeObserver } from '../hooks/UNSAFE_useResizeObserver';\n\nimport { DraggableProps, useDraggable } from '../hooks/PRIVATE_useDraggable';\nimport { Floating, Coords } from '../UNSAFE_Floating';\nimport { IconButton } from '../UNSAFE_IconButton';\nimport { CloseIcon } from '../PRIVATE_ThemedIcons/CloseIcon';\nimport { Resizable } from '../PRIVATE_Resizable/Resizable';\nimport { Position, Rect } from '../utils/UNSAFE_flexibleComponentUtils';\nimport { useBreakpoints } from '../hooks/UNSAFE_useBreakpoints';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport {\n  SLIDE_DOWN_XLARGE,\n  SLIDE_UP_XLARGE,\n  DURATION_LARGE\n} from '../utils/PRIVATE_animationUtils';\nimport {\n  allTabbableElements,\n  focusOn,\n  focusWithin,\n  getActiveElement\n} from '../utils/PRIVATE_tabbableUtils';\n\n// dialog states\ntype Status = 'initial' | 'opening' | 'closing' | 'unmounted';\ntype VisibilityStatus = 'hidden' | 'visible';\ntype Animations = 'zoomIn' | 'zoomOut' | 'slideUp' | 'slideDown';\n\ntype IntrinsicProps = Pick<HTMLAttributesSignalExcluded<HTMLDivElement>, 'children' | 'role'>;\n\nexport type OnCloseDetail = {\n  reason: 'escapeKey' | 'icon';\n};\n\nexport type CancelBehavior = 'none' | 'escape' | 'icon';\n\ntype DialogProps = IntrinsicProps &\n  DimensionProps & {\n    /**\n     * On Close callback.\n     */\n    onClose?: (detail: OnCloseDetail) => void;\n\n    /**\n     * On opening or closing transition end callback.\n     */\n    onTransitionEnd?: (value: boolean) => void;\n\n    /**\n     * Determines whether the Dialog is open.\n     */\n    isOpen: boolean;\n\n    /**\n     * Dialog header content. Can be a string or VNode (Component Child).\n     * <p>\n     * When a plain string is passed, it will be used as the dialog title. Otherwise, the prop value\n     * will be used as the header content.\n     * </p>\n     * <p>\n     * Dialog will automatically refer to the header content as the accessible label.\n     * The user can override this behavior by specifying the <code>aria-labelledby</code> property\n     * and setting its value as needed.\n     * </p>\n     */\n    header?: ComponentChild;\n\n    /**\n     * Dialog footer content.\n     */\n    footer?: ComponentChild;\n\n    /**\n     * Determines dialog modality. Default is 'modal'.\n     */\n    modality?: 'modal' | 'modeless';\n\n    /**\n     * Specifies dialog's cancel behavior. Default is 'none'.\n     */\n    cancelBehavior?: CancelBehavior;\n\n    /**\n     * Specifies dialog's launcher. After dialog closes, it returns focus to the launcher.\n     * If not specified, focus goes back to the last active element before dialog opened.\n     */\n    launcherRef?: RefObject<HTMLElement>;\n\n    /**\n     * Specifies dialog's anchor. Dialog is placed relative to its anchor. If not specified,\n     * it is placed relatively to window.\n     */\n    anchorRef?: RefObject<Element | Coords>;\n\n    /**\n     * Determines placement of the dialog relative to the viewport.\n     * Supported values are:\n     * <p> <code>center</code>, <code>top</code>, <code>top-start</code>, <code>top-end</code>,\n     * <code>end</code>, <code>end-top</code>, <code>end-bottom</code>,\n     * <code>bottom</code>, <code>bottom-start</code>, <code>bottom-end</code>,\n     * <code>start</code>, <code>start-top</code>, <code>start-bottom</code>\n     * </p>\n     * Default is <code>center</code>.\n     */\n    placement?: WindowOverlayPlacement;\n\n    /**\n     * Determines the offset of the Dialog from its core placement along the specified axes.\n     *\n     * Offset could be a number or an object\n     *\n     * An object has the following type:\n     * <pre>\n     *   {\n     *     mainAxis?: number;\n     *     crossAxis?: number;\n     *   }\n     * </pre>\n     * For the <code>center</code> placement the convention for the offset type is that mainAxis defines\n     * offset from the top, crossAxis defines offset from the left side of the view port.\n     *\n     * A number is a shortcut for setting the mainAxis.\n     */\n    offset?: Offset;\n\n    /**\n     * Determines if the Dialog should be sensitive to drag gestures. To create a draggable dialog,\n     * set <code>dragAffordance='header'</code> and specify the <code>onDragMove</code> handler.\n     */\n    dragAffordance?: 'none' | 'header';\n\n    /**\n     * Determines if the Dialog should support resizing. To create a resizable dialog,\n     * set <code>resizeBehavior='resizable'</code> and specify the <code>onResize</code> handler.\n     */\n    resizeBehavior?: 'none' | 'resizable';\n\n    /**\n     * Callback to be invoked if <code>dragAffordance</code> is set to <code>header</code> and a drag gesture is initiated.\n     * The current position is reported in the <code>pos</code> parameter.\n     *\n     * @param pos\n     */\n    onDragStart?: (pos: Position) => void;\n\n    /**\n     * Callback to be invoked if <code>dragAffordance</code> is set to <code>header</code> and a drag gesture is detected.\n     * The current position is reported in the <code>pos</code> parameter.\n     *\n     * @param pos\n     */\n    onDragMove?: (pos: Position) => void;\n\n    /**\n     * Callback to be invoked if <code>dragAffordance</code> is set to <code>header</code> and a drag gesture is completed.\n     * The current position is reported in the <code>pos</code> parameter.\n     *\n     * @param pos\n     */\n    onDragEnd?: (pos: Position) => void;\n\n    /**\n     * Callback to be invoked if <code>resizeBehavior</code> is set to <code>resizable</code> and\n     * a resize gesture is initiated. The current position and dimensions are reported in the\n     * <code>rect</code> parameter.\n     *\n     * @param rect\n     */\n    onResizeStart?: (rect: Rect) => void;\n\n    /**\n     * Callback to be invoked if <code>resizeBehavior</code> is set to <code>resizable</code> and\n     * a resize gesture is detected. The current position and dimensions are reported in the\n     * <code>rect</code> parameter.\n     *\n     * @param rect\n     */\n    onResize?: (rect: Rect) => void;\n\n    /**\n     * Callback to be invoked if <code>resizeBehavior</code> is set to <code>resizable</code> and\n     * a resize gesture is completed. The current position and dimensions are reported in the\n     * <code>rect</code> parameter.\n     *\n     * @param rect\n     */\n    onResizeEnd?: (rect: Rect) => void;\n\n    /**\n     * Specifies callback triggered when initial focus is set or when a modeless dialog receives focus\n     * via the F6 key.\n     */\n    onFocusSet?: () => void;\n\n    /**\n     * Determines if the header decoration should be displayed. The default is <code>on</code>\n     * which renders a textured strip at the top of the dialog header in the Redwood theme.\n     * If set to <code>off</code>, no decoration is rendered.\n     */\n    headerDecoration?: 'off' | 'on';\n\n    /**\n     * Specifies the ARIA role type. Depending on how the dialog is used in the page, the developer\n     * should choose from the following:\n     * <ul>\n     *   <li><code>dialog</code> defines an application window that is designed to interrupt the current\n     *      processing of an application in order to prompt the user to enter information or require\n     *      a response.</li>\n     *   <li><code>alertdialog</code> defines type of dialog that contains an alert message, where initial\n     *      focus goes to an element within the dialog.</li>\n     * </ul>\n     */\n    role?: string;\n\n    /**\n     * Optional <code>aria-labelledby</code> property referring to the content to be used as Dialog's\n     * accessible <label htmlFor=\"\" className=\"\"></label>\n     * If not specified, the Dialog will automatically refer to the entire header content as the accessible label.\n     */\n    'aria-labelledby'?: string;\n\n    /**\n     * Optional accessible description for the dialog.\n     */\n    'aria-describedby'?: string;\n  } & TestIdProps;\n\n// dialog header\ntype DialogHeaderProps = Pick<DialogProps, 'children'> & {\n  id?: string;\n  cancelBehavior?: CancelBehavior;\n  onClose?: (detail: OnCloseDetail) => void;\n  draggableProps?: DraggableProps;\n  headerDecoration?: 'off' | 'on';\n};\n\nconst StyledDialogHeader = ({\n  children,\n  id,\n  cancelBehavior,\n  onClose,\n  draggableProps,\n  headerDecoration = 'on'\n}: DialogHeaderProps) => {\n  const { styles } = useComponentTheme<never, DialogStyles>(DialogRedwoodTheme);\n\n  const classes = classNames([\n    styles.dialogHeaderStyle,\n    ...(headerDecoration === 'on' ? [styles.dialogHeaderDecorationStyle] : [])\n  ]);\n\n  const content: ComponentChild =\n    typeof children === 'string' ? (\n      <h1 id={id} className={styles.dialogTitleStyle}>\n        {children}\n      </h1>\n    ) : (\n      <>{children}</>\n    );\n\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const handleIconClose = () => {\n    onClose?.({ reason: 'icon' });\n  };\n\n  const closeIcon: ComponentChild =\n    cancelBehavior === 'icon' ? (\n      <div>\n        <div className={styles.dialogHeaderCloseIconStyle}>\n          <IconButton\n            aria-label={translations.message_close()}\n            size=\"sm\"\n            variant=\"ghost\"\n            onAction={handleIconClose}>\n            <CloseIcon />\n          </IconButton>\n        </div>\n      </div>\n    ) : null;\n\n  return (\n    <div className={classes} {...draggableProps}>\n      {content}\n      {closeIcon}\n    </div>\n  );\n};\n\n// dialog footer\n\ntype DialogFooterProps = Pick<DialogProps, 'children'> & {\n  style?: string;\n};\n\nconst StyledDialogFooter = forwardRef(\n  ({ children, style }: DialogFooterProps, ref: ForwardedRef<HTMLDivElement | null>) => {\n    return (\n      <div ref={ref} className={style}>\n        {children}\n      </div>\n    );\n  }\n);\n\n// styled dialog\n\ntype MainProps = Pick<DialogProps, 'children' | 'header' | 'footer' | 'role'> &\n  Pick<HTMLAttributesSignalExcluded<HTMLDivElement>, 'style' | 'onKeyDown'> & {\n    visibility: VisibilityStatus;\n    labelId?: string;\n    ariaLabelledBy?: string;\n    ariaDescribedBy?: string;\n    cancelBehavior?: CancelBehavior;\n    draggableProps?: DraggableProps;\n    isResizable?: boolean;\n    headerDecoration?: 'off' | 'on';\n    containerRef?: RefObject<HTMLElement>;\n    onClose?: (detail: OnCloseDetail) => void;\n    onResizeStart?: (rect: Rect) => void;\n    onResize?: (rect: Rect) => void;\n    onResizeEnd?: (rect: Rect) => void;\n    footerRef?: RefObject<HTMLDivElement | null>;\n  } & TestIdProps;\n\nconst StyledDialog = forwardRef(\n  (\n    {\n      children,\n      header,\n      footer,\n      visibility,\n      labelId,\n      role,\n      ariaLabelledBy,\n      ariaDescribedBy,\n      cancelBehavior,\n      draggableProps,\n      isResizable,\n      headerDecoration,\n      containerRef,\n      onClose,\n      onResizeStart,\n      onResize,\n      onResizeEnd,\n      onKeyDown,\n      testId,\n      style,\n      footerRef\n    }: MainProps,\n    ref: ForwardedRef<HTMLDivElement | null>\n  ) => {\n    const elementRef = useRef<HTMLDivElement>(null);\n    const mergedRef = mergeRefs(ref, elementRef);\n\n    const [isSmallHeight, setSmallHeight] = useState<boolean>(false);\n    const isSmallWidth = !useBreakpoints()['md'];\n\n    const { classes: styleClasses, styles } = useComponentTheme<never, DialogStyles>(\n      DialogRedwoodTheme\n    );\n\n    const resizeHandler = useCallback(() => {\n      if (elementRef.current) {\n        if (elementRef.current.clientHeight < 400) {\n          setSmallHeight(true);\n        } else {\n          setSmallHeight(false);\n        }\n      }\n    }, []);\n\n    // set initial Height\n    useEffect(() => {\n      resizeHandler();\n    }, [resizeHandler]);\n\n    useResizeObserver(elementRef, resizeHandler);\n\n    // for small widths (mobile), use the 'smallWidth' dialog style\n    // otherwise, check for small height to apply 'smallWidth' or 'desktop' styles accordingly\n    const baseStyle = isSmallWidth ? styles.baseStyleSmallWidth : styles.baseStyleDesktop;\n\n    // content should scroll depending on the viewport height\n    // on large screens, the header and footer should be \"sticky\",\n    // at small viewport heights, the entire content should be scrollable\n    const contentStyle = isSmallHeight\n      ? styles.dialogContentStyleNoShrink\n      : styles.dialogContentStyle;\n\n    const visibilityStyle =\n      visibility === 'visible' ? styles.visibilityVisible : styles.visibilityHidden;\n\n    const testIdProps = useTestId(testId);\n\n    return (\n      <FocusTrap restoreFocusRef={false}>\n        <div\n          ref={mergedRef}\n          tabIndex={-1}\n          className={classNames([styleClasses, baseStyle, visibilityStyle, globalImages])}\n          style={style}\n          onKeyDown={onKeyDown}\n          role={role}\n          aria-labelledby={ariaLabelledBy}\n          aria-describedby={ariaDescribedBy}\n          {...testIdProps}>\n          <div className={styles.dialogContainerStyle}>\n            <StyledDialogHeader\n              id={labelId}\n              onClose={onClose}\n              headerDecoration={headerDecoration}\n              cancelBehavior={cancelBehavior}\n              draggableProps={draggableProps}>\n              {header}\n            </StyledDialogHeader>\n            <div className={contentStyle}>\n              <div className={styles.dialogBodyStyle}>{children}</div>\n            </div>\n            <StyledDialogFooter ref={footerRef} style={styles.dialogFooterStyle}>\n              {footer}\n            </StyledDialogFooter>\n          </div>\n          {isResizable && (\n            <Resizable\n              onResizeStart={onResizeStart}\n              onResize={onResize}\n              onResizeEnd={onResizeEnd}\n              containerRef={containerRef}></Resizable>\n          )}\n        </div>\n      </FocusTrap>\n    );\n  }\n);\n\n// main Dialog component\n\n/**\n * WAI-ARIA-compliant dialog component. A dialog is a floating window that typically contains\n * a title bar and a content area.\n * The dialog is generally placed on top of the rest of the page content. It can be either modal\n * (only the content in the dialog can be interacted with) or non-modal (it's still possible\n * to interact with content outside of the dialog).\n */\nexport const Dialog = forwardRef(\n  (\n    {\n      children,\n      isOpen,\n      header = '',\n      footer,\n      modality = 'modal',\n      launcherRef,\n      anchorRef,\n      placement,\n      offset = 0,\n      cancelBehavior = 'none',\n      dragAffordance = 'none',\n      resizeBehavior = 'none',\n      headerDecoration = 'on',\n      onDragStart,\n      onDragMove,\n      onDragEnd,\n      onResizeStart,\n      onResize,\n      onResizeEnd,\n      onFocusSet,\n      onClose,\n      onTransitionEnd,\n      role = 'dialog',\n      'aria-labelledby': ariaLabelledBy,\n      'aria-describedby': ariaDescribedBy,\n      testId,\n      ...props\n    }: DialogProps,\n    ref: ForwardedRef<HTMLDivElement | null>\n  ) => {\n    const [status, setStatus] = useState<Status>(isOpen ? 'initial' : 'unmounted');\n    const [visibility, setVisibility] = useState<VisibilityStatus>('hidden');\n\n    const prevStatusRef = useRef<Status>('unmounted');\n\n    const floatingRef = useRef<HTMLDivElement>(null);\n    const contentWrapperRef = useRef<HTMLDivElement | null>(null);\n    const localLauncherRef = useRef<HTMLElement | null>(null);\n    const footerRef = useRef<HTMLDivElement | null>(null);\n\n    const isSmallWidth = !useBreakpoints()['md'];\n    const derivedPlacement = isSmallWidth ? 'bottom' : placement ? placement : 'center';\n    const animationType = isSmallWidth\n      ? status === 'opening'\n        ? 'slideUp'\n        : 'slideDown'\n      : status === 'opening'\n      ? 'zoomIn'\n      : 'zoomOut';\n\n    const uniqueId = useId();\n    const labelId = ariaLabelledBy ? ariaLabelledBy : uniqueId;\n\n    const interpolations = [...Object.values(dimensionInterpolations)];\n    const styleInterpolations = mergeInterpolations<DimensionProps>(interpolations);\n    const { ...styles } = styleInterpolations(props);\n    const shouldReturnFocus = useRef<boolean>(false);\n\n    const setInitialFocus = useCallback(() => {\n      // Focus on first tabbable in the Dialog container or container itself if there is none\n      if (footerRef.current && allTabbableElements(footerRef.current).length > 0) {\n        focusWithin(footerRef.current);\n      } else {\n        focusWithin(contentWrapperRef.current as HTMLElement);\n      }\n      onFocusSet?.();\n    }, [onFocusSet]);\n\n    const returnFocus = useCallback((): void => {\n      const launcherEl = localLauncherRef.current;\n\n      if (shouldReturnFocus.current && launcherEl) {\n        focusOn(launcherEl);\n        shouldReturnFocus.current = false;\n      }\n    }, []);\n\n    // Animation\n    const { nodeRef } = useAnimation<Animations, HTMLDivElement>(animationType, {\n      animationStates,\n      isAnimatedOnMount: true,\n      onAnimationEnd: () => {\n        if (isOpen) {\n          onTransitionEnd?.(true);\n        } else if (!isOpen) {\n          // Should return focus?\n          // Modeless: check whether Dialog contains focus before it unmounts\n          // Modal: always return focus\n          shouldReturnFocus.current =\n            contentWrapperRef.current?.contains(getActiveElement() as HTMLElement) || false;\n          nodeRef(null);\n          setVisibility('hidden');\n          setStatus('unmounted');\n          onTransitionEnd?.(false);\n        }\n      }\n    });\n\n    const mergedRef = useMemo(() => mergeRefs(contentWrapperRef, ref), [contentWrapperRef, ref]);\n\n    const launcherKeyDownCallback = useCallback(\n      (event: KeyboardEvent): void => {\n        if (localLauncherRef.current === getActiveElement() && event.code === 'F6') {\n          // Prevent default F6 handlers.\n          // F6 is a standard Chrome address bar shortcut on Windows.\n          event.preventDefault();\n          event.stopPropagation();\n\n          focusWithin(contentWrapperRef.current as HTMLElement);\n          onFocusSet?.();\n        }\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [modality]\n    );\n\n    const { draggableProps } = useDraggable({\n      isDisabled: dragAffordance === 'none',\n      containerRef: floatingRef,\n      onDragStart,\n      onDragMove,\n      onDragEnd\n    });\n\n    useEffect(() => {\n      // 1. Ignore status update on initial render or return focus on component unmount\n      if (status === 'unmounted' && !isOpen) {\n        if (status !== prevStatusRef.current) {\n          returnFocus();\n        }\n      }\n\n      // 2. Mount visually hidden component\n      // Component gets mounted, but will be visually hidden to avoid flickering\n      // Flickering happens because it gets rendered before animation hook repositions\n      // it in next render cycle\n      else if (status === 'unmounted' && isOpen) {\n        setStatus('initial');\n      }\n\n      // 3. Setup animation\n      // Component has been mounted.\n      // We will kick out animation as node is already present in DOM.\n      // To avoid flickering, we still keep it visually hidden until the next render cycle.\n      else if (status === 'initial' && isOpen) {\n        nodeRef(contentWrapperRef.current);\n        setStatus('opening');\n      }\n\n      // 3. Unhide component. It becomes visible.\n      else if (status === 'opening' && isOpen) {\n        setVisibility('visible');\n      }\n\n      // 4. Closing\n      else if (!isOpen) {\n        setStatus('closing');\n      }\n\n      return () => {\n        // remember the previous status\n        prevStatusRef.current = status;\n      };\n    }, [isOpen, status, nodeRef, returnFocus]);\n\n    // Destroy case handler\n    useEffect(() => {\n      return () => {\n        const launcherEl = localLauncherRef.current;\n        if (\n          // eslint-disable-next-line react-hooks/exhaustive-deps\n          (contentWrapperRef.current?.contains(getActiveElement() as HTMLElement) || false) &&\n          launcherEl\n        ) {\n          // In destroy case ModalManager is blocking returning of the focus.\n          // We need to reschedule it to workaround that\n          setTimeout(() => {\n            focusOn(launcherEl);\n          }, 0);\n        }\n      };\n    }, []);\n\n    // Initialize launcher\n    useEffect(() => {\n      if (isOpen) {\n        if (!launcherRef?.current) {\n          // 1. If launcher is not defined, most frequent scenario is,\n          // that element, that has focus before opening the dialog is considered launcher\n          localLauncherRef.current = getActiveElement() as HTMLElement;\n        } else if (launcherRef.current instanceof Element) {\n          // 2. launcherRef element was provided.\n          // Verify, if it exists in DOM, otherwise use the last active element\n          localLauncherRef.current = document.body.contains(launcherRef.current)\n            ? launcherRef.current\n            : (getActiveElement() as HTMLElement);\n        } else {\n          localLauncherRef.current = getActiveElement() as HTMLElement;\n        }\n        // Register F6 key handler to enter a modeless dialog\n        if (modality === 'modeless') {\n          localLauncherRef.current?.addEventListener('keydown', launcherKeyDownCallback);\n        }\n      }\n      return () => {\n        // Deregister F6 key handler\n        if (modality === 'modeless') {\n          localLauncherRef.current?.removeEventListener('keydown', launcherKeyDownCallback);\n        }\n      };\n    }, [isOpen, launcherRef, launcherKeyDownCallback, modality]);\n\n    // setInitialFocus when the dialog becomes visible\n    useEffect(() => {\n      if (visibility === 'visible') {\n        setInitialFocus();\n      }\n    }, [visibility, setInitialFocus]);\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      switch (event.code) {\n        case 'Escape':\n          onClose?.({ reason: 'escapeKey' });\n          break;\n        case 'F6':\n          // Focus launcher\n          if (localLauncherRef.current && modality === 'modeless') {\n            focusOn(localLauncherRef.current);\n          }\n          // Prevent default F6 handlers. F6 is a standard Chrome address bar shortcut on Windows.\n          event.preventDefault();\n          event.stopPropagation();\n          break;\n      }\n    };\n\n    const handleBackdropClick = () => {\n      // in case of a backdrop click, move focus to dialog's root element\n      contentWrapperRef.current?.focus();\n    };\n\n    const renderDialogContent = () => {\n      return (\n        <StyledDialog\n          ref={mergedRef}\n          labelId={labelId}\n          header={header}\n          footer={footer}\n          role={role}\n          ariaLabelledBy={labelId}\n          ariaDescribedBy={ariaDescribedBy}\n          onKeyDown={handleKeyDown}\n          testId={testId}\n          style={styles}\n          visibility={visibility}\n          cancelBehavior={cancelBehavior}\n          draggableProps={draggableProps}\n          isResizable={resizeBehavior === 'resizable'}\n          headerDecoration={headerDecoration}\n          containerRef={floatingRef}\n          onClose={onClose}\n          onResizeStart={onResizeStart}\n          onResize={onResize}\n          onResizeEnd={onResizeEnd}\n          footerRef={footerRef}>\n          {children}\n        </StyledDialog>\n      );\n    };\n\n    const renderDialog = () => {\n      if (anchorRef && anchorRef.current) {\n        return (\n          <Floating\n            ref={floatingRef}\n            anchorRef={anchorRef}\n            placement={'bottom-start'}\n            flipOptions={{ mainAxis: false, crossAxis: false }}\n            shiftOptions={{ mainAxis: false, crossAxis: false }}>\n            {renderDialogContent()}\n          </Floating>\n        );\n      } else {\n        return (\n          <WindowOverlay placement={derivedPlacement} offset={offset}>\n            {renderDialogContent()}\n          </WindowOverlay>\n        );\n      }\n    };\n\n    if (modality === 'modal') {\n      return (\n        <Modal isOpen={status !== 'unmounted'} onBackdropClick={handleBackdropClick}>\n          {renderDialog()}\n        </Modal>\n      );\n    } else {\n      return status !== 'unmounted' ? <Layer>{renderDialog()}</Layer> : null;\n    }\n  }\n);\n\nconst animationStates = {\n  zoomIn: {\n    from: {\n      scaleX: 0.9,\n      scaleY: 0.9,\n      transformOrigin: 'center',\n      opacity: 0\n    },\n    to: {\n      scaleX: 1,\n      scaleY: 1,\n      opacity: 1\n    },\n    options: {\n      duration: 200\n    }\n  },\n  zoomOut: {\n    from: {\n      scaleX: 1,\n      scaleY: 1,\n      transformOrigin: 'center',\n      opacity: 1\n    },\n    to: {\n      scaleX: 0.9,\n      scaleY: 0.9,\n      opacity: 0\n    },\n    options: {\n      duration: 200\n    }\n  },\n  slideUp: {\n    ...SLIDE_UP_XLARGE,\n    options: {\n      duration: DURATION_LARGE\n    }\n  },\n  slideDown: {\n    ...SLIDE_DOWN_XLARGE,\n    options: {\n      duration: DURATION_LARGE\n    }\n  }\n};\n"],"names":["StyledDialogHeader","children","id","cancelBehavior","onClose","draggableProps","headerDecoration","styles","useComponentTheme","DialogRedwoodTheme","classes","classNames","dialogHeaderStyle","dialogHeaderDecorationStyle","content","_jsx","className","dialogTitleStyle","jsx","_Fragment","Fragment","translations","useTranslationBundle","closeIcon","dialogHeaderCloseIconStyle","IconButton","message_close","size","variant","onAction","reason","CloseIcon","SvgClose","_jsxs","StyledDialogFooter","forwardRef","style","ref","StyledDialog","header","footer","visibility","labelId","role","ariaLabelledBy","ariaDescribedBy","isResizable","containerRef","onResizeStart","onResize","onResizeEnd","onKeyDown","testId","footerRef","elementRef","useRef","mergedRef","mergeRefs","isSmallHeight","setSmallHeight","useState","isSmallWidth","useBreakpoints","styleClasses","resizeHandler","useCallback","current","clientHeight","useEffect","useResizeObserver","baseStyle","baseStyleSmallWidth","baseStyleDesktop","contentStyle","dialogContentStyleNoShrink","dialogContentStyle","visibilityStyle","visibilityVisible","visibilityHidden","testIdProps","useTestId","FocusTrap","restoreFocusRef","tabIndex","globalImages","jsxs","dialogContainerStyle","dialogBodyStyle","dialogFooterStyle","Resizable","Dialog","isOpen","modality","launcherRef","anchorRef","placement","offset","dragAffordance","resizeBehavior","onDragStart","onDragMove","onDragEnd","onFocusSet","onTransitionEnd","props","status","setStatus","setVisibility","prevStatusRef","floatingRef","contentWrapperRef","localLauncherRef","derivedPlacement","animationType","uniqueId","useId","interpolations","Object","values","dimensionInterpolations","styleInterpolations","mergeInterpolations","shouldReturnFocus","setInitialFocus","allTabbableElements","length","focusWithin","returnFocus","launcherEl","focusOn","nodeRef","useAnimation","animationStates","isAnimatedOnMount","onAnimationEnd","contains","getActiveElement","useMemo","launcherKeyDownCallback","event","code","preventDefault","stopPropagation","useDraggable","isDisabled","setTimeout","Element","document","body","addEventListener","removeEventListener","handleKeyDown","handleBackdropClick","focus","renderDialogContent","renderDialog","Floating","flipOptions","mainAxis","crossAxis","shiftOptions","WindowOverlay","Modal","onBackdropClick","Layer","zoomIn","from","scaleX","scaleY","transformOrigin","opacity","to","options","duration","zoomOut","slideUp","SLIDE_UP_XLARGE","DURATION_LARGE","slideDown","SLIDE_DOWN_XLARGE"],"mappings":"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"}