define("oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText",["require","exports","preact/hooks"],(function(require,e,t){"use strict";function a(e,t,a,s,r,n){const i="compact"!==n?a?.definition:void 0;return e?.instruction||("none"===r?.validatorHint?void 0:t)||i||("none"===r?.converterHint?void 0:s)}function s(e){if(!e.length)return;return e.map((e=>"function"==typeof e.getHint?e.getHint():void 0)).filter(Boolean).join("\n")}Object.defineProperty(e,"__esModule",{value:!0}),e.useAssistiveText=function({addBusyState:e,converter:r,displayOptions:n,help:i,helpHints:o,userAssistanceDensity:u,validators:l}){const[d,c]=(0,t.useState)(l&&l.length?s(l):void 0),p=(0,t.useRef)();(0,t.useEffect)((()=>{if(!l||!l.length)return void c(void 0);c(s(l));const t=l.map((e=>e.hint)).filter(Boolean),a=p.current=Symbol(),r=e?.("resolving the async validator hints");Promise.allSettled(t).then((e=>{c((t=>{const s=e.map((e=>"fulfilled"===e.status?e.value:void 0)).filter(Boolean);return a===p.current&&s.length?[t,...s].join("\n"):t})),r?.()}))}),[l]);const f="compact"!==u?o?.sourceText:o?.definition||o?.sourceText;return{assistiveText:a(i,d,o,r?.getHint?.()??void 0,n,u),helpSourceLink:o?.source,helpSourceText:f}}})),define("oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useMergedFormContext=function({propContainerReadonly:e,propLabelWrapping:a,propReadonly:s,propUserAssistanceDensity:r}){const n=(0,t.useFormContext)(),i=r??n.userAssistanceDensity,o=s??n.isReadonly,{isFormLayout:u,isReadonly:l,labelWrapping:d,...c}=n;return{containerProps:{...c,isFormLayout:void 0!==e||u,isReadonly:e??l,labelWrapping:a??d},readonlyValue:o,uadValue:i}}})),define("oj-c/hooks/UNSAFE_useEditableValue/utils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.treatNull=e.normalizeValue=e.isShallowEqual=e.hasErrorMessages=e.getVirtualKeyboardHintFromConverter=e.createMessageFromError=void 0;e.createMessageFromError=e=>"function"==typeof e.getMessage?{severity:"error",detail:e.getMessage().detail}:{severity:"error",detail:e.message};e.treatNull=(e,t)=>null===e?t:e;e.normalizeValue=e=>"string"==typeof e&&""===e?null:e;e.isShallowEqual=(e,t)=>e===t||e.length===t.length&&e.every(((e,a)=>e===t[a]));e.hasErrorMessages=e=>!!e&&e.some((e=>"error"===e.severity));e.getVirtualKeyboardHintFromConverter=e=>{let t;if(e&&e.resolvedOptions){const a=e.resolvedOptions();t=a?.virtualKeyboardHint??"text"}else t="text";return t}})),define("oj-c/hooks/UNSAFE_useEditableValue/converterUtils",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.format=function(e,a,s){if(function(e){return null===e}(e))return{result:"success",value:a};try{return{result:"success",value:s.format(e)}}catch(e){return{result:"failure",error:(0,t.createMessageFromError)(e)}}},e.parse=function(e,a,s){if(void 0===e)return{result:"success",value:null};if(r=e,""===r||null===r)return{result:"success",value:e};var r;try{return{result:"success",value:a.parse(e)}}catch(e){return{result:"failure",error:s?.(e)??(0,t.createMessageFromError)(e)}}}})),define("oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useStaleIdentity=function(){const e=(0,t.useRef)(new Map);return{setStaleIdentity:(0,t.useCallback)((t=>{const a=Symbol();return e.current.set(t,a),{isStale:()=>a!==e.current.get(t)}}),[])}}})),define("oj-c/hooks/UNSAFE_useEditableValue/reducer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reducer=function(e,t){const a=e.customMessages??[],s=e.hiddenMessages,r=e.componentMessages,n=e.shownMessages;switch(t.type){case"ADD_COMPONENT_MESSAGE":return{...e,componentMessages:[...r,t.payload],shownMessages:[...n,t.payload]};case"ADD_HIDDEN_MESSAGE":return{...e,hiddenMessages:[...s,t.payload]};case"CLEAR_ALL_MESSAGES":return{...e,shownMessages:[],hiddenMessages:[],customMessages:[],componentMessages:[]};case"SHOW_HIDDEN_MESSAGES":return 0===s.length?e:{...e,hiddenMessages:[],shownMessages:[...a,...r,...s]};case"UPDATE_DISPLAY_VALUE":return{...e,displayValue:t.payload};case"UPDATE_VALID":return{...e,valid:t.payload};case"UPDATE_VALUE":return{...e,value:t.payload};case"UPDATE_TRANSIENT_VALUE":return{...e,transientValue:t.payload};case"UPDATE_PREVIOUS_CONVERTER":return{...e,previousConverter:t.payload};case"UPDATE_PREVIOUS_DEFERRED_VALIDATORS":return{...e,previousDeferredValidators:t.payload};case"UPDATE_PREVIOUS_DISABLED":return{...e,previousDisabled:t.payload};case"UPDATE_PREVIOUS_READONLY":return{...e,previousReadonly:t.payload};case"UPDATE_PREVIOUS_VALIDATORS":return{...e,previousValidators:t.payload};case"UPDATE_PREVIOUS_VALUE":return{...e,previousValue:t.payload};case"UPDATE_COMPONENT_MESSAGES":return{...e,componentMessages:t.payload,shownMessages:[...a,...t.payload]};case"UPDATE_HIDDEN_MESSAGES":return{...e,hiddenMessages:t.payload};case"UPDATE_CUSTOM_MESSAGES":return{...e,customMessages:t.payload,shownMessages:[...t.payload,...r]};default:return e}},e.addComponentMessage=function(e,t){e({type:"ADD_COMPONENT_MESSAGE",payload:t})},e.addHiddenMessage=function(e,t){e({type:"ADD_HIDDEN_MESSAGE",payload:t})},e.clearAllMessages=function(e,t,{onMessagesCustomChanged:a}){e({type:"CLEAR_ALL_MESSAGES"}),a?.([])},e.showHiddenMessages=function(e){e({type:"SHOW_HIDDEN_MESSAGES"})},e.updateComponentMessages=function(e,t){e({type:"UPDATE_COMPONENT_MESSAGES",payload:t})},e.updateCustomMessages=function(e,t){e({type:"UPDATE_CUSTOM_MESSAGES",payload:t})},e.updateDisplayValue=function(e,t,{onRawValueChanged:a}){e({type:"UPDATE_DISPLAY_VALUE",payload:t}),a?.(t)},e.updateHiddenMessages=function(e,t){e({type:"UPDATE_HIDDEN_MESSAGES",payload:t})},e.updatePreviousConverter=function(e,t){e({type:"UPDATE_PREVIOUS_CONVERTER",payload:t})},e.updatePreviousDeferredValidators=function(e,t){e({type:"UPDATE_PREVIOUS_DEFERRED_VALIDATORS",payload:t})},e.updatePreviousDisabled=function(e,t){e({type:"UPDATE_PREVIOUS_DISABLED",payload:t})},e.updatePreviousReadonly=function(e,t){e({type:"UPDATE_PREVIOUS_READONLY",payload:t})},e.updatePreviousValidators=function(e,t){e({type:"UPDATE_PREVIOUS_VALIDATORS",payload:t})},e.updatePreviousValue=function(e,t){e({type:"UPDATE_PREVIOUS_VALUE",payload:t})},e.updateTransientValue=function(e,t,{onTransientValueChanged:a}){e({type:"UPDATE_TRANSIENT_VALUE",payload:t}),a?.(t)},e.updateValidStatus=function(e,t,{onValidChanged:a}){e({type:"UPDATE_VALID",payload:t}),a?.(t)},e.updateValue=function(e,t,{onValueChanged:a}){e({type:"UPDATE_VALUE",payload:t}),a?.(t)}})),define("oj-c/hooks/UNSAFE_useEditableValue/validationUtils",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAsync=function({validators:e,value:a}){const s=(e,a)=>{try{const s=e.validate(a);if(s instanceof Promise)return s.then((()=>{}),(e=>({message:(0,t.createMessageFromError)(e),messageDisplayStrategy:e?.messageDisplayStrategy})))}catch(e){return{message:(0,t.createMessageFromError)(e),messageDisplayStrategy:e?.messageDisplayStrategy}}},r=[],n=[];for(const t of e){const e=s(t,a);void 0!==e&&(e instanceof Promise?n.push(e):r.push(e))}return{errors:r,maybeErrorPromises:n}},e.validateSync=function({validators:e,value:a}){const s=[];for(const r of e)try{r.validate(a)}catch(e){s.push((0,t.createMessageFromError)(e))}if(s.length)return{result:"failure",errors:s};return{result:"success"}}})),define("oj-c/hooks/UNSAFE_useEditableValue/useEditableValue",["require","exports","preact/hooks","./converterUtils","./utils","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","./reducer","./validationUtils"],(function(require,e,t,a,s,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=function({addBusyState:e,ariaDescribedBy:o,converter:u,defaultDisplayValue:l,deferredValidators:d,disabled:c,displayOptions:p,messagesCustom:f,onDisplayValueChanged:v,onMessagesCustomChanged:y,onRawValueChanged:m,onTransientValueChanged:h,onValidChanged:g,onValueChanged:S,translateConverterParseError:E,readonly:b,validators:V,value:_}){const D=(0,t.useRef)(!0),{setStaleIdentity:C}=(0,r.useStaleIdentity)(),[A,P]=(0,t.useReducer)(n.reducer,{shownMessages:[],hiddenMessages:[],customMessages:f,componentMessages:[],value:_,valid:"pending"},(e=>{const t=u?(0,a.format)(_,l,u):{result:"success",value:(0,s.treatNull)(_,l)};return{...e,displayValue:"success"===t.result?t.value:l}})),M=(0,t.useRef)(),T=(0,t.useRef)(!1),j=(0,t.useCallback)((e=>{e!==M.current&&(M.current=e,g?.(e))}),[g]),R=(0,t.useCallback)(((e,t)=>(e(P,t,{onMessagesCustomChanged:y,onRawValueChanged:m,onTransientValueChanged:h,onValidChanged:j,onValueChanged:S}),!0)),[P,y,m,h,j,S]),w=(0,t.useCallback)((e=>{const t="string"==typeof e?e.trim():e;return(0,i.validateSync)({validators:d??[],value:t})}),[d]),L=(0,t.useCallback)((e=>{R(n.updateValue,e)}),[R]),O=(0,t.useCallback)((e=>{R(n.updateDisplayValue,e)}),[R]),x=(0,t.useCallback)((e=>{R(n.updateTransientValue,e)}),[R]),F=(0,t.useCallback)((e=>{let t;if(u){const r=(0,a.format)(e,l,u);"failure"===r.result?(R(n.updateComponentMessages,[r.error]),R(n.updateValidStatus,"invalidShown"),t=(0,s.treatNull)(e,l)):t=r.value}else t=(0,s.treatNull)(e,l);return t}),[u,l,R]),U=(0,t.useCallback)((e=>{const t=F(e);return R(n.updateDisplayValue,t),v?.(),!0}),[R,F,v]),I=(0,t.useCallback)((()=>"invalidShown"!==A.valid?{result:"success",value:A.value}:u?(0,a.parse)((0,s.normalizeValue)(A.displayValue),u,E):{result:"success",value:(0,s.normalizeValue)(A.displayValue)}),[u,A.displayValue,A.valid,A.value,E]),k=(0,t.useCallback)((e=>u?(0,a.parse)((0,s.normalizeValue)(e),u,E):{result:"success",value:(0,s.normalizeValue)(e)}),[u,E]),N=(0,t.useCallback)((e=>{const t=k(e);return"failure"===t.result&&(R(n.updateComponentMessages,[t.error]),R(n.updateValidStatus,"invalidShown")),t}),[R,k]),q=(0,t.useCallback)((async(t,a={})=>{const{doNotClearMessagesCustom:r=!1,forceHiddenMessagesToBeShown:o=!1}=a,u=r&&(0,s.hasErrorMessages)(f);if(r?(R(n.updateComponentMessages,[]),R(n.updateHiddenMessages,[])):R(n.clearAllMessages),!(V&&0!==V.length||d&&0!==d.length))return R(n.updateValidStatus,u?"invalidShown":"valid"),!0;const l=[],c=[],p=w(t);let v;"failure"===p.result&&l.push(...p.errors),null!=t&&(v=(0,i.validateAsync)({validators:V??[],value:t}),v.errors.forEach((({message:e,messageDisplayStrategy:t})=>{"displayOnBlur"!==t||T.current||o?l.push(e):c.push(e)})));const y=v?.maybeErrorPromises??[],m=0!==l.length||0!==c.length;if(!m&&!y.length)return R(n.updateValidStatus,u?"invalidShown":"valid"),!0;if(0!==l.length?(R(n.updateComponentMessages,l),R(n.updateValidStatus,"invalidShown")):0!==c.length&&(R(n.updateHiddenMessages,c),R(n.updateValidStatus,"invalidHidden")),!y.length)return!m;!m&&R(n.updateValidStatus,"pending");const h=e?.("running asynchronous validation"),{isStale:g}=C("useEditableValue-full-validate");let S=!1,E=!1;const b=[];for(const e of y){const t=e.then((e=>{if(e&&!g()){const{messageDisplayStrategy:t,message:a}=e;"displayOnBlur"!==t||T.current||o?(R(n.addComponentMessage,a),S=!0):(R(n.addHiddenMessage,a),E=!0)}}));b.push(t)}await Promise.all(b);const _=E||S,D=E||0!==c.length,A=S||0!==l.length;return g()||(m||_?A?R(n.updateValidStatus,"invalidShown"):D&&R(n.updateValidStatus,u?"invalidShown":"invalidHidden"):R(n.updateValidStatus,u?"invalidShown":"valid")),h?.(),!m&&!_}),[e,R,d,f,C,w,V]),B=async()=>{if(c||b)return;const e=I();if("failure"===e.result)return R(n.updateComponentMessages,[e.error]),void R(n.updateValidStatus,"invalidShown");const t=e.value;await H(t,{doNotClearMessagesCustom:!0})&&R(n.updateValue,t)&&U(t)},z=(0,t.useCallback)((e=>{R(n.clearAllMessages);const t=w(e);return"failure"===t.result&&R(n.updateHiddenMessages,t.errors),R(n.updateValidStatus,"failure"===t.result?"invalidHidden":"valid"),!0}),[R,w]),H=(0,t.useCallback)((async(t,a={})=>{const{isStale:s}=C("useEditableValue-validateValueOnInternalChange"),r=e?.("Running validateValueOnInternalChange"),n=await q(t,a);return r?.(),!s()&&n}),[e,q,C]),K=(0,t.useCallback)((async(e,t=!0)=>{const a=await H(e);return a&&t&&R(n.updateValue,e),a&&(T.current=!0),a}),[R,H]),W=(0,t.useCallback)((async({value:e})=>{const t=N(e);if("failure"===t.result)return!1;const a=t.value,s=await K(a);return s&&U(a),s}),[K,N,U]),G=(0,t.useCallback)((({value:e})=>{R(n.updateDisplayValue,e??l)}),[R,l]),$=(0,t.useCallback)((async()=>{if(b||c)return"valid";const t=N(A.displayValue);if("failure"===t.result)return"invalid";const a=t.value,s=e?.("Running component method validate"),r=await q(a,{forceHiddenMessagesToBeShown:!0});return s?.(),r?(a!==A.value&&(R(n.updateValue,a),U(a)),"valid"):"invalid"}),[e,c,R,q,N,b,U,A.displayValue,A.value]),Y=(0,t.useCallback)((()=>{z(A.value),U(A.value)}),[U,A.value,z]),X=(0,t.useCallback)((()=>{A.hiddenMessages&&A.hiddenMessages.length>0&&(R(n.showHiddenMessages),R(n.updateValidStatus,"invalidShown"))}),[R,A.hiddenMessages]),J=(0,t.useCallback)((()=>{T.current=!1}),[]),Q=(0,t.useCallback)((e=>{R(n.addComponentMessage,e)}),[R]);D.current||A.previousValue===_||(R(n.updatePreviousValue,_),_!==A.value&&(z(_),R(n.updateValue,_),U(_)));D.current||A.previousConverter===u||(R(n.updatePreviousConverter,u),"invalidShown"!==A.valid&&U(_),"invalidShown"===A.valid&&B());D.current||A.previousValidators===V||(R(n.updatePreviousValidators,V),"invalidShown"===A.valid&&B());if(!D.current&&(!A.customMessages&&f||A.customMessages&&!f||A.customMessages&&f&&!(0,s.isShallowEqual)(A.customMessages,f))){const e=A.componentMessages??[],t=A.hiddenMessages??[],a=f??[],r=(0,s.hasErrorMessages)(a),i=t.length>0,o=0===e.length&&0===t.length&&0===a.length;R(n.updateCustomMessages,a),r&&R(n.updateValidStatus,"invalidShown"),!r&&"pending"!==A.valid&&(o&&R(n.updateValidStatus,"valid")||i&&R(n.updateValidStatus,"invalidHidden"))}if(!D.current&&(A.previousDeferredValidators!==d||A.previousDisabled!==c||A.previousReadonly!==b)){const e=0===d?.length;if(A.previousDeferredValidators!==d&&R(n.updatePreviousDeferredValidators,d),A.previousDisabled!==c&&R(n.updatePreviousDisabled,c),A.previousReadonly!==b&&R(n.updatePreviousReadonly,b),e||!b&&!c)switch(A.valid){case"valid":const e=I();if("failure"===e.result)R(n.updateComponentMessages,[e.error]),R(n.updateValidStatus,"invalidShown");else{const t=w(e.value);"failure"===t.result&&R(n.updateHiddenMessages,t.errors)&&R(n.updateValidStatus,"invalidHidden")}break;case"invalidHidden":0===d?.length&&(R(n.updateValidStatus,"valid"),R(n.updateHiddenMessages,[]));break;case"invalidShown":B()}}if(D.current)if(D.current=!1,R(n.updatePreviousValue,_),R(n.updatePreviousConverter,u),R(n.updatePreviousValidators,V),R(n.updatePreviousDeferredValidators,d),R(n.updatePreviousDisabled,c),R(n.updatePreviousReadonly,b),R(n.updateCustomMessages,f),R(n.updateTransientValue,_),c||b)R(n.updateValidStatus,"valid"),U(_);else{const e=w(_);"failure"===e.result&&R(n.updateHiddenMessages,e.errors)&&R(n.updateValidStatus,(0,s.hasErrorMessages)(f)?"invalidShown":"invalidHidden"),"success"===e.result&&R(n.updateValidStatus,(0,s.hasErrorMessages)(f)?"invalidShown":"valid")&&U(_)}return{value:A.value,addMessage:Q,clearInteractionFlags:J,displayValue:A.displayValue,formatValue:F,methods:{reset:Y,showMessages:X,validate:$},onCommitValue:K,parseValue:N,refreshDisplayValue:U,setDisplayValue:O,setTransientValue:x,setValue:L,textFieldProps:{"aria-describedby":o,messages:"none"!==p?.messages?A.shownMessages:void 0,onCommit:W,onInput:G,value:A.displayValue},validateValueOnExternalChange:z}}})),define("oj-c/hooks/UNSAFE_useEditableValue/index",["require","exports","./utils","./useEditableValue"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=e.treatNull=e.getVirtualKeyboardHintFromConverter=void 0,Object.defineProperty(e,"getVirtualKeyboardHintFromConverter",{enumerable:!0,get:function(){return t.getVirtualKeyboardHintFromConverter}}),Object.defineProperty(e,"treatNull",{enumerable:!0,get:function(){return t.treatNull}}),Object.defineProperty(e,"useEditableValue",{enumerable:!0,get:function(){return a.useEditableValue}})})),define("oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators",["require","exports","ojs/ojvalidator-required","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDeferredValidators=function({labelHint:e,required:r,requiredMessageDetail:n}){const i=(0,s.useTranslationBundle)("@oracle/oraclejet-preact"),o=n||i.formControl_requiredMessageDetail(),u=(0,a.useMemo)((()=>r?new t({label:e,messageDetail:o}):null),[r]);return(0,a.useMemo)((()=>[u].filter(Boolean)),[u])}})),define("oj-c/select-common/utils/utils",["require","exports","ojs/ojdataprovider","@oracle/oraclejet-preact/utils/UNSAFE_logger"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_VALUE_ITEMS=e.DEFAULT_VALUE_ITEM=e.DEFAULT_VALUE=e.DEFAULT_ITEM_CONTEXT=void 0,e.isEmpty=function(e){return!e||(Array.isArray(e)?0===e.length:(e instanceof Set||e instanceof Map)&&0===e.size)},e.isSetEqual=function(e,t){if(e===t)return!0;if(e?.size!==t?.size)return!1;const a=Array.from(e),s=Array.from(t);return a.every(((e,t)=>e===s[t]))},e.getFilterCriterion=function(e,s,r){const n=s&&s.length>0;if(!n)return;const i=r,o=i&&i.length>0,u=e?.getCapability("filter"),l=u&&u.textFilter;e&&n&&!l&&(0,a.error)("Core Pack Select: DataProvider does not support text filter.  Filtering results in dropdown may not work correctly.");const d=e&&l&&n&&o?i.reduce(((e,t)=>{if(e)return e;if("unknown"===t)return t;if(t){if(u.textFilterMatching&&u.textFilterMatching.matchBy&&u.textFilterMatching.matchBy.indexOf(t)>-1)return t;(0,a.warn)(`Core Pack Select: DataProvider does not support text filter "${t}" matching.  Filtering results in dropdown may not work as expected.`)}}),null):void 0,c=d?{text:s,matchBy:d}:{text:s};return t.FilterFactory.getFilter({filterDef:c})},e.DEFAULT_ITEM_CONTEXT=null,e.DEFAULT_VALUE=null,e.DEFAULT_VALUE_ITEM=null,e.DEFAULT_VALUE_ITEMS=null})),define("oj-c/select-common/PRIVATE_useCache/useCache",["require","exports","preact/hooks","../utils/utils"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCache=function(){const e=(0,t.useRef)(new Map);return(0,t.useCallback)(((t,a,r)=>s(e.current,t,r)?(e.current.set(t,{value:a,deps:r}),a):e.current.get(t).value),[])};const s=(e,t,a)=>{if(!e.has(t))return!0;const s=e.get(t).deps;return s.length!==a.length||s.some(((e,t)=>!r(e,a[t])))},r=(e,t)=>e===t||(e instanceof Set&&t instanceof Set?(0,a.isSetEqual)(e,t):e===t)})),define("oj-c/select-common/PRIVATE_useCache/index",["require","exports","./useCache"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCache=void 0,Object.defineProperty(e,"useCache",{enumerable:!0,get:function(){return t.useCache}})})),define("oj-c/hooks/UNSAFE_useListData/useListData",["require","exports","ojs/ojdatacollection-common","ojs/ojdataproviderfactory","preact/hooks"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEmptyState=e.useListData=void 0;const r=Object.freeze({status:"loading",data:null}),n={isInitialFetchDeferred:!1};e.useListData=(a,l=n)=>{const d=(0,s.useRef)(null),c=(0,s.useRef)(0),y=(0,s.useRef)(!1),m=(0,s.useRef)(null),h=(0,s.useRef)(null),g=l.fetchSize&&l.fetchSize>0?l.fetchSize:25,S=(0,s.useMemo)((()=>i(a)),[a]),[E,b]=(0,s.useReducer)(o,0===l.initialRowsFetched?(0,e.getEmptyState)("atLeast"):r),V=(0,s.useCallback)((async(e,t)=>{if(null==S)return;const a={attributes:l.attributes,sortCriteria:l.sortCriteria,filterCriterion:l.filterCriterion,offset:e.offset,size:e.count},s=!0===y.current?"exact":"atLeast";if(0!==e.count)try{const r=(await S.fetchByOffset(a)).results;t&&t(r),b({status:"success",data:{offset:e.offset,data:r,totalSize:c.current,sizePrecision:s}})}catch(e){b({status:"error",error:e})}else b({status:"success",data:{offset:e.offset,data:[],totalSize:c.current,sizePrecision:s}})}),[S,l.attributes,l.filterCriterion,l.sortCriteria]),_=(0,s.useCallback)((async()=>{if(null==S)return;"loading"===E.status&&h.current?.abort((0,t.getAbortReason)()),b({status:"loading",data:null});const e=new AbortController;h.current=e;const a=S.fetchFirst({attributes:l.attributes,sortCriteria:l.sortCriteria,filterCriterion:l.filterCriterion,size:g,signal:e.signal})[Symbol.asyncIterator]();m.current=a;try{const e=await a.next();if(a!==m.current)return;const t=e.value.fetchParameters;if(t.signal&&t.signal.aborted)return;c.current=e.value.data.length,void 0!==e.done&&(y.current=e.done);const s=l.initialRowsFetched&&l.initialRowsFetched>0?l.initialRowsFetched:g;V({offset:0,count:Math.min(c.current,s)})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;b({status:"error",error:e}),m.current=null}}),[S,V,g,l.attributes,l.filterCriterion,l.initialRowsFetched,l.sortCriteria,l.fetchSize]),D=(0,s.useCallback)((async e=>{if(null===m.current)_();else{const t=e.offset+e.count;if(t>c.current){if(null==d.current){const a=u(m,c.current,t);d.current=a;try{const t=await a;void 0!==t.done&&(y.current=t.done);const s=t.total;(s>0||0===s&&y.current)&&(c.current=s,V({offset:e.offset,count:Math.min(c.current-e.offset,e.count)})),d.current=null}catch(e){b({status:"error",error:e}),d.current=null}}}else V(e)}}),[_,V]),C=(0,s.useCallback)((()=>{m.current=null,d.current=null,c.current=0,y.current=!1,0===l.initialRowsFetched?b((0,e.getEmptyState)("atLeast")):l.isInitialFetchDeferred?b({status:"loading",data:null}):_()}),[_,l.isInitialFetchDeferred,l.initialRowsFetched]);(0,s.useEffect)((()=>{S&&C()}),[S,C]);const A=(0,s.useCallback)((e=>{if("success"===E.status&&E.data){const t=E.data;let a,s=t.data.length,r=!1;if(e.detail.add){const a=p(e.detail.add,t,l,!0);c.current=c.current+a,s+=a,r=a>0||"exact"===t.sizePrecision,a<e.detail.add.data.length&&(y.current=!1)}if(e.detail.remove){const a=p(e.detail.remove,t,l,!1);c.current=Math.max(0,c.current-a),s=Math.max(0,s-a),r=r||a>0}const n=e.detail.update;n&&(r=r||f(n,t,l),a=e=>{v(n,t,e)}),r&&V({offset:t.offset,count:s},a)}}),[E,l,V]),P=(0,s.useCallback)((e=>{let t=-1;const a=e.detail?.disregardAfterKey;if(a&&"success"===E.status){const e=E.data.data.findIndex((e=>e.metadata.key===a));if(e>-1&&(t=E.data.data.length-e-1),0===t&&E.data.data.length>=g)return}t>-1&&"success"===E.status?(c.current=c.current-t,D({offset:E.data.offset,count:Math.max(E.data.data.length,g)})):("loading"===E.status&&h.current?.abort(),C())}),[E,g,D,C]);if((0,s.useEffect)((()=>(S&&(S.addEventListener("refresh",P),S.addEventListener("mutate",A)),()=>{S&&(S.removeEventListener("refresh",P),S.removeEventListener("mutate",A))})),[S,C,A,P]),!a){return[(0,e.getEmptyState)("exact"),e=>Promise.resolve()]}return[E,D]};const i=e=>{if(null==e)return null;return(0,a.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}})},o=(e,t)=>e.status===t.status&&"loading"===t.status?e:t,u=async(e,t,a)=>await l(e,t,a),l=async(e,t,a)=>{const s=e.current;if(null===s)return{total:-1,done:void 0};const r=await s.next();return s===e.current?(t+=r.value.data.length)>=a||r.done?{total:t,done:r.done}:l(e,t,a):{total:-1,done:void 0}};e.getEmptyState=e=>"atLeast"===e?d:c;const d=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"atLeast"}}),c=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"exact"}}),p=(e,t,a,s)=>{let r=0;if(y(e,a)){const a=s?e.indexes?.sort(((e,t)=>e-t)):e.indexes;let n=t.totalSize-1;a?.forEach((e=>{e<=n&&(r=r+=1,s&&(n=n+=1))}))}else if(s);else{const a=t.data.map((e=>e.metadata.key));e.keys.forEach((e=>{a.includes(e)&&(r+=1)}))}return r},f=(e,t,a)=>{if(y(e,a)){const a=e.indexes?e.indexes:[],s=t.offset,r=s+t.data.length;for(let e=0;e<a.length;e++)if(a[e]>=s&&a[e]<r)return!0}else{const a=Array.from(e.keys),s=t.data.map((e=>e.metadata.key));for(let e=0;e<a.length;e++){const t=a[e];if(s.includes(t))return!0}}return!1},v=(e,t,a)=>{e.keys.forEach((e=>{const s=a.find((t=>t.metadata.key==e)),r=t.data.find((t=>t.metadata.key==e));r&&s&&r.data===s.data&&(s.data=new Proxy(s.data,{}))}))},y=(e,t)=>e.indexes&&null==t.sortCriteria&&null==t.filterCriterion})),define("oj-c/select-common/PRIVATE_DebouncingDataProviderView/Debouncer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Debouncer=void 0;e.Debouncer=class{constructor(){this._responseTimes=[{time:900,count:0},{time:720,count:0},{time:600,count:0},{time:450,count:0},{time:360,count:0},{time:300,count:0}],this._requestTime={time:250,count:0},this._lastRequestTime=0}debounce(e,t){const a=this.GetDebounceTime(t);return(...t)=>{window.setTimeout((()=>{e(...t)}),a)}}recordResponseTime(e,t){const a=Math.min(t,5),s=this._responseTimes[a];0===s.count?s.time=e:s.time=(s.time*s.count+e)/(s.count+1),s.count+=1}recordRequestTime(){const e=Date.now(),t=this._lastRequestTime;if(this._lastRequestTime=e,0===t)return;const a=e-t;if(a>1e3)return;const s=this._requestTime;0===s.count?s.time=a:s.time=(s.time*s.count+a)/(s.count+1),s.count+=1}_getResponseTime(e){const t=Math.min(e,5);return this._responseTimes[t].time}_getRequestTime(){return this._requestTime.time}GetDebounceTime(e){const t=this._getResponseTime(e),a=1.2*this._getRequestTime();if(t<a)return 0;return(1+(t-a)/t)*a}}})),define("oj-c/select-common/PRIVATE_DebouncingDataProviderView/DebouncingDataProviderView",["require","exports","ojs/ojdataprovider","./Debouncer"],(function(require,e,t,a){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncingDataProviderView=void 0;class r{constructor(e,t,a){this._isFirstNext=!0,this.dataProvider=e,this.debouncer=t,this.params=a}next(){if(this._isFirstNext){this.debouncer.recordRequestTime(),this._isFirstNext=!1;const e=this.params?.filterCriterion?.text,a=(t,a)=>{if(this.params?.signal?.aborted)return void a(this.params?.signal?.reason);const s=this.dataProvider.fetchFirst(this.params);this._asyncIterator=s[Symbol.asyncIterator]();const r=Date.now();this._asyncIterator.next().then((a=>{const s=Date.now();this.debouncer.recordResponseTime(s-r,e?e.length:0),t(a)}),a)},s=(t,s)=>new Promise(((t,s)=>{this.debouncer.debounce(a,e?e.length:0)(t,s)})).then(t,s);return(0,t.wrapWithAbortHandling)(this.params?.signal,s,!1)}return this._asyncIterator.next()}}class n{constructor(e,t,a){this[s]=()=>new r(this.dataProvider,this.debouncer,this.params),this.dataProvider=e,this.debouncer=t,this.params=a}}s=Symbol.asyncIterator;e.DebouncingDataProviderView=class{constructor(e){this._debouncer=new a.Debouncer,this.dataProvider=e}fetchFirst(e){return new n(this.dataProvider,this._debouncer,e)}fetchByKeys(e){return this.dataProvider.fetchByKeys(e)}containsKeys(e){return this.dataProvider.containsKeys(e)}fetchByOffset(e){return this.dataProvider.fetchByOffset(e)}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}getCapability(e){return this.dataProvider.getCapability(e)}addEventListener(e,t){this.dataProvider.addEventListener(e,t)}removeEventListener(e,t){this.dataProvider.removeEventListener(e,t)}dispatchEvent(e){return this.dataProvider.dispatchEvent(e)}}})),define("oj-c/select-common/UNSAFE_useWrapDataProvider/useWrapDataProvider",["require","exports","ojs/ojdataproviderfactory","preact/hooks","../PRIVATE_DebouncingDataProviderView/DebouncingDataProviderView"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=function(e){return(0,a.useMemo)((()=>{if(!e)return e;const a=(0,t.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}}),r=a.getCapability("fetchFirst");return"immediate"===r?.iterationSpeed?a:new s.DebouncingDataProviderView(a)}),[e])}})),define("oj-c/select-common/UNSAFE_useWrapDataProvider/index",["require","exports","./useWrapDataProvider"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=void 0,Object.defineProperty(e,"useWrapDataProvider",{enumerable:!0,get:function(){return t.useWrapDataProvider}})})),define("oj-c/select-common/PRIVATE_useSelectData/CollectionTemplateDataProviderView",["require","exports","ojs/ojdataprovider"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollectionTemplateDataProviderView=e.SELECT_INTERNALS=void 0,e.SELECT_INTERNALS=Symbol("__SELECT_INTERNALS__");e.CollectionTemplateDataProviderView=class{get currentDataProvider(){return this.overrideDataProvider??this.originalDataProvider}setFilterCriterion(a){const s=this.filterCriterion;if(this.filterCriterion=a,!this.compareFilter(s,a)){const a=new t.DataProviderRefreshEvent;Object.defineProperty(a,e.SELECT_INTERNALS,{value:{cause:"filterCriterionChanged"}}),this.dispatchEvent(a),this.options.onRefresh?.()}}setDataStateOverride(s){if(this.dataStateOverride!==s){this.dataStateOverride=s,this.overrideDataProvider="success"===this.dataStateOverride?.status?new a(this.dataStateOverride):void 0;const r=new t.DataProviderRefreshEvent;Object.defineProperty(r,e.SELECT_INTERNALS,{value:{cause:"dataOverrideChanged"}}),this.dispatchEvent(r),this.options.onRefresh?.()}}compareFilter(e,t){if(e===t)return!0;if(void 0===e||void 0===t)return!1;const a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((a=>s.includes(a)&&e[a]===t[a]))}constructor(e,t){this.originalDataProvider=e,this.options=t,e.createOptimizedKeyMap&&(this.createOptimizedKeyMap=t=>e.createOptimizedKeyMap(t)),e.createOptimizedKeySet&&(this.createOptimizedKeySet=t=>e.createOptimizedKeySet(t))}async fetchByOffset(e){const t=this.filterCriterion?{...e,filterCriterion:this.filterCriterion}:e,a=await this.currentDataProvider.fetchByOffset(t);return this.options.onOffsetFetch?.({results:a}),a}fetchFirst(e){const t=this.filterCriterion?{...e,filterCriterion:this.filterCriterion}:e,a=this.options;a.onInitializeFetch?.();const s=this.currentDataProvider.fetchFirst(t);return{[Symbol.asyncIterator](){let e=0;const t=s[Symbol.asyncIterator]();return{async next(){const s=await t.next(),{value:r,done:n=!1}=s;return a.onNextIteration?.({results:r,offset:e,done:n}),e+=r.data.length,s}}}}}addEventListener(e,t){return this.originalDataProvider.addEventListener(e,t)}containsKeys(e){return this.currentDataProvider.containsKeys(e)}dispatchEvent(e){return this.originalDataProvider.dispatchEvent(e)}fetchByKeys(e){return this.currentDataProvider.fetchByKeys(e)}getCapability(e){return this.originalDataProvider.getCapability(e)}getTotalSize(){return this.currentDataProvider.getTotalSize()}isEmpty(){return this.currentDataProvider.isEmpty()}removeEventListener(e,t){return this.originalDataProvider.removeEventListener(e,t)}};class a{constructor(e){this.dataState=e}containsKeys(e){const{keys:t}=e,{data:a}=this.dataState,s=new Set;return a.data.forEach((e=>{t.has(e.metadata.key)&&s.add(e.metadata.key)})),Promise.resolve({containsParameters:e,results:s})}fetchByKeys(e){const{keys:t}=e,{data:a}=this.dataState,s=new Map;return a.data.forEach((e=>{t.has(e.metadata.key)&&s.set(e.metadata.key,e)})),Promise.resolve({fetchParameters:e,results:s})}fetchByOffset(e){const{offset:t,size:a}=e,{data:s}=this.dataState,r={fetchParameters:e??{},results:s.data.slice(t,a).map((e=>({data:e.data,metadata:e.metadata}))),done:t+(a??0)>=s.totalSize};return Promise.resolve(r)}fetchFirst(e){const{data:t}=this.dataState;return{[Symbol.asyncIterator](){let a=0;const s=e?.size??25,r=t.totalSize;return{async next(){if(a<r){const n={
...t.data.slice(a,s).reduce(((e,t)=>(e.data.push(t.data),e.metadata.push(t.metadata),e)),{data:[],metadata:[]}),fetchParameters:e??{},totalFilteredRowCount:t.totalSize},i=Math.min(s,r-a);return a+=a+i,{value:n,done:!1}}return{value:{data:[],metadata:[],fetchParameters:e??{},totalFilteredRowCount:t.totalSize},done:!0}}}}}}getCapability(){return null}getTotalSize(){return Promise.resolve(this.dataState.data.totalSize)}isEmpty(){return 0===this.dataState.data.totalSize?"yes":"no"}addEventListener(){}dispatchEvent(){return!1}removeEventListener(){}}})),define("oj-c/select-common/PRIVATE_useSelectData/useCollectionTemplateDataProviderView",["require","exports","oj-c/hooks/UNSAFE_useListData/useListData","preact/hooks","./CollectionTemplateDataProviderView"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCollectionTemplateDataProviderView=function({dataProvider:e,options:{dataStateOverride:n,filterCriterion:i}}){const[o,u]=(0,a.useReducer)(r,{dataState:(0,t.getEmptyState)("atLeast")}),l=(0,a.useMemo)((()=>null==e?e:new s.CollectionTemplateDataProviderView(e,{onInitializeFetch(){u({type:"loading"})},onNextIteration({results:{data:e,metadata:t,fetchParameters:a},offset:s,done:r}){if(a.signal?.aborted)return;const n=e.map(((e,a)=>({data:e,metadata:t[a]})));u({type:"append",payload:{items:n,offset:s,done:r}})},onOffsetFetch({results:{results:e,done:t,fetchParameters:a}}){a.signal?.aborted||u({type:"update",payload:{items:e,done:t,offset:a.offset}})},onRefresh(){u({type:"loading"})}})),[e]),d=(0,a.useRef)();d.current!==i&&(d.current=i,l?.setFilterCriterion(i));const c=(0,a.useRef)();c.current!==n&&(c.current=n,l?.setDataStateOverride(n));return{dataState:o.dataState,dataProvider:l}};const r=(e,{type:t,payload:a})=>{switch(t){case"append":{const{dataState:t}=e,s="success"===t.status?t.data:null,{done:r,items:n}=a;return{...e,dataState:{status:"success",data:{data:[...s?.data??[],...n],offset:s?.offset??0,sizePrecision:r?"exact":"atLeast",totalSize:(s?.data.length??0)+n.length}}}}case"update":return{...e,dataState:{status:"success",data:{data:a.items,offset:a.offset,sizePrecision:a.done?"exact":"atLeast",totalSize:a.items.length}}};case"loading":return{...e,dataState:{status:"loading",data:null}};default:return e}}})),define("oj-c/select-common/PRIVATE_useSelectData/useSelectData",["require","exports","oj-c/hooks/UNSAFE_useListData/useListData","preact/hooks","../UNSAFE_useWrapDataProvider/index","./useCollectionTemplateDataProviderView"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectData=void 0;const n=()=>{};e.useSelectData=({data:e,dataStateOverride:i,filterCriterion:o,hasCollectionTemplate:u})=>{const l=(0,s.useWrapDataProvider)(e),[d,c]=(0,t.useListData)(l??null,{filterCriterion:o,initialRowsFetched:0}),p=(0,a.useMemo)((()=>i?{status:"success",data:i}:void 0),[i]),{dataState:f,dataProvider:v}=(0,r.useCollectionTemplateDataProviderView)({dataProvider:l,options:{dataStateOverride:p,filterCriterion:o}});return{dataProvider:u?v:l,dataState:u?p??f:d,onLoadRange:u?n:c}}})),define("oj-c/select-common/PRIVATE_useSelectData/index",["require","exports","./useSelectData","./CollectionTemplateDataProviderView"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SELECT_INTERNALS=e.useSelectData=void 0,Object.defineProperty(e,"useSelectData",{enumerable:!0,get:function(){return t.useSelectData}}),Object.defineProperty(e,"SELECT_INTERNALS",{enumerable:!0,get:function(){return a.SELECT_INTERNALS}})})),define("oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","preact/hooks","../PRIVATE_useSelectData/index","../utils/utils"],(function(require,e,t,a,s,r){"use strict";function n(e){return e instanceof Set?new Set(e.values()):e}function i(e){return null!=e&&("object"==typeof e&&["key","data"].every((t=>t in e)))}function o(e,t){return e instanceof Set&&t instanceof Set||e instanceof Map&&t instanceof Map?e.size===t.size:i(e)&&i(t)?e.key===t.key:e===t}function u(e,t){return e instanceof Set?e.has(t):null!=e&&e===t}function l(e,t){return e instanceof Set||e instanceof Map?(e.delete(t),e):"number"==typeof e||"string"==typeof e?e===t?r.DEFAULT_VALUE:e:"object"==typeof e&&e.key===t?r.DEFAULT_VALUE_ITEMS:e}Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProviderListeners=function({dataProvider:e,setValue:s,setValueToSync:i,setValueItemsToSync:c,value:p,valueItems:f}){const v=p instanceof Set,y=(0,a.useCallback)((e=>{d(e)&&((0,r.isEmpty)(p)||(i(n(p)),c(r.DEFAULT_VALUE_ITEMS)))}),[c,i,p]),m=(0,a.useCallback)((e=>{if((0,r.isEmpty)(p))return;let a=n(p);if(null!=e.detail.remove){e.detail.remove.keys.forEach((e=>{u(a,e)&&(a=l(a,e),(0,t.warn)(`\n              ${v?"SelectMultiple":"SelectSingle"}: selected value removed from data provider: ${e}`))})),o(a,p)||(s((0,r.isEmpty)(a)?r.DEFAULT_VALUE:a),i((0,r.isEmpty)(a)?r.DEFAULT_VALUE:a))}var d;if(!(0,r.isEmpty)(a)&&null!=e.detail.update){const t=e.detail.update.keys;let s=(0,r.isEmpty)(f)?f:(d=f)instanceof Map?new Map(d.entries()):Object.assign({},d);t.forEach((e=>{u(a,e)&&(s=l(s,e))})),o(s,f)||(i(a),c((0,r.isEmpty)(s)?r.DEFAULT_VALUE_ITEMS:s))}}),[v,s,c,i,p,f]);(0,a.useEffect)((()=>(e?.addEventListener("refresh",y),e?.addEventListener("mutate",m),()=>{e?.removeEventListener("refresh",y),e?.removeEventListener("mutate",m)})),[e,m,y])};const d=e=>{if(s.SELECT_INTERNALS in e){const{cause:t=""}=e[s.SELECT_INTERNALS];return!["filterCriterionChanged","dataOverrideChanged"].includes(t)}return!0}})),define("oj-c/select-single/useSyncValueAndValueItem",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","oj-c/select-common/utils/utils","preact/hooks"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSyncValueAndValueItem=function({addBusyState:e,dataProvider:n,setDisplayValue:i,setIsLoading:o,setValue:u,setValueItem:l,value:d,valueItem:c,validateValueOnExternalChange:p}){const f=(0,r.useRef)(d),v=(0,r.useRef)(c),{setStaleIdentity:y}=(0,a.useStaleIdentity)(),m=null!=d,h=null!=c,g=(0,r.useCallback)((async()=>{if(!m)return void(h&&l(s.DEFAULT_VALUE_ITEM));if(null!=d&&null!=c&&c.key===d.value)return void l(Object.assign({},c));if(!n)return;o(!0);const a=e("useSyncValueItem: calling fetchByKeys"),{isStale:r}=y("useSyncValueItem:fetchByKeys");try{const e=await n.fetchByKeys({keys:new Set([d.value])});if(!r()){const t=function(e,t,a){if(t&&t.key===e)return t;const s=a.get(e);if(!s)throw new Error(`oj-c-select-single: could not fetch data for key ${e}`);return{key:e,data:s.data,metadata:s.metadata?s.metadata:{key:e}}}(d.value,c,e.results);l(t)}}catch(e){r()||(0,t.error)(`SelectMultiple: fetchByKeys promise rejected: ${e}`)}r()||o(!1),a()}),[e,n,m,h,o,y,l,d,c]),S=(0,r.useCallback)((()=>{const e=e=>{p(e)&&(u(e),i(e))};h?c.key===d?.value||e(c.key):m&&e(s.DEFAULT_VALUE)}),[m,h,i,u,p,d,c]);(0,r.useEffect)((()=>{m?g():h&&S()}),[]),(0,r.useEffect)((()=>{d!==f.current&&c!==v.current?(f.current=d,v.current=c,d?g():S()):d!==f.current?(f.current=d,g()):c!==v.current&&(v.current=c,S())}),[g,S,d,c])}})),define("oj-c/select-single/useValueItem",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValueItem=function(e,s){const[r,n]=(0,t.useUncontrolledState)(e,s);return(0,a.useEffect)((()=>{r!==e&&n(e)}),[e]),{valueItem:r,setValueItem:n}}})),define("oj-c/select-single/useSelectSinglePreact",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","oj-c/hooks/UNSAFE_useEditableValue/index","oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators","oj-c/select-common/PRIVATE_useCache/index","oj-c/select-common/PRIVATE_useSelectData/index","oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners","oj-c/select-common/utils/utils","ojs/ojkeyset","preact/hooks","./useSyncValueAndValueItem","./useValueItem"],(function(require,e,t,a,s,r,n,i,o,u,l,d,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectSinglePreact=function({advancedSearch:e,collectionTemplate:p,data:f,disabled:v,displayOptions:y,itemTemplate:m,itemText:h,labelEdge:g,labelHint:S,labelStartWidth:E,matchBy:b,messagesCustom:V,placeholder:_,readonly:D,requiredMessageDetail:C,required:A,textAlign:P,userAssistanceDensity:M,value:T,valueItem:j,virtualKeyboard:R,onMessagesCustomChanged:w,onOjAdvancedSearchAction:L,onOjValueAction:O,onValidChanged:x,onValueChanged:F,onValueItemChanged:U,...I},k){const[N,q]=(0,l.useState)(void 0),[B,z]=(0,l.useState)(null!=f&&null!=T&&null==j),H=(0,l.useMemo)((()=>b&&b.length>0?[...b]:void 0),[b]),{valueItem:K,setValueItem:W}=(0,c.useValueItem)(j,U),[G,$]=(0,l.useState)(K);(0,l.useEffect)((()=>{$(K)}),[K]);const Y=(0,t.useTranslationBundle)("@oracle/oraclejet-preact"),X=C||Y.select_requiredMessageDetail(),J=(0,s.useDeferredValidators)({labelHint:S,required:A,requiredMessageDetail:X}),Q=(0,l.useCallback)((()=>{$(K)}),[K]),{methods:Z,onCommitValue:ee,setDisplayValue:te,setValue:ae,textFieldProps:se,value:re,validateValueOnExternalChange:ne}=(0,a.useEditableValue)({addBusyState:k,ariaDescribedBy:I["aria-describedby"],defaultDisplayValue:null,deferredValidators:J,disabled:v,displayOptions:y,messagesCustom:V,onDisplayValueChanged:Q,onMessagesCustomChanged:w,onValidChanged:x,onValueChanged:F,readonly:D,value:T}),{"aria-describedby":ie,messages:oe}=se,ue=null===re,{dataProvider:le,dataState:de,onLoadRange:ce}=(0,n.useSelectData)({data:f,filterCriterion:N,hasCollectionTemplate:void 0!==p}),[pe,fe]=(0,l.useState)(null!=re?{value:re}:re),ve=(0,l.useCallback)((e=>{fe("function"!=typeof e?null!=e?{value:e}:e:t=>{const a=e(t?.value);return null!=a?{value:a}:a})}),[]),[ye,me]=(0,l.useState)(K);(0,l.useEffect)((()=>{ve(re)}),[re]),(0,l.useEffect)((()=>{me(K)}),[K]),(0,i.useDataProviderListeners)({dataProvider:le,setValue:ae,setValueToSync:ve,setValueItemsToSync:me,value:re,valueItems:K}),(0,d.useSyncValueAndValueItem)({addBusyState:k,dataProvider:le,setDisplayValue:te,setIsLoading:z,setValue:ae,setValueItem:W,value:pe,valueItem:ye,validateValueOnExternalChange:ne});const he=(0,l.useCallback)((async({previousValue:e,value:t})=>{const a=null!=t?t:o.DEFAULT_VALUE;te(a);const s=await ee(a);if(s){if(s&&"success"===de.status)if(null==t)O?.({itemContext:o.DEFAULT_ITEM_CONTEXT,previousValue:e??o.DEFAULT_VALUE,value:o.DEFAULT_VALUE});else if(t===K?.key)O?.({itemContext:K,previousValue:e??o.DEFAULT_VALUE,value:t}),G!==K&&$(K);else{let a=de.data.data.find((e=>e.metadata.key===t));if(void 0===a){a=(await le.fetchByKeys({keys:new Set([t])})).results.get(t)}const s={data:a.data,key:a.metadata.key,metadata:a.metadata};O?.({itemContext:s,previousValue:e??o.DEFAULT_VALUE,value:t??o.DEFAULT_VALUE})}}else $(void 0)}),[le,de,G,K,ee,O,te]),ge=(0,l.useCallback)((({searchText:e})=>{const t=(0,o.getFilterCriterion)(le,e,H);q(t)}),[le,H]),Se=(0,l.useMemo)((()=>{if(m)return({data:e,metadata:t,searchText:a})=>m({item:{data:e,metadata:t},searchText:a})}),[m]),Ee=(0,l.useRef)(),be=(0,r.useCache)(),Ve=(0,l.useMemo)((()=>{if(p)return({currentRowKeyOverride:e,searchText:t,selected:a,onPersistCurrentRowKey:s,onRowAction:r})=>{const n={currentRowOverride:be("currentRowOverride",e?{rowKey:e}:void 0,[e,t]),data:le,onCurrentRowChanged:be("onCurrentRowChanged",(({rowKey:e})=>{s({value:e})}),[s]),onRowAction:be("onRowAction",(({item:e})=>{r({context:{data:e.data,key:e.metadata.key,metadata:e.metadata}})}),[r]),searchText:t,selected:be("selected",new u.KeySetImpl([...a?.values()??[]]),[a])};return Ee.current?Object.assign(Ee.current,n):Ee.current=n,p(Ee.current)}}),[be,p,le]),_e=(0,l.useCallback)((async e=>he({value:e??void 0,previousValue:T??void 0})),[he,T]),De=(0,l.useCallback)((e=>{L?.(e)}),[L]),Ce=(0,l.useCallback)((e=>{De({searchText:e})}),[De]);return{methods:Z,selectSingleProps:{advancedSearch:e,"aria-describedby":ie,collectionRenderer:Ve,data:"error"!==de.status?de.data:null,isDisabled:v,isLoading:B,isReadonly:D,isRequired:A,isRequiredShown:A&&("compact"===M||ue),itemRenderer:Se,itemText:h,label:S,labelEdge:g,labelStartWidth:E,messages:oe,onAdvancedSearchAction:De,onCommit:he,onFilter:ge,onLoadRange:ce,placeholder:_,textAlign:P,userAssistanceDensity:M,valueItem:(0,a.treatNull)(G,void 0),virtualKeyboard:R},_doAdvancedSearchAction:Ce,_selectItemByValue:_e}}})),define("oj-c/select-single/select-single",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","@oracle/oraclejet-preact/UNSAFE_SelectSingle","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext","@oracle/oraclejet-preact/hooks/UNSAFE_useFormVariantContext","@oracle/oraclejet-preact/hooks/UNSAFE_useTabbableMode","@oracle/oraclejet-preact/utils/UNSAFE_styles/Layout","oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText","oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext","ojs/ojvcomponent","preact/compat","preact/hooks","./useSelectSinglePreact","ojs/ojcontext","css!oj-c/select-single/select-single-styles.css"],(function(require,e,t,a,s,r,n,i,o,u,l,d,c,p,f,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectSingle=void 0;const y={messages:"display"},m={instruction:""},h={definition:"",source:""},g=[];e.SelectSingle=(0,d.registerCustomElement)("oj-c-select-single",(0,c.forwardRef)((function({advancedSearch:e="off",columnSpan:a=1,containerReadonly:i,data:c=null,disabled:S=!1,displayOptions:E=y,help:b=m,helpHints:V=h,id:_,labelWrapping:D,matchBy:C=null,messagesCustom:A=g,readonly:P,required:M=!1,userAssistanceDensity:T,value:j=null,valueItem:R=null,virtualKeyboard:w="auto",...L},O){const x=(0,p.useRef)(),F=(0,p.useRef)(),U=(0,p.useCallback)((e=>x.current?v.getContext(x.current).getBusyContext().addBusyState({description:`oj-c-select-single id=${_}: ${e}`}):()=>{}),[_]),{containerProps:I,uadValue:k,readonlyValue:N}=(0,l.useMergedFormContext)({propContainerReadonly:i,propLabelWrapping:D,propReadonly:P,propUserAssistanceDensity:T}),{selectSingleProps:q,methods:B,_doAdvancedSearchAction:z,_selectItemByValue:H}=(0,f.useSelectSinglePreact)({advancedSearch:e,data:c,disabled:S,displayOptions:E,matchBy:C,messagesCustom:A,readonly:N,required:M,userAssistanceDensity:k,value:j,valueItem:R,virtualKeyboard:w,...L},U);(0,p.useImperativeHandle)(O,(()=>({blur:()=>F.current?.blur(),focus:()=>F.current?.focus(),_doAdvancedSearchAction:z,_selectItemByValue:H,UNSAFE_focusAndOpenDropdown:()=>{if(x.current){const e=x.current,t=()=>e.firstElementChild?.dispatchEvent(new MouseEvent("mousedown"));v.getContext(e).getBusyContext().whenReady().then(t)}},...B})),[B,z,H]);const K=(0,u.useAssistiveText)({displayOptions:E,help:b,helpHints:V,userAssistanceDensity:q.userAssistanceDensity}),W=(0,n.useFormVariantContext)();return(0,t.jsx)(d.Root,{id:_,ref:x,class:o.layoutSpanStyles.layoutSpanColumn[a],children:(0,t.jsx)(r.FormContext.Provider,{value:I,children:(0,t.jsx)(s.SelectSingle,{ref:F,...K,...q,variant:W})})})})),"SelectSingle",{properties:{advancedSearch:{type:"string",enumValues:["off","on"]},columnSpan:{type:"number"},containerReadonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},data:{type:"DataProvider|null"},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["none","display"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"},sourceText:{type:"string"}}},itemText:{type:"string|number|function"},labelEdge:{type:"string",enumValues:["none","start","top","inside"],binding:{consume:{name:"containerLabelEdge"}}},labelHint:{type:"string"},labelStartWidth:{type:"number|string",binding:{consume:{name:"labelWidth"}}},labelWrapping:{type:"string",enumValues:["truncate","wrap"],binding:{consume:{name:"labelWrapping"}}},matchBy:{type:"Array<string>|null"},messagesCustom:{type:"Array<object>",writeback:!0},placeholder:{type:"string"},readonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},required:{type:"boolean"},requiredMessageDetail:{type:"string"},textAlign:{type:"string",enumValues:["end","start","right"]},userAssistanceDensity:{type:"string",enumValues:["compact","reflow","efficient"],binding:{consume:{name:"containerUserAssistanceDensity"}}},value:{type:"string|number|null",writeback:!0},valueItem:{type:"object|null",properties:{data:{type:"any"},key:{type:"any"},metadata:{type:"object",properties:{indexFromParent:{type:"number"},isLeaf:{type:"boolean"},key:{type:"any"},message:{type:"object",properties:{detail:{type:"string"},severity:{type:"string|number"},summary:{type:"string"}}},parentKey:{type:"any"},suggestion:{type:"object"},treeDepth:{type:"number"}}}},writeback:!0},virtualKeyboard:{type:"string",enumValues:["number","search","auto","url","text","email","tel"]},valid:{type:"string",enumValues:["pending","valid","invalidHidden","invalidShown"],readOnly:!0,writeback:!0}},slots:{collectionTemplate:{data:{}},itemTemplate:{data:{}}},events:{ojAdvancedSearchAction:{},ojValueAction:{}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value","valueItem"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["aria-describedby","id"]},methods:{blur:{},focus:{},showMessages:{},reset:{},validate:{},_doAdvancedSearchAction:{},_selectItemByValue:{},UNSAFE_focusAndOpenDropdown:{}}},{advancedSearch:"off",columnSpan:1,data:null,disabled:!1,displayOptions:{messages:"display"},help:{instruction:""},helpHints:{definition:"",source:""},matchBy:null,messagesCustom:[],required:!1,value:null,valueItem:null,virtualKeyboard:"auto"},{"@oracle/oraclejet-preact":a.default},{consume:[n.FormVariantContext,i.TabbableModeContext]})})),define("oj-c/select-single",["require","exports","oj-c/select-single/select-single"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectSingle=void 0,Object.defineProperty(e,"SelectSingle",{enumerable:!0,get:function(){return t.SelectSingle}})}));
//# sourceMappingURL=select-single.js.map