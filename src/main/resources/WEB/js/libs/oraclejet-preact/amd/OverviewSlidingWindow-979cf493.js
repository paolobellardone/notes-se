define(['exports', 'preact/jsx-runtime', 'preact/hooks', './PRIVATE_VisOverview/themes/VisOverview.css', './eventsUtils-edf8f4e5', './accUtils-93ee6f16', './DragH-a8b0ba7a', './clientUtils-8c0e90ff'], (function(t,e,n,i,o,s,r,a){"use strict";const d=20;const f=a.isTouch()?30:10;t.OverviewSlidingWindow=function({x:t,width:s,height:a,y:h,windowX:l,windowHeight:c,windowWidth:w,windowY:g,hasHandles:x,onWindowDimsChange:u}){const j=n.useRef(null),m=function({x:t,width:e,windowX:i,windowWidth:s,rootRef:r,windowHeight:a,windowY:f,onWindowDimsChange:h}){const l=n.useRef(),[c,w]=n.useState();return{onPointerDown:n.useCallback((t=>{l.current={x:t.offsetX,y:t.offsetY},t.target.setPointerCapture(t.pointerId),w({x:t.offsetX,y:t.offsetY})}),[l]),onPointerUp:n.useCallback((n=>{const{offsetX:o,offsetY:r}=n,c=Math.abs(l.current.x-o)>d/4;if(l.current=void 0,w(void 0),o<=i+s&&o>=i&&r<=f+a&&r>=f||c)return;const g=Math.min(t+e-s,Math.max(o-s/2,t));h?.({deltaX:g-i,deltaWidth:0})}),[l,a,i,f,s,e,t,h]),onPointerMove:n.useCallback((n=>{const a=o.getElementData(r,n.target)?.ojObject;if(!l.current||null==n.target||null==a||null==c)return;let f=0,g=0;if("window"===a){const o=n.offsetX-c.x;f=Math.min(t+e-s,Math.max(t,i+o))-i}else"leftHandle"===a&&n.offsetX<=i+s-d/2?(f=Math.max(t,i+n.offsetX-c.x)-i,g=-1*f):"rightHandle"===a&&n.offsetX>=i+d/2&&(g=Math.min(n.offsetX-c.x,t+e-i));w({x:n.offsetX,y:n.offsetY}),h?.({deltaX:f,deltaWidth:g}),n.stopPropagation()}),[l,r,t,c,e,i,s,h])}}({x:t,y:h,width:s,height:a,windowHeight:c,windowWidth:w,windowX:l,windowY:g,rootRef:j,onWindowDimsChange:u}),v=g+.5*(c-16);return e.jsxs("g",{ref:j,...x?m:{},children:[e.jsx("rect",{x:t,y:h,width:s,height:a,fill:"transparent"}),e.jsx("rect",{"data-oj-object":"window",cursor:"move",x:l,y:g,height:c-1,width:w-1,class:i.styles.overviewWindow}),x&&e.jsxs(e.Fragment,{children:[e.jsx("g",{transform:`translate(${l} ${v})`,children:e.jsx(r.SvgDragH,{})}),e.jsx("g",{transform:`translate(${l+w-16} ${v})`,children:e.jsx(r.SvgDragH,{})}),e.jsx("rect",{x:l,y:g,height:c,width:f,strokeWidth:"1","data-oj-object":"leftHandle",fill:"transparent",stroke:"transparent",cursor:"col-resize"}),e.jsx("rect",{x:l+w-f,y:g,strokeWidth:"1",height:c,"data-oj-object":"rightHandle",width:f,stroke:"transparent",fill:"transparent",cursor:"col-resize"})]})]})}}));
//# sourceMappingURL=OverviewSlidingWindow-979cf493.js.map
