define(['exports', 'preact/jsx-runtime', 'preact/hooks', './positionUtils-6e4daa31', './Floating-28ad0903', './Layer-9fb9ca67', 'preact/compat', './LayerHost-1b4d03f0', './tabbableUtils-428c264e', './clientHints-fff66be9', './useAnimation-5a74955f', './animationUtils-716a9aa6', './useUser-abae2493', './useTestId-d0c49456', './useBreakpointValues-3a067093', './useResizeObserver-275c3e83', './useComponentTheme-5aa41a8f', './classNames-08d99695', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutTheme', './useFloating-c8c92f6f', './refUtils-d354a169', './useOutsideClick-39a81428', './arrayUtils-6ee96a35', './useModal-536cb7ff', './utils-32e81a13', './Common/themes/themeContract.css', './colorUtils-7c069766', './_curry1-df649359', './UNSAFE_Floating/themes/redwood/FloatingTheme', './UNSAFE_Floating/themes/FloatingStyles.css', 'css!./FloatingStyles.styles.css', './UNSAFE_Floating/themes/redwood/FloatingBaseTheme.css', 'module', './UNSAFE_Floating/themes/redwood/FloatingVariants.css', './vanilla-extract-recipes-createRuntimeFn.esm-d881c69a', './vanilla-extract-dynamic.esm-eceadd82', './UNSAFE_Floating/themes/FloatingContract.css', './UNSAFE_Layer/themes/LayerStyles.css', 'css!./LayerStyles.styles.css', './useThemeInterpolations-95e6f849', './useColorScheme-8358a6c9', './useScale-0fb08a15', './theme-a8f3d819', './Theme-d945adae', './mergeInterpolations-9ede4cf7', './mergeDeepWithKey-aaab9019', './_curry3-83878f86', './_curry2-86c52b86', './_isObject-42bafc94', './useDensity-2b757d02', 'preact', './Common/themes/redwood/theme', './head-9cb1a3da', './_arity-5a5f5f71', './_isArray-32602db6', './_isString-d0ada3cb', './useBreakpoints-52d11a72', './useVisAddBusyState-2d2ccb92', './VisBusyStateContext-63467849', './useVisBusyStateContext-7b0606e7', './logger-0f873e29', './UNSAFE_DrawerLayout/themes/DrawerLayoutStyles.css', 'css!./DrawerLayoutStyles.styles.css', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutBaseTheme.css', 'module', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutVariants.css'], (function(e,t,s,r,a,n,o,c,l,i,u,d,f,m,h,w,y,b,p,g,R,A,D,S,v,E,x,L,O,C,k,U,F,_,N,T,I,H,B,V,z,j,G,W,X,M,Y,K,P,$,q,J,Q,Z,ee,te,se,re,ae,ne,oe,ce,le,ie,ue,de){"use strict";e.DrawerLayout=({children:e,startDrawer:o,endDrawer:c,bottomDrawer:g,isStartOpen:R=!1,isEndOpen:A=!1,isBottomOpen:D=!1,startDisplay:S,endDisplay:v,bottomDisplay:E,onClose:x,onTransitionEnd:L,testId:O})=>{const C="0px",k="start",U="end",F="bottom",_="initial",N="opening",T="closing",I="unmounted",H="full-overlay",B="overlay",V="reflow",z="hidden",[j,G]=s.useState(R?_:I),[W,X]=s.useState(A?_:I),[M,Y]=s.useState(D?_:I),[K,P]=s.useState(z),[$,q]=s.useState(z),[J,Q]=s.useState(z),[Z,ee]=s.useState(),[te,se]=s.useState(),[re,ae]=s.useState(),ne=h.useBreakpointValues({sm:H,md:B,lg:V}),[oe,ce]=s.useState(ne),[le,ie]=s.useState(ne),ue=s.useRef(null),de=s.useRef(null),fe=s.useRef(null),me=s.useRef(null),he=s.useRef(null),we=s.useRef(null),ye=s.useRef(null),be=s.useRef(null),pe=s.useRef(null),ge=s.useRef(null),Re=s.useRef(null),[Ae,De]=s.useState(null),[Se,ve]=s.useState(null),[Ee,xe]=s.useState(null),Le=s.useCallback((e=>We(e).current),[]),Oe=s.useCallback((()=>{const e=Le(k),t=Le(U),s=Le(F),r=l.getActiveElement();return e&&e.contains(r)?k:t&&t.contains(r)?U:s&&s.contains(r)?F:null}),[Le]),Ce=s.useCallback((()=>{if(R||A||D){const e=Oe();if(e){we.current=e;const t=l.allTabbableElements(We(we.current).current,!0);ye.current=t.indexOf(l.getActiveElement())}}}),[Oe,R,D,A]),ke=s.useCallback((e=>{let t=!1;switch(e){case k:t=R;break;case U:t=A;break;case F:t=D}return t}),[R,A,D]);s.useEffect((()=>{const e=we.current;if(e){const t=We(e);if(t.current&&ke(e)){const e=l.allTabbableElements(t.current,!0);null!=ye.current&&e.length>ye.current?l.focusOn(e[ye.current]):l.focusWithin(t.current),we.current=null,ye.current=null}}}),[Ae,Se,Ee,ke]),s.useEffect((()=>{Ce(),setTimeout((()=>{ce(ne)}),0)}),[ne,Ce]);const Ue=e=>e?Math.round(e.offsetHeight):0,Fe=s.useCallback((e=>`${Ue(e)}px`),[]),_e=s.useCallback((e=>e?Math.round(e.getBoundingClientRect().width):0),[]),Ne=s.useCallback((e=>`${_e(e)}px`),[_e]),{direction:Te}=f.useUser(),Ie="ltr"===Te,He=s.useCallback((e=>r.normalizePosition(e,Te)),[Te]),Be=e=>[k,U].indexOf(e)>-1,Ve=e=>e===F,ze=e=>[N,T].indexOf(e)>-1,je=e=>{switch(e){case k:return ze(j);case U:return ze(W);case F:return ze(M)}},Ge=(e,t)=>{switch(e){case k:return P(t);case U:return q(t);case F:return Q(t)}},We=e=>{switch(e){case k:return fe;case U:return me;case F:return he}},Xe=e=>{switch(e){case k:return Ze;case U:return et;case F:return tt}},Me=e=>{switch(e){case k:return j;case U:return W;case F:return M}},Ye=(e,t)=>{switch(e){case k:G(t);break;case U:X(t);break;case F:Y(t)}},Ke=e=>{switch(e){case k:Ze(null);break;case U:et(null);break;case F:tt(null)}},Pe=s.useCallback((e=>{switch(e){case k:return S;case U:return v;case F:return E}}),[S,v,E]),$e=s.useCallback((e=>{const t=Pe(e);return t||(Be(e)?oe:le)}),[Pe,oe,le]),qe=e=>({expandVertically:{from:{maxHeight:C},to:{maxHeight:"100%"},options:{duration:d.DURATION_LARGE}},collapseVertically:{from:{maxHeight:"100%"},to:{maxHeight:C},options:{duration:d.DURATION_LARGE}},expandHorizontally:()=>({from:{maxWidth:C},to:{maxWidth:Ne(e.current)},options:{duration:d.DURATION_LARGE}}),collapseHorizontally:()=>({from:{maxWidth:Ne(e.current)},to:{maxWidth:C},options:{duration:d.DURATION_LARGE}}),slideUp:{from:{translateY:"100%"},to:{translateY:C},options:{duration:d.DURATION_LARGE}},slideDown:{from:{translateY:C},to:{translateY:"100%"},options:{duration:d.DURATION_LARGE}},slideOpenLeft:{from:{translateX:"-100%"},to:{translateX:C},options:{duration:d.DURATION_LARGE}},slideCloseLeft:{from:{translateX:"0"},to:{translateX:"-100%"},options:{duration:d.DURATION_LARGE}},slideOpenRight:{from:{translateX:"100%"},to:{translateX:C},options:{duration:d.DURATION_LARGE}},slideCloseRight:{from:{translateX:"0"},to:{translateX:"100%"},options:{duration:d.DURATION_LARGE}}}),Je=e=>{We(e).current?.contains(Re.current)&&l.focusOnElementOrNearestAncestor((e=>{switch(e){case k:return be;case U:return pe;case F:return ge}})(e).current)};function Qe(e,t){const s=ke(e),r=Me(e);return u.useAnimation((e=>{const t=Ve(e),s=Me(e);return $e(e)===V?t?"opening"===s?"expandVertically":"closing"===s?"collapseVertically":"":"opening"===s?"expandHorizontally":"closing"===s?"collapseHorizontally":"":t?"opening"===s?"slideUp":"closing"===s?"slideDown":"":"opening"===s?"left"===He(e)?"slideOpenLeft":"slideOpenRight":"closing"===s?"left"===He(e)?"slideCloseLeft":"slideCloseRight":""})(e),{animationStates:qe(t),isAnimatedOnMount:!0,onAnimationEnd:()=>{r===N?(dt(e)&&(e=>{const t=We(e),s=l.getAutofocusFocusables(t.current);s.length>0?l.focusOn(s[0]):l.focusWithin(t.current)})(e),(e=>{We(e).current.removeAttribute("style")})(e),Ke(e),Ye(e,"open"),L?.({placement:e,value:!0})):s||(dt(e)&&Je(e),Ke(e),Ge(e,z),Ye(e,I),L?.({placement:e,value:!1}))}}).nodeRef}const Ze=Qe(k,fe),et=Qe(U,me),tt=Qe(F,he),st=m.useTestId(O);function rt(e){const t=ke(e),r=Me(e);s.useEffect((()=>{if(r!==I||t)if(r===I&&t)Ye(e,_);else{if(r===_&&t){const t=We(e);return Xe(e)(t.current),void Ye(e,N)}if(r===N&&t)return Ge(e,"visible"),void(e=>{const t=l.getActiveElement();switch(e){case k:be.current=t;break;case U:pe.current=t;break;case F:ge.current=t}})(e);if(!t){const t=We(e);Xe(e)(t.current),Re.current=l.getActiveElement(),Ye(e,T)}}}),[t,r,e])}rt(k),rt(U),rt(F);const at=e=>{ct(k,e)},nt=e=>{ct(U,e)},ot=e=>{ct(F,e)},ct=(e,t)=>{"Escape"===t.code&&dt(e)&&x?.({placement:e,reason:"escapeKey"})},{classes:lt,styles:it}=y.useComponentTheme(p.DrawerLayoutRedwoodTheme),ut=e=>e===z?it.visibilityHidden:it.visibilityVisible,dt=s.useCallback((e=>[H,B].indexOf($e(e))>-1),[$e]),ft=e=>$e(e)===H,mt=e=>{const t=(e=>{switch(e){case k:return K;case U:return $;case F:return J}})(e),s=[ut(t)];dt(e)?(s.push(it.overlayDrawer),Be(e)&&!ft(e)&&s.push(it.overlaySideDrawerNonFullWidth)):s.push(it.reflowDrawer),je(e)&&s.push(it.animatedDrawer);return s.push((e=>{switch(e){case k:return dt(k)?Ie?it.overlayDrawerLeft:it.overlayDrawerRight:Ie?it.reflowDrawerLeft:it.reflowDrawerRight;case U:return dt(U)?Ie?it.overlayDrawerRight:it.overlayDrawerLeft:Ie?it.reflowDrawerRight:it.reflowDrawerLeft;case F:return dt(F)?it.overlayDrawerBottom:it.reflowDrawerBottom}})(e)),b.classNames(s)},ht=e=>{switch(e){case k:return o;case U:return c;case F:return g}},wt=e=>{switch(e){case k:return at;case U:return nt;case F:return ot}},yt=e=>t.jsx("div",{ref:We(e),className:mt(e),tabIndex:dt(e)?-1:void 0,onKeyDown:wt(e),children:ht(e)}),bt=i.getClientHints(),pt=s.useCallback((()=>"ios"===bt.platform?document.documentElement.clientHeight:window.innerHeight),[bt.platform]),gt=e=>{setTimeout((()=>{e()}),0)},Rt=s.useCallback((()=>{pt()>=600?le!=V&&(Ce(),ie(V)):le!=B&&(Ce(),ie(B))}),[le,pt,Ce]),At=s.useCallback((()=>{gt(Rt)}),[Rt]);s.useEffect((()=>{const e=new ResizeObserver((()=>{At()}));return e.observe(document.body),()=>{e.unobserve(document.body)}}),[At]);const Dt=e=>{switch(e){case k:return Z;case U:return te;case F:return re}},St=s.useCallback((e=>{const t=Fe(de.current),s=We(e).current;s&&ke(e)&&dt(e)&&(s.style.height=t)}),[Fe,ke,dt]),vt=s.useCallback((()=>{const e=he.current;if(e&&ke(F)&&dt(F)){const t=Ne(de.current);e.style.width=t}}),[Ne,ke,dt]),Et=e=>{Be(e)&&(St(e),(e=>{const t=We(e).current;if(t&&ke(e)){const s=t.style;ft(e)?s.width=Ne(ue.current):s.removeProperty("width")}})(e)),Ve(e)&&vt()},xt=s.useCallback((()=>{St(k),St(U),vt()}),[St,vt]);w.useResizeObserver(ue,(()=>{gt(xt)}));const Lt=e=>{if(dt(e)){const t=(e=>{const t=Le(e);return t?Be(e)?-_e(t):-Ue(t):0})(e);switch(e){case k:ee(t);break;case U:se(t);break;case F:ae(t)}}},Ot=()=>{Lt(k),vt()};w.useResizeObserver(fe,(()=>{gt(Ot)}));const Ct=()=>{Lt(U),vt()};w.useResizeObserver(me,(()=>{gt(Ct)}));const kt=()=>{Lt(F)};w.useResizeObserver(he,(()=>{gt(kt)}));const Ut=e=>{const t=$e(e);if((e=>{switch(e){case k:return Ae;case U:return Se;case F:return Ee}})(e)!=t){switch(e){case k:De(t);case U:ve(t);case F:xe(t)}Ce()}},Ft=e=>Me(e)!==I?(e=>{const s={mainAxis:!1,crossAxis:!1},r={mainAxis:!1,crossAxis:!1};return Ut(e),dt(e)?(Et(e),Dt(e)||Lt(e),t.jsx("div",{children:t.jsx(n.Layer,{children:t.jsx(a.Floating,{anchorRef:e===F?de:ue,placement:e,class:je(e)?it.floating:"",offsetValue:Dt(e),flipOptions:r,shiftOptions:s,children:yt(e)})})})):yt(e)})(e):null;return t.jsxs("div",{ref:ue,className:lt,...st,children:[Ft(k),t.jsxs("div",{ref:de,className:it.centerSection,children:[t.jsx("div",{className:it.mainContent,children:e}),Ft(F)]}),Ft(U)]})},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_DrawerLayout.js.map
