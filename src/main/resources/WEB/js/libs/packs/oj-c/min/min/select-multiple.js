define("oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText",["require","exports","preact/hooks"],(function(require,e,t){"use strict";function a(e,t,a,s,r,n){const l="compact"!==n?a?.definition:void 0;return e?.instruction||("none"===r?.validatorHint?void 0:t)||l||("none"===r?.converterHint?void 0:s)}function s(e){if(!e.length)return;return e.map((e=>"function"==typeof e.getHint?e.getHint():void 0)).filter(Boolean).join("\n")}Object.defineProperty(e,"__esModule",{value:!0}),e.useAssistiveText=void 0,e.useAssistiveText=function({addBusyState:e,converter:r,displayOptions:n,help:l,helpHints:i,userAssistanceDensity:o,validators:u}){const[c,d]=(0,t.useState)(u&&u.length?s(u):void 0),f=(0,t.useRef)();(0,t.useEffect)((()=>{if(!u||!u.length)return void d(void 0);d(s(u));const t=u.map((e=>e.hint)).filter(Boolean),a=f.current=Symbol(),r=e?.("resolving the async validator hints");Promise.allSettled(t).then((e=>{d((t=>{const s=e.map((e=>"fulfilled"===e.status?e.value:void 0)).filter(Boolean);return a===f.current&&s.length?[t,...s].join("\n"):t})),r?.()}))}),[u]);const p="compact"!==o?i?.sourceText:i?.definition||i?.sourceText;return{assistiveText:a(l,c,i,r?.getHint?.()??void 0,n,o),helpSourceLink:i?.source,helpSourceText:p}}})),define("oj-c/editable-value/utils/utils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isShallowEqual=e.normalizeValue=e.treatNull=e.createMessageFromError=void 0,e.createMessageFromError=function(e){return"function"==typeof e.getMessage?{severity:"error",detail:e.getMessage().detail}:{severity:"error",detail:e.message}},e.treatNull=function(e,t){return null===e?t:e},e.normalizeValue=function(e){return"string"==typeof e&&""===e?null:e};e.isShallowEqual=(e,t)=>e===t||e.length===t.length&&e.every(((e,a)=>e===t[a]))})),define("oj-c/editable-value/UNSAFE_useComponentMessaging/useComponentMessaging",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks","../utils/utils"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useComponentMessaging=void 0,e.useComponentMessaging=function({messagesCustom:e=[],onMessagesCustomChanged:r}){const[n,l]=(0,t.useUncontrolledState)(e,r),[i,o]=(0,a.useState)([]),[u,c]=(0,a.useState)([]),d=(0,a.useRef)(e),f=(0,a.useCallback)(((...e)=>{o((t=>[...t,...e]))}),[]),p=(0,a.useCallback)((e=>{o((t=>[...t,e]))}),[]),m=(0,a.useCallback)((()=>{o([]),c([])}),[]),v=(0,a.useCallback)((()=>{c([])}),[]),y=(0,a.useCallback)((()=>{o([]),c([]),l([])}),[]),g=(0,a.useCallback)((()=>n.some((e=>"error"===e.severity))),[n]),V=(0,a.useCallback)((()=>0===i.length&&0===u.length&&!1===g()),[i,u,g]),S=(0,a.useCallback)((()=>0!==u.length),[u]),h=(0,a.useCallback)((()=>{o([...i,...u]),c([])}),[i,u]);return(0,a.useEffect)((()=>{d.current!==e&&(d.current=e,(0,s.isShallowEqual)(n,e)||l(e))}),[n,e]),(0,a.useMemo)((()=>({componentMessages:i,deferredComponentMessages:u,messagesCustom:n,visibleMessages:[...n,...i],addComponentMessage:f,addDeferredComponentMessage:p,clearAllComponentMessages:m,clearAllMessages:y,clearDeferredComponentMessages:v,hasCustomErrorMessages:g,hasHiddenMessages:S,hasNoErrorMessages:V,setComponentMessages:o,setDeferredComponentMessages:c,showHiddenMessages:h})),[i,u,n,g,S,V,h])}})),define("oj-c/editable-value/UNSAFE_useConverter/useConverter",["require","exports","ojs/ojconverter-nativenumber","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","../utils/utils"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useConverter=e.ConverterErrorSymbol=void 0,e.ConverterErrorSymbol=Symbol("ConverterError"),e.useConverter=function({componentMessagingState:n,validationState:l,converter:i}){const o=(0,s.useTranslationBundle)("@oracle/oraclejet-preact").inputNumber_converterParseError(),u=(0,a.useCallback)((a=>{if(!i||(""===(s=a)||null===s))return a;var s;try{return i.parse(a)}catch(a){const s=a?.cause===t.USER_INPUT_ERROR?{severity:"error",detail:o}:(0,r.createMessageFromError)(a);return n.setComponentMessages([s]),l.setValid("invalidShown"),e.ConverterErrorSymbol}}),[i,n,l]),c=(0,a.useCallback)(((e,t=!1)=>{if(!i||function(e){return null===e}(e))return(0,r.treatNull)(e,"")??"";try{return i.format(e)}catch(a){return t||(n.setComponentMessages([(0,r.createMessageFromError)(a)]),l.setValid("invalidShown")),(0,r.treatNull)(e,"")}}),[i,n,l]);return(0,a.useMemo)((()=>({format:c,parse:u})),[c,u])}})),define("oj-c/editable-value/UNSAFE_useConverterLifecycle/useConverterLifecycle",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useConverterLifecycle=void 0,e.useConverterLifecycle=function({converter:e,validationState:a,refreshDisplayValue:s,runFullValidationAndUpdateValue:r}){const n=(0,t.useRef)(e);(0,t.useEffect)((()=>{if(n.current===e)return;n.current=e;const{valid:t}=a;if("invalidShown"===t)r();else s()}),[e,a,s,r])}})),define("oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators",["require","exports","ojs/ojvalidator-required","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDeferredValidators=void 0,e.useDeferredValidators=function({labelHint:e,required:r,requiredMessageDetail:n}){const l=(0,s.useTranslationBundle)("@oracle/oraclejet-preact"),i=n||l.formControl_requiredMessageDetail(),o=(0,a.useMemo)((()=>r?new t({label:e,messageDetail:i}):null),[r]);return(0,a.useMemo)((()=>[o].filter(Boolean)),[o])}})),define("oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useStaleIdentity=void 0,e.useStaleIdentity=function(){const e=(0,t.useRef)(new Map);return{setStaleIdentity:(0,t.useCallback)((t=>{const a=Symbol();return e.current.set(t,a),{isStale:()=>a!==e.current.get(t)}}),[])}}})),define("oj-c/editable-value/UNSAFE_useValidators/useValidators",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks","../UNSAFE_useStaleIdentity/useStaleIdentity","../utils/utils"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValidators=e.ValidationResult=void 0,e.ValidationResult={VALID:"VALID",INVALID:"INVALID",STALE:"STALE"},e.useValidators=function({componentMessagingState:n,defaultValidState:l,deferredValidators:i=[],validators:o=[],addBusyState:u,onValidChanged:c}){const[d,f]=(0,t.useUncontrolledState)(l,c),{setStaleIdentity:p}=(0,s.useStaleIdentity)();(0,a.useLayoutEffect)((()=>{void 0!==l&&c?.(l)}),[]);const{addComponentMessage:m,clearAllComponentMessages:v,clearAllMessages:y,hasCustomErrorMessages:g,setComponentMessages:V}=n,S=(0,a.useCallback)((async(e,t={})=>{const{doNotClearMessagesCustom:a=!1}=t,s=g();if(f("pending"),a?v():y(),0===o.length&&0===i.length)return f(s&&a?"invalidShown":"valid"),!0;function n(e,t){try{const a=e.validate(t);if(a instanceof Promise)return a.then((()=>{}),(e=>(0,r.createMessageFromError)(e)))}catch(e){return(0,r.createMessageFromError)(e)}}const l=[],c=[],d=h(e);if(void 0!==d&&l.push(...d),null!=e)for(const t of o){const a=n(t,e);void 0!==a&&(a instanceof Promise?c.push(a):l.push(a))}if(!l.length&&!c.length)return f(s&&a?"invalidShown":"valid"),!0;const S=0!==l.length;if(S&&(V(l),f("invalidShown")),!c.length)return!S;const C=u?.("running validation"),{isStale:b}=p("useValidators-validate");let E=!1;for(const e of c){const t=await e;t&&!b()&&(m(t),f("invalidShown"),E=!0)}return S||E||b()||f(s&&a?"invalidShown":"valid"),C?.(),!S&&!E}),[m,v,y,i,o]),h=(0,a.useCallback)((e=>{const t=[];for(const a of i)try{a.validate(e)}catch(e){t.push((0,r.createMessageFromError)(e))}if(t.length)return t}),[i]),C=(0,a.useCallback)((async(t,a={})=>{const{isStale:s}=p("useValidationLifeCycle-validateValueOnInternalChange"),r=u?.("running validateValueOnInternalChange"),n=await S(t,a);return r?.(),s()?e.ValidationResult.STALE:n?e.ValidationResult.VALID:e.ValidationResult.INVALID}),[u,S]),b=(0,a.useCallback)((t=>{const{clearAllMessages:a,setDeferredComponentMessages:s}=n;a();const r=h(t);return r?(s(r),f("invalidHidden")):f("valid"),e.ValidationResult.VALID}),[n,h]);return(0,a.useMemo)((()=>({valid:d,setValid:f,deferredValidate:h,fullValidate:S,validateValueOnExternalChange:b,validateValueOnInternalChange:C})),[d,h,S,b,C])}})),define("oj-c/editable-value/UNSAFE_useValidationLifecycle/useValidationLifecycle",["require","exports","preact/hooks","../UNSAFE_useConverter/useConverter","../UNSAFE_useValidators/useValidators","../utils/utils"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValidationLifecycle=void 0,e.useValidationLifecycle=function({componentMessagingState:e,disabled:n,deferredValidators:l,readonly:i,validationState:o,validators:u,getValueForValidation:c,setValueAfterValidation:d}){const f=(0,t.useRef)(l),p=(0,t.useRef)(u),m=(0,t.useRef)(e.messagesCustom),v=(0,t.useRef)(i),y=(0,t.useRef)(n),g=(0,t.useRef)(!0),V=(0,t.useCallback)((async()=>{if(i||n)return;const{valid:e,validateValueOnInternalChange:t}=o,r=c(e);if(r===a.ConverterErrorSymbol)return;await t(r,{doNotClearMessagesCustom:!0})===s.ValidationResult.VALID&&d(r)}),[n,i,o,c,d]);return(0,t.useEffect)((()=>{if(!g.current)return;if(g.current=!1,i||n)return;const t=c("valid");if(t===a.ConverterErrorSymbol)return;const{deferredValidate:s,setValid:r}=o,{hasCustomErrorMessages:l,setDeferredComponentMessages:u}=e,d=s(t);d&&(u(d),r("invalidHidden")),l()&&r("invalidShown")}),[n,i]),(0,t.useEffect)((()=>{const t=f.current!==l&&0===l.length;if(f.current===l&&v.current===i&&y.current===n)return;v.current=i,y.current=n,f.current=l;if(!(t||!i&&!n))return;const{valid:s,deferredValidate:r,setValid:u}=o,{clearDeferredComponentMessages:d,setDeferredComponentMessages:p}=e;switch(s){case"valid":const e=c(s);if(e!==a.ConverterErrorSymbol){const t=r(e);t&&(p(t),u("invalidHidden"))}break;case"invalidHidden":0===l.length&&(u("valid"),d());break;case"invalidShown":V()}}),[n,i,l,e,o,c,V]),(0,t.useEffect)((()=>{if(p.current!==u&&(p.current=u,!i&&!n&&"invalidShown"===o.valid))V()}),[n,i,u,o]),(0,t.useEffect)((()=>{if((0,r.isShallowEqual)(m.current,e.messagesCustom))return;const{messagesCustom:t,hasCustomErrorMessages:a,hasHiddenMessages:s,hasNoErrorMessages:n}=e,{valid:l,setValid:i}=o;if(m.current=t,a())i("invalidShown");else{if("pending"===l)return;n()?i("valid"):s()&&i("invalidHidden")}}),[e,o]),{runFullValidationAndUpdateValue:V}}})),define("oj-c/editable-value/UNSAFE_useValue/useValue",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks","../utils/utils"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValue=void 0,e.useValue=function({value:e,format:r,parse:n,onRawValueChanged:l,onTransientValueChanged:i,onValueChanged:o}){const[u,c]=(0,t.useUncontrolledState)(r(e,!0),l),[d,f]=(0,t.useUncontrolledState)(e,o);(0,a.useEffect)((()=>{void 0!==u&&l?.(u)}),[]);const[p,m]=(0,t.useUncontrolledState)(e,i);return(0,a.useEffect)((()=>{void 0!==e&&i?.(e)}),[]),{displayValue:u,transientValue:p,value:d,getValueForValidation:(0,a.useCallback)((e=>"invalidShown"!==e?d:n((0,s.normalizeValue)(u))),[u,d,n]),setValueAfterValidation:(0,a.useCallback)((e=>{f(e),c(r(e))}),[r]),setDisplayValue:c,setTransientValue:m,setValue:f,refreshDisplayValue:(0,a.useCallback)((()=>{c(r(d))}),[d,r])}}})),define("oj-c/editable-value/UNSAFE_useValueLifecycle/useValueLifecycle",["require","exports","preact/hooks","../UNSAFE_useValidators/useValidators"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValueLifecycle=void 0,e.useValueLifecycle=function({value:e,valueState:s,format:r,validateValueOnExternalChange:n}){const l=(0,t.useRef)(e);if((0,t.useEffect)((()=>{const{value:e,setDisplayValue:t}=s;t(r(e))}),[]),l.current!==e&&(l.current=e,void 0!==e&&e!==s.value)){const{setDisplayValue:t,setValue:l}=s;n(e)===a.ValidationResult.VALID&&(l(e),t(r(e)))}}})),define("oj-c/editable-value/UNSAFE_useEditableValue/useEditableValue",["require","exports","preact/hooks","../UNSAFE_useComponentMessaging/useComponentMessaging","../UNSAFE_useConverter/useConverter","../UNSAFE_useConverterLifecycle/useConverterLifecycle","../UNSAFE_useDeferredValidators/useDeferredValidators","../UNSAFE_useValidationLifecycle/useValidationLifecycle","../UNSAFE_useValidators/useValidators","../UNSAFE_useValue/useValue","../UNSAFE_useValueLifecycle/useValueLifecycle","../utils/utils"],(function(require,e,t,a,s,r,n,l,i,o,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=void 0,e.useEditableValue=function({ariaDescribedBy:e,converter:d,disabled:f,displayOptions:p,implicitComponentValidator:m,labelHint:v,messagesCustom:y,readonly:g,required:V,requiredMessageDetail:S,shouldNormalizeValueOnCommit:h=!0,validators:C,value:b,addBusyState:E,onMessagesCustomChanged:A,onRawValueChanged:M,onValidChanged:_,onValueChanged:F,onTransientValueChanged:k,wrapValueState:j}){const D=(0,a.useComponentMessaging)({messagesCustom:y,onMessagesCustomChanged:A}),{clearAllMessages:L,visibleMessages:U}=D,x=(0,n.useDeferredValidators)({labelHint:v,required:V,requiredMessageDetail:S}),I=m?C?[m,...C]:[m]:C,w=(0,i.useValidators)({componentMessagingState:D,defaultValidState:"valid",deferredValidators:x,validators:I,addBusyState:E,onValidChanged:_}),{validateValueOnExternalChange:P,validateValueOnInternalChange:T}=w,{format:R,parse:N}=(0,s.useConverter)({componentMessagingState:D,converter:d,validationState:w}),O=(0,o.useValue)({value:b,format:R,parse:N,onRawValueChanged:M,onTransientValueChanged:k,onValueChanged:F}),q=j?j(O):O,{displayValue:z,value:B,getValueForValidation:H,setValueAfterValidation:K,refreshDisplayValue:W,setDisplayValue:$,setTransientValue:X,setValue:G}=q,{runFullValidationAndUpdateValue:Y}=(0,l.useValidationLifecycle)({componentMessagingState:D,validationState:w,deferredValidators:x,validators:C,getValueForValidation:H,setValueAfterValidation:K,readonly:g,disabled:f});(0,r.useConverterLifecycle)({converter:d,validationState:w,refreshDisplayValue:W,runFullValidationAndUpdateValue:Y}),(0,u.useValueLifecycle)({value:b,valueState:q,format:R,validateValueOnExternalChange:P});const J=(0,t.useCallback)((e=>N(h?(0,c.normalizeValue)(e):e)),[h,N]),Q=(0,t.useCallback)((async(e,t=!0)=>{const a=await T(e);return a===i.ValidationResult.VALID&&t&&G(e),a}),[T]),Z=(0,t.useCallback)((async({value:e})=>{const t=J(e);if(t===s.ConverterErrorSymbol)return;const a=t;await Q(a)===i.ValidationResult.VALID&&$(R(a))}),[R,Q,J]),ee=(0,t.useCallback)((({value:e})=>{$(e??"")}),[]),te=(0,t.useCallback)((()=>{L(),P(B),W()}),[B,L,W,P]),ae=(0,t.useCallback)((async()=>{if(g||f)return"valid";const{fullValidate:e}=w,{displayValue:t,value:a,setValueAfterValidation:r}=q,n=J(t);if(n===s.ConverterErrorSymbol)return"invalid";const l=n,i=E?.("running component method validate"),o=await e(l);return i?.(),o?(l!==a&&r(l),"valid"):"invalid"}),[w,q,E,J,g,f]),se=(0,t.useCallback)((()=>{const{hasHiddenMessages:e,showHiddenMessages:t}=D,{setValid:a}=w;e()&&(t(),a("invalidShown"))}),[D,w]);return{value:B,setValue:G,displayValue:z,setDisplayValue:$,setTransientValue:X,methods:{reset:te,validate:ae,showMessages:se},textFieldProps:{messages:"none"!==p?.messages?U:void 0,value:z,"aria-describedby":e,onCommit:Z,onInput:ee},onCommitValue:Q,format:R,normalizeAndParseValue:J,validateValueOnExternalChange:P}}})),define("oj-c/hooks/UNSAFE_useListData/useListData",["require","exports","ojs/ojdataproviderfactory","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useListData=void 0;const s=Object.freeze({status:"loading",data:null}),r={isInitialFetchDeferred:!1};e.useListData=(e,t=r)=>{const o=(0,a.useRef)(null),c=(0,a.useRef)(0),d=(0,a.useRef)(!1),v=(0,a.useRef)(null),y=(0,a.useRef)(null),g=t.fetchSize&&t.fetchSize>0?t.fetchSize:25;if(!e){return[u("exact"),e=>Promise.resolve()]}const V=(0,a.useMemo)((()=>n(e)),[e]),[S,h]=(0,a.useReducer)(l,0===t.initialRowsFetched?u("atLeast"):s),C=(0,a.useCallback)((async(e,a)=>{const s={attributes:t.attributes,sortCriteria:t.sortCriteria,filterCriterion:t.filterCriterion,offset:e.offset,size:e.count},r=!0===d.current?"exact":"atLeast";if(0!==e.count)try{const t=(await V.fetchByOffset(s)).results;a&&a(t),h({status:"success",data:{offset:e.offset,data:t,totalSize:c.current,sizePrecision:r}})}catch(e){h({status:"error",error:e})}else h({status:"success",data:{offset:e.offset,data:[],totalSize:c.current,sizePrecision:r}})}),[V,t.attributes,t.filterCriterion,t.sortCriteria]),b=(0,a.useCallback)((async()=>{h({status:"loading",data:null});const e=new AbortController;y.current=e;const a=V.fetchFirst({attributes:t.attributes,sortCriteria:t.sortCriteria,filterCriterion:t.filterCriterion,size:g,signal:e.signal})[Symbol.asyncIterator]();v.current=a;try{const e=await a.next();if(a!==v.current)return;const s=e.value.fetchParameters;if(s.signal&&s.signal.aborted)return;c.current=e.value.data.length,void 0!==e.done&&(d.current=e.done);const r=t.initialRowsFetched&&t.initialRowsFetched>0?t.initialRowsFetched:g;C({offset:0,count:Math.min(c.current,r)})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;h({status:"error",error:e}),v.current=null}}),[V,C,t.attributes,t.filterCriterion,t.sortCriteria,t.fetchSize]),E=(0,a.useCallback)((async e=>{if(null===v.current)b();else{const t=e.offset+e.count;if(t>c.current){if(null==o.current){const a=i(v,c.current,t);o.current=a;try{const t=await a;void 0!==t.done&&(d.current=t.done);const s=t.total;(s>0||0===s&&d.current)&&(c.current=s,C({offset:e.offset,count:Math.min(c.current-e.offset,e.count)})),o.current=null}catch(e){h({status:"error",error:e}),o.current=null}}}else C(e)}}),[S,b,C]),A=(0,a.useCallback)((()=>{v.current=null,o.current=null,c.current=0,d.current=!1,0===t.initialRowsFetched?h(u("atLeast")):t.isInitialFetchDeferred?h({status:"loading",data:null}):b()}),[b,t.isInitialFetchDeferred,t.initialRowsFetched]);(0,a.useEffect)((()=>{A()}),[A]);const M=(0,a.useCallback)((e=>{if("success"===S.status&&S.data){const a=S.data;let s,r=a.data.length,n=!1;if(e.detail.add){const s=f(e.detail.add,a,t,!0);c.current=c.current+s,r+=s,n=s>0||"exact"===a.sizePrecision,0===s&&(d.current=!1)}if(e.detail.remove){const s=f(e.detail.remove,a,t,!1);c.current=Math.max(0,c.current-s),r=Math.max(0,r-s),n=n||s>0}const l=e.detail.update;l&&(n=n||p(l,a,t),s=e=>{m(l,a,e)}),n&&C({offset:a.offset,count:r},s)}}),[S,t,C]),_=(0,a.useCallback)((e=>{let t=-1;const a=e.detail?.disregardAfterKey;if(a&&"success"===S.status){const e=S.data.data.findIndex((e=>e.metadata.key===a));if(e>-1&&(t=S.data.data.length-e-1),0===t&&S.data.data.length>=g)return}t>-1&&"success"===S.status?(c.current=c.current-t,E({offset:S.data.offset,count:Math.max(S.data.data.length,g)})):("loading"===S.status&&y.current?.abort(),A())}),[S,A]);return(0,a.useEffect)((()=>(V.addEventListener("refresh",_),V.addEventListener("mutate",M),()=>{V.removeEventListener("refresh",_),V.removeEventListener("mutate",M)})),[V,A,M]),[S,E]};const n=e=>(0,t.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}}),l=(e,t)=>e.status===t.status&&"loading"===t.status?e:t,i=async(e,t,a)=>await o(e,t,a),o=async(e,t,a)=>{const s=e.current;if(null===s)return{total:-1,done:void 0};const r=await s.next();return s===e.current?(t+=r.value.data.length)>=a||r.done?{total:t,done:r.done}:o(e,t,a):{total:-1,done:void 0}},u=e=>"atLeast"===e?c:d,c=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"atLeast"}}),d=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"exact"}}),f=(e,t,a,s)=>{let r=0;if(v(e,a)){const a=s?e.indexes?.sort(((e,t)=>e-t)):e.indexes;let n=t.totalSize-1;a?.forEach((e=>{e<=n&&(r=r+=1,s&&(n=n+=1))}))}return r},p=(e,t,a)=>{if(v(e,a)){const a=e.indexes?e.indexes:[],s=t.offset,r=s+t.data.length;for(let e=0;e<a.length;e++)if(a[e]>=s&&a[e]<r)return!0}return!1},m=(e,t,a)=>{e.keys.forEach((e=>{const s=a.find((t=>t.metadata.key==e)),r=t.data.find((t=>t.metadata.key==e));r&&s&&r.data===s.data&&(s.data=new Proxy(s.data,{}))}))},v=(e,t)=>e.indexes&&null==t.sortCriteria&&null==t.filterCriterion})),define("oj-c/select-common/utils/utils",["require","exports","ojs/ojdataprovider","@oracle/oraclejet-preact/utils/UNSAFE_logger"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFilterCriterion=e.isSetEqual=e.isEmpty=e.DEFAULT_VALUE_ITEMS=e.DEFAULT_VALUE_ITEM=e.DEFAULT_VALUE=e.DEFAULT_ITEM_CONTEXT=void 0,e.DEFAULT_ITEM_CONTEXT=null,e.DEFAULT_VALUE=null,e.DEFAULT_VALUE_ITEM=null,e.DEFAULT_VALUE_ITEMS=null,e.isEmpty=function(e){return!e||(Array.isArray(e)?0===e.length:(e instanceof Set||e instanceof Map)&&0===e.size)},e.isSetEqual=function(e,t){if(e===t)return!0;if(e?.size!==t?.size)return!1;const a=Array.from(e),s=Array.from(t);return a.every(((e,t)=>e===s[t]))},e.getFilterCriterion=function(e,s,r){const n=s&&s.length>0;if(!n)return;const l=r,i=l&&l.length>0,o=e?.getCapability("filter"),u=o&&o.textFilter;e&&n&&!u&&(0,a.error)("Core Pack Select: DataProvider does not support text filter.  Filtering results in dropdown may not work correctly.");const c=e&&u&&n&&i?l.reduce(((e,t)=>{if(e)return e;if("unknown"===t)return t;if(t){if(o.textFilterMatching&&o.textFilterMatching.matchBy&&o.textFilterMatching.matchBy.indexOf(t)>-1)return t;(0,a.warn)(`Core Pack Select: DataProvider does not support text filter "${t}" matching.  Filtering results in dropdown may not work as expected.`)}}),null):void 0,d=c?{text:s,matchBy:c}:{text:s};return t.FilterFactory.getFilter({filterDef:d})}})),define("oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","preact/hooks","../utils/utils"],(function(require,e,t,a,s){"use strict";function r(e){return e instanceof Set?new Set(e.values()):e}function n(e,t){return e instanceof Set&&t instanceof Set||e instanceof Map&&t instanceof Map?e.size===t.size:"object"==typeof e&&"object"==typeof t?e.key===t.key:e===t}function l(e,t){return e instanceof Set?e.has(t):null!=e&&e===t}function i(e,t){return e instanceof Set||e instanceof Map?(e.delete(t),e):"number"==typeof e||"string"==typeof e?e===t?s.DEFAULT_VALUE:e:"object"==typeof e&&e.key===t?s.DEFAULT_VALUE_ITEMS:e}Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProviderListeners=void 0,e.useDataProviderListeners=function({dataProvider:e,setValue:o,setValueToSync:u,setValueItemsToSync:c,value:d,valueItems:f}){const p=d instanceof Set,m=(0,a.useCallback)((()=>{(0,s.isEmpty)(d)||(u(r(d)),c(s.DEFAULT_VALUE_ITEMS))}),[d]),v=(0,a.useCallback)((e=>{if((0,s.isEmpty)(d))return;let a=r(d);if(null!=e.detail.remove){e.detail.remove.keys.forEach((e=>{l(a,e)&&(a=i(a,e),(0,t.warn)(`\n              ${p?"SelectMultiple":"SelectSingle"}: selected value removed from data provider: ${e}`))})),n(a,d)||(o((0,s.isEmpty)(a)?s.DEFAULT_VALUE:a),u((0,s.isEmpty)(a)?s.DEFAULT_VALUE:a))}var m;if(!(0,s.isEmpty)(a)&&null!=e.detail.update){const t=e.detail.update.keys;let r=(0,s.isEmpty)(f)?f:(m=f)instanceof Map?new Map(m.entries()):Object.assign({},m);t.forEach((e=>{l(a,e)&&(r=i(r,e))})),n(r,f)||(u(a),c((0,s.isEmpty)(r)?s.DEFAULT_VALUE_ITEMS:r))}}),[d,f]);(0,a.useEffect)((()=>(e?.addEventListener("refresh",m),e?.addEventListener("mutate",v),()=>{e?.removeEventListener("refresh",m),e?.removeEventListener("mutate",v)})),[e,v,m])}})),define("oj-c/select-common/UNSAFE_useWrapDataProvider/useWrapDataProvider",["require","exports","ojs/ojdataproviderfactory","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=void 0,e.useWrapDataProvider=function(e){return(0,a.useMemo)((()=>e?(0,t.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}}):e),[e])}})),define("oj-c/select-common/UNSAFE_useWrapValueState/useWrapValueState",["require","exports","preact/hooks","../utils/utils"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapValueState=void 0,e.useWrapValueState=function({arItemContexts:e,isLoading:s,preactValueItems:r,setPreactValueItems:n}){const l=(0,t.useCallback)((e=>t=>"invalidShown"!==t||s?e:(0,a.isEmpty)(r)?null:e),[s,r]),i=(0,t.useCallback)((()=>{n(e)}),[e]);return{wrapValueState:(0,t.useCallback)((e=>({...e,getValueForValidation:l(e.value),refreshDisplayValue:i})),[l,i])}}})),define("oj-c/utils/UNSAFE_keyUtils/keySetUtils",["require","exports","ojs/ojkeyset"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFirstKey=e.isEmpty=e.keysToKeySet=e.keySetToKeys=void 0;e.keySetToKeys=e=>{if(!e)return{all:!1,keys:new Set};let t={};if(e.isAddAll()){t={all:!0,deletedKeys:new Set(e.deletedValues())}}else if(!e.isAddAll()){t={all:!1,keys:new Set(e.values())}}return t};e.keysToKeySet=e=>{let a;return e.all?(a=new t.AllKeySetImpl,a=a.delete(new Set(e.deletedKeys.values()))):e.all||(a=new t.KeySetImpl(new Set(e.keys.values()))),a};e.isEmpty=e=>!e.all&&0===e.keys.size;e.getFirstKey=(e,t)=>{if(!1===e.all&&e.keys.size>0){const[t]=e.keys;return t}return t.length>0?t[0]:null}})),define("oj-c/select-multiple/useSyncValueAndValueItems",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","oj-c/editable-value/UNSAFE_useValidators/useValidators","oj-c/select-common/utils/utils","preact/hooks"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSyncValueAndValueItems=void 0,e.useSyncValueAndValueItems=function({addBusyState:e,dataProvider:n,setDisplayValue:l,setIsLoading:i,setValue:o,setValueItems:u,value:c,valueItems:d,validateValueOnExternalChange:f}){const p=(0,r.useRef)(c),m=(0,r.useRef)(d),v=c&&c instanceof Set&&c.size>0,y=d&&d.size>0,g=(0,r.useRef)(null),V=(0,r.useCallback)((()=>{if(!v)return void(y&&u(s.DEFAULT_VALUE_ITEMS));const a=Array.from(c.keys()),r=a.reduce(((e,t)=>(y&&d.has(t)||e.push(t),e)),[]);if(0===r.length){const e=new Map;c.forEach((t=>{e.set(t,d.get(t))}));const t=Array.from(e.keys()),s=a.every(((e,a)=>e===t[a]));return void(d?.size===e.size&&s||u(e))}i(!0);const l=e("useSyncValueItems: calling fetchByKeys"),o={};g.current=o;const f=()=>{o===g.current&&i(!1),l()};n.fetchByKeys({keys:new Set(r)}).then((e=>{if(o===g.current){const t=function(e,t,a){const s=Array.from(e.keys());return s.reduce(((e,s)=>{if(t&&t.has(s))return e.set(s,t.get(s)),e;const r=a.get(s);if(!r)throw new Error(`oj-c-select-multiple: could not fetch data for key ${s}`);return e.set(s,{key:s,data:r.data,metadata:r.metadata?r.metadata:{key:s}}),e}),new Map)}(c,d,e.results);u(t),f()}}),(e=>{o===g.current&&(0,t.error)(`SelectMultiple: fetchByKeys promise rejected: ${e}`),f()}))}),[e,n,v,y,i,u,c,d]),S=(0,r.useCallback)((()=>{const e=e=>{f(e)===a.ValidationResult.VALID&&(o(e),l(e))};if(!y)return void(v&&e(s.DEFAULT_VALUE));const t=Array.from(d.keys()),r=new Set(t);if(!(c&&c instanceof Set&&c.size===r.size))return void e(r);const n=Array.from(c.keys());t.some(((e,t)=>e!==n[t]))&&e(r)}),[v,y,l,o,f,c,d]);(0,r.useEffect)((()=>{v?V():y&&S()}),[]),(0,r.useEffect)((()=>{c!==p.current&&d!==m.current?(p.current=c,m.current=d,c?V():S()):c!==p.current?(p.current=c,V()):d!==m.current&&(m.current=d,S())}),[V,S,c,d])}})),define("oj-c/select-multiple/useValueItems",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValueItems=void 0,e.useValueItems=function(e,s){const[r,n]=(0,t.useUncontrolledState)(e,s),[l,i]=(0,a.useState)(e);l!==e&&r!==e&&n(e);const[o,u]=(0,a.useState)(r),[c,d]=(0,a.useState)(r?Array.from(r.values()):void 0);return o!==r&&d(r?Array.from(r.values()):void 0),l!==e&&i(e),o!==r&&u(r),{valueItems:r,setValueItems:n,preactValueItems:c}}})),define("oj-c/select-multiple/useSelectMultiplePreact",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","oj-c/editable-value/UNSAFE_useEditableValue/useEditableValue","oj-c/editable-value/UNSAFE_useValidators/useValidators","oj-c/hooks/UNSAFE_useListData/useListData","oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners","oj-c/select-common/UNSAFE_useWrapDataProvider/useWrapDataProvider","oj-c/select-common/UNSAFE_useWrapValueState/useWrapValueState","oj-c/select-common/utils/utils","oj-c/utils/UNSAFE_keyUtils/keySetUtils","preact/hooks","./useSyncValueAndValueItems","./useValueItems"],(function(require,e,t,a,s,r,n,l,i,o,u,c,d,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectMultiplePreact=void 0,e.useSelectMultiplePreact=function({data:e,disabled:p,displayOptions:m,itemTemplate:v,itemText:y,labelEdge:g,labelHint:V,labelStartWidth:S,matchBy:h,messagesCustom:C,placeholder:b,readonly:E,required:A,requiredMessageDetail:M,textAlign:_,userAssistanceDensity:F,value:k,valueItems:j,virtualKeyboard:D,onMessagesCustomChanged:L,onValidChanged:U,onValueChanged:x,onValueItemsChanged:I,...w},P){const[T,R]=(0,c.useState)(void 0),[N,O]=(0,c.useState)(null!=e&&null!=k&&k.size>0&&(null==j||0===j.size)),q=(0,c.useMemo)((()=>h&&h.length>0?[...h]:void 0),[h]),{valueItems:z,setValueItems:B,preactValueItems:H}=(0,f.useValueItems)(j,I),[K,W]=(0,c.useState)(H),[$,X]=(0,c.useState)(H);K!==H&&$!==H&&X(H);const{wrapValueState:G}=(0,i.useWrapValueState)({arItemContexts:H,isLoading:N,preactValueItems:$,setPreactValueItems:X}),Y=(0,t.useTranslationBundle)("@oracle/oraclejet-preact"),J=M||Y.select_requiredMessageDetail(),{methods:Q,onCommitValue:Z,setDisplayValue:ee,setValue:te,textFieldProps:ae,value:se,validateValueOnExternalChange:re}=(0,a.useEditableValue)({ariaDescribedBy:w["aria-describedby"],disabled:p,displayOptions:m,messagesCustom:C,readonly:E,required:A,requiredMessageDetail:J,value:k,addBusyState:P,onMessagesCustomChanged:L,onValidChanged:U,onValueChanged:x,wrapValueState:G}),{"aria-describedby":ne,messages:le}=ae,ie=null===se||se instanceof Set&&0===se.size,oe=(0,l.useWrapDataProvider)(e),[ue,ce]=(0,c.useState)(se),[de,fe]=(0,c.useState)(z),[pe,me]=(0,c.useState)(se),[ve,ye]=(0,c.useState)(z);pe!==se&&ce(se),ve!==z&&fe(z),(0,n.useDataProviderListeners)({dataProvider:oe,setValue:te,setValueToSync:ce,setValueItemsToSync:fe,value:se,valueItems:z}),(0,d.useSyncValueAndValueItems)({addBusyState:P,dataProvider:oe,setDisplayValue:ee,setIsLoading:O,setValue:te,setValueItems:B,value:ue,valueItems:de,validateValueOnExternalChange:re});const[ge,Ve]=(0,r.useListData)(oe,{filterCriterion:T,initialRowsFetched:0}),Se=(0,c.useCallback)((async({value:e})=>{const t=e&&e.size>0?e:o.DEFAULT_VALUE;ee(t);const a=await Z(t);if(a===s.ValidationResult.INVALID)X(void 0);else if(a===s.ValidationResult.VALID&&e&&e.size>0&&H?.length===e.size){Array.from(e).every(((e,t)=>e===H?.[t].key))&&$!==H&&X(H)}}),[H,$,Z,ee]),he=(0,c.useCallback)((({searchText:e})=>{const t=(0,o.getFilterCriterion)(oe,e,q);R(t)}),[oe,q]),Ce=(0,c.useRef)((0,u.keysToKeySet)({all:!1,keys:new Set})),be=(0,c.useCallback)((({data:e,metadata:t,searchText:a,selectedKeys:s,onSelectionChange:r})=>{const n=s??new Set,l=Ce.current.keys.keys??new Set,i=(0,o.isSetEqual)(l,n)?Ce.current:(0,u.keysToKeySet)({all:!1,keys:n});Ce.current=i;return v?v({selectedKeys:i,onSelectedKeysChanged:e=>{const t=(e instanceof CustomEvent?e.detail.value:e).keys.keys;r({target:e instanceof CustomEvent?e.target:null,value:new Set(t?.values())})},item:{data:e,metadata:t},searchText:a}):void 0}),[v]),Ee=(0,c.useCallback)((async e=>Se({value:e??void 0,previousValue:k??void 0})),[Se,k]);return K!==H&&W(H),pe!==se&&me(se),ve!==z&&ye(z),{methods:Q,selectMultipleProps:{"aria-describedby":ne,data:ge.data,
isDisabled:p,isLoading:N,isReadonly:E,isRequired:A,isRequiredShown:A&&("compact"===F||ie),itemRenderer:v?be:void 0,itemText:y,label:V,labelEdge:g,labelStartWidth:S,messages:le,onCommit:Se,onFilter:he,onLoadRange:Ve,placeholder:b,textAlign:_,userAssistanceDensity:F,valueItems:$,virtualKeyboard:D},_selectItemsByValue:Ee}}})),define("oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useMergedFormContext=void 0,e.useMergedFormContext=function({propContainerReadonly:e,propLabelWrapping:a,propReadonly:s,propUserAssistanceDensity:r}){const n=(0,t.useFormContext)(),l=r??n.userAssistanceDensity,i=s??n.isReadonly,{isFormLayout:o,isReadonly:u,labelWrapping:c,...d}=n;return{containerProps:{...d,isFormLayout:void 0!==e||o,isReadonly:e??u,labelWrapping:a??c},readonlyValue:i,uadValue:l}}})),define("oj-c/select-multiple/select-multiple",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","@oracle/oraclejet-preact/UNSAFE_SelectMultiple","@oracle/oraclejet-preact/hooks/UNSAFE_useTabbableMode","ojs/ojcontext","ojs/ojvcomponent","preact/compat","preact/hooks","oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText","./useSelectMultiplePreact","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext","oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext","@oracle/oraclejet-preact/hooks/UNSAFE_useFormVariantContext","@oracle/oraclejet-preact/utils/UNSAFE_styles/Layout","css!oj-c/select-multiple/select-multiple-styles.css"],(function(require,e,t,a,s,r,n,l,i,o,u,c,d,f,p,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectMultiple=void 0;const v={messages:"display"},y={instruction:""},g={definition:"",source:""},V=[];e.SelectMultiple=(0,l.registerCustomElement)("oj-c-select-multiple",(0,i.forwardRef)((function({columnSpan:e=1,containerReadonly:a,data:r=null,disabled:i=!1,displayOptions:S=v,help:h=y,helpHints:C=g,id:b,labelWrapping:E,matchBy:A=null,messagesCustom:M=V,readonly:_,required:F=!1,userAssistanceDensity:k,value:j=null,valueItems:D=null,virtualKeyboard:L="auto",...U},x){const I=(0,o.useRef)(),w=(0,o.useRef)(),P=(0,o.useCallback)((e=>I.current?n.getContext(I.current).getBusyContext().addBusyState({description:`oj-c-select-multiple id=${b}: ${e}`}):()=>{}),[b]),{containerProps:T,uadValue:R,readonlyValue:N}=(0,f.useMergedFormContext)({propContainerReadonly:a,propLabelWrapping:E,propReadonly:_,propUserAssistanceDensity:k}),{selectMultipleProps:O,methods:q,_selectItemsByValue:z}=(0,c.useSelectMultiplePreact)({data:r,disabled:i,displayOptions:S,matchBy:A,messagesCustom:M,readonly:N,required:F,userAssistanceDensity:R,value:j,valueItems:D,virtualKeyboard:L,...U},P);(0,o.useImperativeHandle)(x,(()=>({blur:()=>w.current?.blur(),focus:()=>w.current?.focus(),_selectItemsByValue:z,...q})),[q,z]);const B=(0,u.useAssistiveText)({displayOptions:S,help:h,helpHints:C,userAssistanceDensity:O.userAssistanceDensity}),H=(0,p.useFormVariantContext)();return(0,t.jsx)(l.Root,{id:b,ref:I,class:m.layoutSpanStyles.layoutSpanColumn[e],children:(0,t.jsx)(d.FormContext.Provider,{value:T,children:(0,t.jsx)(s.SelectMultiple,{ref:w,...B,...O,variant:H})})})})),"SelectMultiple",{properties:{columnSpan:{type:"number"},containerReadonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},data:{type:"DataProvider|null"},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["none","display"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"},sourceText:{type:"string"}}},itemText:{type:"string|number|function"},labelEdge:{type:"string",enumValues:["none","start","top","inside"],binding:{consume:{name:"containerLabelEdge"}}},labelHint:{type:"string"},labelStartWidth:{type:"number|string",binding:{consume:{name:"labelWidth"}}},labelWrapping:{type:"string",enumValues:["truncate","wrap"],binding:{consume:{name:"labelWrapping"}}},matchBy:{type:"Array<string>|null"},messagesCustom:{type:"Array<object>",writeback:!0},placeholder:{type:"string"},readonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},required:{type:"boolean"},requiredMessageDetail:{type:"string"},textAlign:{type:"string",enumValues:["end","start","right"]},userAssistanceDensity:{type:"string",enumValues:["compact","reflow","efficient"],binding:{consume:{name:"containerUserAssistanceDensity"}}},value:{type:"object|null",writeback:!0},valueItems:{type:"object|null",writeback:!0},virtualKeyboard:{type:"string",enumValues:["number","search","auto","url","text","email","tel"]},valid:{type:"string",enumValues:["pending","valid","invalidHidden","invalidShown"],readOnly:!0,writeback:!0}},slots:{itemTemplate:{data:{}}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value","valueItems"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["aria-describedby","id"]},methods:{blur:{},focus:{},showMessages:{},reset:{},validate:{},_selectItemsByValue:{}}},{columnSpan:1,data:null,disabled:!1,displayOptions:{messages:"display"},help:{instruction:""},helpHints:{definition:"",source:""},matchBy:null,messagesCustom:[],required:!1,value:null,valueItems:null,virtualKeyboard:"auto"},{"@oracle/oraclejet-preact":a.default},{consume:[p.FormVariantContext,r.TabbableModeContext]})})),define("oj-c/select-multiple",["require","exports","oj-c/select-multiple/select-multiple"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectMultiple=void 0,Object.defineProperty(e,"SelectMultiple",{enumerable:!0,get:function(){return t.SelectMultiple}})}));
//# sourceMappingURL=select-multiple.js.map