define(['exports', 'preact/hooks', 'preact/jsx-runtime', './useId-c9578d26', './useHover-7964884c', './useFocus-4194fc59', './useTouch-37489bb5', './mergeProps-bcfa6a92', './useAnimation-5a74955f', './useComponentTheme-5aa41a8f', './useTestId-d0c49456', './useThemeInterpolations-95e6f849', './classNames-08d99695', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentTheme', './useColorScheme-8358a6c9', './tooltipUtils-304eef18'], (function(e,t,n,o,u,s,r,i,c,a,l,d,m,p,f,g){"use strict";const h=({children:e,id:o,isOpen:u,isDatatip:s,onTransitionEnd:r,testId:i,...f})=>{const g=t.useRef(null),h=t.useRef(null),T=l.useTestId(i),{baseTheme:v,variantClasses:b,styles:P}=a.useComponentTheme(p.TooltipContentRedwoodTheme,{variant:s?"datatip":"tooltip"}),C=d.useThemeInterpolations(),{nodeRef:E}=c.useAnimation(u?"mounted":"unmounted",{animationStates:{mounted:e=>{const t=e.firstChild;return{from:{maxHeight:"0",opacity:"0%"},to:{maxHeight:`${t?.offsetHeight}px`,opacity:s?"100%":"95%"},options:{duration:s?1:150,easing:[0,0,.2,1]}}},unmounted:e=>({from:{opacity:s?"100%":"95%"},to:{maxHeight:"0",opacity:"0%"},options:{duration:s?1:150,easing:[0,0,.2,1]}})},isAnimatedOnMount:!0,onAnimationEnd:()=>r?.()});return t.useEffect((()=>{g.current&&h.current?.offsetHeight&&(g.current.style.height=`${h.current?.offsetHeight}px`)}),[]),n.jsx("div",{ref:g,id:o,role:"tooltip",class:m.classNames([P.wrapper,C,v]),...T,children:n.jsx("div",{ref:E,class:P.inner,...f,children:n.jsx("div",{ref:h,class:m.classNames([b,P.content]),children:e})})})},T=({text:e,isOpen:c=!1,variant:a="tooltip",position:l="bottom",focusStrategy:d="browser",isDisabled:m=!1,anchor:p={x:"element",y:"element"},offset:T,onToggle:v,testId:b})=>{const P=g.getGlobalTooltipManager(),C=m||!e,E=t.useRef(!0),[x,y]=t.useState(!C&&c?"mounting":"unmounted"),R=t.useRef(x),I=e=>{R.current=e,y(e)},[D,H]=t.useState(!1);H(!1);const k="datatip"===a,[w,L]=t.useState(!1),A="logical"===d,O=t.useRef(!0),{hoverProps:S,isHover:F}=u.useHover({}),{touchProps:M,isTouch:_}=r.useTouch({isDisabled:m}),{focusProps:j,isFocus:N}=s.useFocus({isDisabled:A}),{hoverProps:B,isHover:Y}=u.useHover({isDisabled:m||!c}),G="pointer"===p.x||"pointer"===p.y,K=t.useRef(o.useId()),U=t.useRef(null),W=t.useRef({x:-9999,y:-9999}),$=G&&!N?W:U,X=k?0:g.SHOW_TOOLTIP_DELAY,q=k?0:g.HIDE_TOOLTIP_DELAY,z=t.useRef(null),J=f.useColorScheme(),Q=t.useRef(!1),V=t.useRef(!1),Z=()=>{z.current&&(clearTimeout(z.current),z.current=null)};t.useEffect((()=>{Q.current=A?w:N&&P.isTabKeyActive(),Q.current&&(V.current=!1)}),[N,w,A,P]),t.useEffect((()=>{V.current=F}),[F]),t.useEffect((()=>{O.current?O.current=!1:G&&F&&"unmounted"===x||(e=>{if(e)switch(x){case"unmounted":I("mountPending");break;case"unmounting":I("mounting"),v?.({value:!0});break;case"unmountPending":Z(),I("mounted")}else switch(x){case"mounting":case"mounted":I("unmountPending");break;case"mountPending":Z(),le(),I("unmounted")}})(F&&V.current||(N||w)&&Q.current||Y||_)}),[F,N,w,Y,_,G,x,v]);const ee=t.useCallback((()=>{Q.current=!1,V.current=!1,v?.({value:!1})}),[]),te=t.useCallback((e=>{$.current instanceof Element&&$.current.contains(e.target)&&(Z(),document.removeEventListener("mousedown",te,!0),ee())}),[$,ee]);t.useEffect((()=>{E.current?E.current=!1:I(c?"mounting":"unmounting")}),[c]),t.useEffect((()=>()=>{Z(),Q.current=!1,V.current=!1}),[]),t.useEffect((()=>{"mounted"===x?P.register(ee):"unmounted"===x&&(P.unregister(ee),document.removeEventListener("mousedown",te,!0))}),[x,ee,P,te]),t.useEffect((()=>(z.current||"mountPending"!==x&&"unmountPending"!==x||("mountPending"===x&&document.addEventListener("mousedown",te,!0),z.current=setTimeout((()=>{Z(),"mountPending"!==x&&"unmountPending"!==x||x!==R.current||v?.({value:"mountPending"===x})}),"mountPending"===x?X:q)),()=>{Z()})),[x,X,q,v,te]);const ne=e=>{L(!0),U.current=e,$.current=e},oe=()=>{L(!1)},ue=t.useCallback((e=>{U.current=e.currentTarget}),[]),se=t.useCallback((e=>{e.eventPhase===Event.AT_TARGET&&(Q.current=!1)}),[]),re=A?{}:{onFocus:ue,onBlur:se},ie={onMouseEnter:t.useCallback((e=>{U.current=e.target}),[])},ce={onKeyDown:t.useCallback((e=>{"Escape"===e.code&&Q.current&&(e.preventDefault(),Q.current=!1,v?.({value:!1}))}),[v])};let ae;const le=()=>{W.current={x:-9999,y:-9999}};if(C)ae=i.mergeProps(S,j,ie,re);else{const e={"aria-describedby":K.current,...G&&{onMouseLeave:()=>{"mounting"!==x&&Z()},onMouseMove:e=>{(e=>{if("unmounted"!==x&&("datatip"!==a||"mounted"!==x))return;const t=U?.current?.getBoundingClientRect(),n=document.body.scrollLeft+(t?.left||0)+(t?.width||0),o=document.body.scrollTop+(t?.top||0)+(t?.height||0),u="pointer"===p.x?e.clientX:n,s="pointer"===p.y?e.clientY:o;"mounted"===x?(W.current={x:u,y:s},!0!==D&&H(!0)):"unmounted"===x&&(Z(),z.current=setTimeout((()=>{"unmounted"===x&&(W.current={x:u,y:s},v?.({value:!0}))}),q))})(e)}}};ae=i.mergeProps(S,j,M,ie,re,e,ce,A?{onLogicalFocus:ne,onLogicalBlur:oe}:{})}if(C)return Z(),le(),{tooltipContent:null,tooltipProps:ae};const de=l,me=n.jsx(h,{id:K.current,testId:b,isOpen:["mounting","mounted","unmountPending"].includes(x),...B,isDatatip:k,onTransitionEnd:()=>{"mounting"===x&&I("mounted"),"unmounting"===x&&(le(),I("unmounted"))},children:e}),pe=g.getWrappedTooltipContent(me,a,J,$,de,T);return{tooltipContent:!["unmounted","mountPending"].includes(x)&&pe,tooltipProps:ae}};e.TooltipContent=h,e.useTooltip=({text:e,position:n="bottom",isDisabled:o=!1,anchor:u={x:"element",y:"element"},offset:s,variant:r="tooltip",testId:i})=>{const[c,a]=t.useState(!1),l=o||!e,d=t.useCallback((e=>{a(e.value)}),[]),{tooltipContent:m,tooltipProps:p}=T({text:e,isOpen:c,position:n,isDisabled:l,offset:s,anchor:u,variant:r,onToggle:d,testId:i});return{tooltipContent:m,tooltipProps:p}},e.useTooltipControlled=T}));
//# sourceMappingURL=useTooltip-f7c1ad5c.js.map
