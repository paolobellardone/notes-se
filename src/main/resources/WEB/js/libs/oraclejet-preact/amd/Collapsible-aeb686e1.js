define(['exports', 'preact/jsx-runtime', 'preact/hooks', './useId-e0c3517c', 'preact', './classNames-49c3ba27', './useComponentTheme-9a36e65b', './Flex-0052275f', './Separator-f7e57213', './ChevronDown-5bbd115d', './CollapseIcon-76ad54f9', './ChevronUp-a5ed99ef', './usePress-465090ef', './UNSAFE_Collapsible/themes/redwood/CollapsibleTheme', './useAnimation-24256140', './useTestId-dfceb92d'], (function(e,n,s,i,a,o,t,l,d,r,c,u,b,h,p,x){"use strict";const m=({isExpanded:e,isDisabled:s,iconPosition:i})=>{const a=s?"disabled":"primary",o="start"===i&&e?r.SvgChevronDown:c.CollapseIcon,t="end"===i&&e?u.SvgChevronUp:r.SvgChevronDown,l="start"===i?o:t;return n.jsx(l,{size:"6x",color:a})},g=({children:e,id:i,contentId:r,isDisabled:c,isExpanded:u,iconPosition:p,variant:x="basic",toggleHandler:g,accessibleLabel:v,accessibleLabelId:f})=>{const[C,j]=s.useState(!1),E=s.useRef(!1),{classes:S,styles:y}=t.useComponentTheme(h.CollapsibleRedwoodTheme,{disabled:c?"isDisabled":"notDisabled",divider:"horizontal-rule"===x?"hasDivider":"noDivider",focused:C?"isFocused":"notFocused"}),D=o.classNames([y.headerChildrenStyle,"end"===p&&y.iconEndStyle,"start"===p&&y.iconStartStyle]),w=s.useCallback((e=>{if(g(e.target),C){(window&&"PointerEvent"in window&&e instanceof PointerEvent||e instanceof MouseEvent)&&j(!1)}}),[g,C]),{pressProps:I}=b.usePress(w,{isDisabled:c,isRepeat:!1}),T=s.useCallback((e=>{"focusin"!==e.type||E.current?j(!1):j(!0)}),[]),H=()=>{E.current=!0},P=()=>{E.current=!1},F=v?{"aria-label":v}:f?{"aria-labelledby":f}:{"aria-labelledby":i};return n.jsxs(n.Fragment,{children:[n.jsx("div",{id:i,className:S,...I,children:n.jsx(l.Flex,{align:"center",justify:"start"===p?"start":"between",children:n.jsxs(a.Fragment,{children:["end"===p&&n.jsx("div",{className:D,children:e}),n.jsx("div",{tabIndex:0,role:"button","aria-controls":r,"aria-expanded":u,onFocus:T,onBlur:T,onMouseDown:H,onMouseUp:P,className:y.chevronStyle,...F,children:n.jsx(m,{iconPosition:p,isExpanded:u,isDisabled:c})}),"start"===p&&n.jsx("div",{className:D,children:e})]})})}),"horizontal-rule"===x&&n.jsx(d.Separator,{})]})},v=({children:e,id:i,isExpanded:a,onTransitionEnd:o})=>{const[l,d]=s.useState(a?"expanding":"unmounted"),{styles:r}=t.useComponentTheme(h.CollapsibleRedwoodTheme),c=s.useRef({overflowY:"hidden",maxHeight:a?"none":"0"});s.useEffect((()=>{("unmounted"!==l||a)&&d(a?"expanding":"collapsing")}),[a,l]);const{nodeRef:u}=p.useAnimation(l,{animationStates:f,onAnimationEnd:({animationState:e})=>{"collapsing"===e&&d("unmounted"),o?.()}});return n.jsx("div",{className:r.contentChildrenStyle,ref:u,id:i,tabIndex:-1,style:c.current,"aria-hidden":!a||void 0,children:"unmounted"!==l&&e})},f={expanding:e=>({to:{maxHeight:`${e.scrollHeight}px`},options:{duration:400},end:{maxHeight:"none"}}),collapsing:e=>({..."none"===e.style.maxHeight&&{from:{maxHeight:`${e.scrollHeight}px`}},to:{maxHeight:"0"},options:{duration:400}})};e.Collapsible=({header:e,children:a,isDisabled:o=!1,isExpanded:t=!1,iconPosition:l="start",variant:d="basic",onToggle:r,onTransitionEnd:c,"aria-label":u,"aria-labelledby":b,testId:h})=>{const p=i.useId(),m=`oj-collapsible-header-${p}`,f=`oj-collapsible-content-${p}`,C=x.useTestId(h),j=s.useCallback((e=>{o||r?.({value:!t,target:e})}),[o,r,t]),E=s.useCallback((()=>{c?.({value:t})}),[c,t]);return n.jsxs("div",{...C,children:[n.jsx(g,{id:m,contentId:f,toggleHandler:j,isDisabled:o,isExpanded:t,iconPosition:l,variant:d,accessibleLabel:u,accessibleLabelId:b,children:e}),n.jsx(v,{id:f,isExpanded:t,onTransitionEnd:E,children:a})]})}}));
//# sourceMappingURL=Collapsible-aeb686e1.js.map
